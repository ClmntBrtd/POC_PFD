(self.webpackChunkprimary_flight_display=self.webpackChunkprimary_flight_display||[]).push([[179],{493:(el,Be,hs)=>{"use strict";function C(i){return"function"==typeof i}function So(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const fs=So(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function ms(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class Dt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(C(n))try{n()}catch(s){t=s instanceof fs?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{f(s)}catch(o){t=t??[],o instanceof fs?t=[...t,...o.errors]:t.push(o)}}if(t)throw new fs(t)}}add(t){var e;if(t&&t!==this)if(this.closed)f(t);else{if(t instanceof Dt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ms(e,t)}remove(t){const{_finalizers:e}=this;e&&ms(e,t),t instanceof Dt&&t._removeParent(this)}}Dt.EMPTY=(()=>{const i=new Dt;return i.closed=!0,i})();const ps=Dt.EMPTY;function y(i){return i instanceof Dt||i&&"closed"in i&&C(i.remove)&&C(i.add)&&C(i.unsubscribe)}function f(i){C(i)?i():i.unsubscribe()}const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},p={setTimeout(i,t,...e){const{delegate:n}=p;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=p;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function l(i){p.setTimeout(()=>{const{onUnhandledError:t}=_;if(!t)throw i;t(i)})}function u(){}const a=d("C",void 0,void 0);function d(i,t,e){return{kind:i,value:t,error:e}}let v=null;function w(i){if(_.useDeprecatedSynchronousErrorHandling){const t=!v;if(t&&(v={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=v;if(v=null,e)throw n}}else i()}class D extends Dt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,y(t)&&t.add(this)):this.destination=_e}static create(t,e,n){return new j(t,e,n)}next(t){this.isStopped?de(function g(i){return d("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?de(function h(i){return d("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?de(a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const M=Function.prototype.bind;function T(i,t){return M.call(i,t)}class R{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){q(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){q(n)}else q(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){q(e)}}}class j extends D{constructor(t,e,n){let r;if(super(),C(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&_.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&T(t.next,s),error:t.error&&T(t.error,s),complete:t.complete&&T(t.complete,s)}):r=t}this.destination=new R(r)}}function q(i){_.useDeprecatedSynchronousErrorHandling?function S(i){_.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=i)}(i):l(i)}function de(i,t){const{onStoppedNotification:e}=_;e&&p.setTimeout(()=>e(i,t))}const _e={closed:!0,next:u,error:function ae(i){throw i},complete:u},be="function"==typeof Symbol&&Symbol.observable||"@@observable";function he(i){return i}function De(i){return 0===i.length?he:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let me=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function N(i){return i&&i instanceof D||function A(i){return i&&C(i.next)&&C(i.error)&&C(i.complete)}(i)&&y(i)}(e)?e:new j(e,n,r);return w(()=>{const{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Ee(n))((r,s)=>{const o=new j({next:c=>{try{e(c)}catch(m){s(m),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[be](){return this}pipe(...e){return De(e)(this)}toPromise(e){return new(e=Ee(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Ee(i){var t;return null!==(t=i??_.Promise)&&void 0!==t?t:Promise}const B=So(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let P=(()=>{class i extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new X(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new B}next(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?ps:(this.currentObservers=null,s.push(e),new Dt(()=>{this.currentObservers=null,ms(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new me;return e.source=this,e}}return i.create=(t,e)=>new X(t,e),i})();class X extends P{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:ps}}function F(i){return C(i?.lift)}function I(i){return t=>{if(F(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(i,t,e,n,r){return new $(i,t,e,n,r)}class $ extends D{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(c){try{e(c)}catch(m){t.error(m)}}:super._next,this._error=r?function(c){try{r(c)}catch(m){t.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function H(i,t){return I((e,n)=>{let r=0;e.subscribe(V(n,s=>{n.next(i.call(t,s,r++))}))})}function ze(i){return this instanceof ze?(this.v=i,this):new ze(i)}function _t(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(k){n[k]&&(r[k]=function(O){return new Promise(function(L,U){s.push([k,O,L,U])>1||c(k,O)})})}function c(k,O){try{!function m(k){k.value instanceof ze?Promise.resolve(k.value.v).then(b,x):E(s[0][2],k)}(n[k](O))}catch(L){E(s[0][3],L)}}function b(k){c("next",k)}function x(k){c("throw",k)}function E(k,O){k(O),s.shift(),s.length&&c(s[0][0],s[0][1])}}function qt(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function Ne(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(c,m){!function r(s,o,c,m){Promise.resolve(m).then(function(b){s({value:b,done:c})},o)}(c,m,(o=i[s](o)).done,o.value)})}}}const Do=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Gp(i){return C(i?.then)}function Xp(i){return C(i[be])}function Yp(i){return Symbol.asyncIterator&&C(i?.[Symbol.asyncIterator])}function qp(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Kp=function pE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zp(i){return C(i?.[Kp])}function Qp(i){return _t(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield ze(e.read());if(r)return yield ze(void 0);yield yield ze(n)}}finally{e.releaseLock()}})}function Jp(i){return C(i?.getReader)}function pi(i){if(i instanceof me)return i;if(null!=i){if(Xp(i))return function gE(i){return new me(t=>{const e=i[be]();if(C(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Do(i))return function _E(i){return new me(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Gp(i))return function vE(i){return new me(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,l)})}(i);if(Yp(i))return eg(i);if(Zp(i))return function bE(i){return new me(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(Jp(i))return function yE(i){return eg(Qp(i))}(i)}throw qp(i)}function eg(i){return new me(t=>{(function wE(i,t){var e,n,r,s;return function ne(i,t,e,n){return new(e||(e=Promise))(function(s,o){function c(x){try{b(n.next(x))}catch(E){o(E)}}function m(x){try{b(n.throw(x))}catch(E){o(E)}}function b(x){x.done?s(x.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(x.value).then(c,m)}b((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=qt(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function jn(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Xt(i,t,e=1/0){return C(t)?Xt((n,r)=>H((s,o)=>t(n,s,r,o))(pi(i(n,r))),e):("number"==typeof t&&(e=t),I((n,r)=>function CE(i,t,e,n,r,s,o,c){const m=[];let b=0,x=0,E=!1;const k=()=>{E&&!m.length&&!b&&t.complete()},O=U=>b<n?L(U):m.push(U),L=U=>{s&&t.next(U),b++;let G=!1;pi(e(U,x++)).subscribe(V(t,te=>{r?.(te),s?O(te):t.next(te)},()=>{G=!0},void 0,()=>{if(G)try{for(b--;m.length&&b<n;){const te=m.shift();o?jn(t,o,()=>L(te)):L(te)}k()}catch(te){t.error(te)}}))};return i.subscribe(V(t,O,()=>{E=!0,k()})),()=>{c?.()}}(n,r,i,e)))}function _s(i=1/0){return Xt(he,i)}const Cn=new me(i=>i.complete());function tg(i){return i&&C(i.schedule)}function Gd(i){return i[i.length-1]}function Eo(i){return tg(Gd(i))?i.pop():void 0}function ng(i,t=0){return I((e,n)=>{e.subscribe(V(n,r=>jn(n,i,()=>n.next(r),t),()=>jn(n,i,()=>n.complete(),t),r=>jn(n,i,()=>n.error(r),t)))})}function rg(i,t=0){return I((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function sg(i,t){if(!i)throw new Error("Iterable cannot be null");return new me(e=>{jn(e,t,()=>{const n=i[Symbol.asyncIterator]();jn(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Lt(i,t){return t?function IE(i,t){if(null!=i){if(Xp(i))return function DE(i,t){return pi(i).pipe(rg(t),ng(t))}(i,t);if(Do(i))return function ME(i,t){return new me(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Gp(i))return function EE(i,t){return pi(i).pipe(rg(t),ng(t))}(i,t);if(Yp(i))return sg(i,t);if(Zp(i))return function TE(i,t){return new me(e=>{let n;return jn(e,t,()=>{n=i[Kp](),jn(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>C(n?.return)&&n.return()})}(i,t);if(Jp(i))return function kE(i,t){return sg(Qp(i),t)}(i,t)}throw qp(i)}(i,t):pi(i)}function Xd(...i){const t=Eo(i),e=function SE(i,t){return"number"==typeof Gd(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?pi(n[0]):_s(e)(Lt(n,t)):Cn}function Yd(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new j({next:()=>{n.unsubscribe(),i()}});return pi(t(...e)).subscribe(n)}function pt(i){for(let t in i)if(i[t]===pt)return t;throw Error("Could not find renamed property on target object.")}function qd(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function vt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(vt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Kd(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const AE=pt({__forward_ref__:pt});function ht(i){return i.__forward_ref__=ht,i.toString=function(){return vt(this())},i}function Re(i){return Zd(i)?i():i}function Zd(i){return"function"==typeof i&&i.hasOwnProperty(AE)&&i.__forward_ref__===ht}function Qd(i){return i&&!!i.\u0275providers}class J extends Error{constructor(t,e){super(function il(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Ve(i){return"string"==typeof i?i:null==i?"":String(i)}function nl(i,t){throw new J(-201,!1)}function Xi(i,t){null==i&&function ct(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function ye(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mt(i){return{providers:i.providers||[],imports:i.imports||[]}}function rl(i){return ag(i,sl)||ag(i,cg)}function ag(i,t){return i.hasOwnProperty(t)?i[t]:null}function lg(i){return i&&(i.hasOwnProperty(Jd)||i.hasOwnProperty(jE))?i[Jd]:null}const sl=pt({\u0275prov:pt}),Jd=pt({\u0275inj:pt}),cg=pt({ngInjectableDef:pt}),jE=pt({ngInjectorDef:pt});var Pe=(()=>((Pe=Pe||{})[Pe.Default=0]="Default",Pe[Pe.Host=1]="Host",Pe[Pe.Self=2]="Self",Pe[Pe.SkipSelf=4]="SkipSelf",Pe[Pe.Optional=8]="Optional",Pe))();let eu;function Yi(i){const t=eu;return eu=i,t}function dg(i,t,e){const n=rl(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Pe.Optional?null:void 0!==t?t:void nl(vt(i))}const bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mo={},tu="__NG_DI_FLAG__",ol="ngTempTokenPath",zE=/\n/gm,ug="__source";let To;function vs(i){const t=To;return To=i,t}function WE(i,t=Pe.Default){if(void 0===To)throw new J(-203,!1);return null===To?dg(i,void 0,t):To.get(i,t&Pe.Optional?null:void 0,t)}function re(i,t=Pe.Default){return(function UE(){return eu}()||WE)(Re(i),t)}function Xe(i,t=Pe.Default){return re(i,al(t))}function al(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function iu(i){const t=[];for(let e=0;e<i.length;e++){const n=Re(i[e]);if(Array.isArray(n)){if(0===n.length)throw new J(900,!1);let r,s=Pe.Default;for(let o=0;o<n.length;o++){const c=n[o],m=GE(c);"number"==typeof m?-1===m?r=c.token:s|=m:r=c}t.push(re(r,s))}else t.push(re(n))}return t}function ko(i,t){return i[tu]=t,i.prototype[tu]=t,i}function GE(i){return i[tu]}function ur(i){return{toString:i}.toString()}var dn=(()=>((dn=dn||{})[dn.OnPush=0]="OnPush",dn[dn.Default=1]="Default",dn))(),un=(()=>{return(i=un||(un={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",un;var i})();const Un={},rt=[],ll=pt({\u0275cmp:pt}),nu=pt({\u0275dir:pt}),ru=pt({\u0275pipe:pt}),fg=pt({\u0275mod:pt}),Hn=pt({\u0275fac:pt}),Io=pt({__NG_ELEMENT_ID__:pt});let qE=0;function Oi(i){return ur(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===dn.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||rt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||un.Emulated,id:"c"+qE++,styles:i.styles||rt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=i.dependencies,o=i.features;return r.inputs=gg(i.inputs,n),r.outputs=gg(i.outputs),o&&o.forEach(c=>c(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(mg).filter(pg):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(gi).filter(pg):null,r})}function mg(i){return dt(i)||ni(i)}function pg(i){return null!==i}function gt(i){return ur(()=>({type:i.type,bootstrap:i.bootstrap||rt,declarations:i.declarations||rt,imports:i.imports||rt,exports:i.exports||rt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function gg(i,t){if(null==i)return Un;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const Ce=Oi;function dt(i){return i[ll]||null}function ni(i){return i[nu]||null}function gi(i){return i[ru]||null}function Ri(i,t){const e=i[fg]||null;if(!e&&!0===t)throw new Error(`Type ${vt(i)} does not have '\u0275mod' property.`);return e}function Pi(i){return Array.isArray(i)&&"object"==typeof i[1]}function fn(i){return Array.isArray(i)&&!0===i[1]}function au(i){return 0!=(4&i.flags)}function Po(i){return i.componentOffset>-1}function fl(i){return 1==(1&i.flags)}function mn(i){return null!==i.template}function QE(i){return 0!=(256&i[2])}function Or(i,t){return i.hasOwnProperty(Hn)?i[Hn]:null}class tM{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Fi(){return Cg}function Cg(i){return i.type.prototype.ngOnChanges&&(i.setInput=nM),iM}function iM(){const i=Sg(this),t=i?.current;if(t){const e=i.previous;if(e===Un)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function nM(i,t,e,n){const r=this.declaredInputs[e],s=Sg(i)||function rM(i,t){return i[xg]=t}(i,{previous:Un,current:null}),o=s.current||(s.current={}),c=s.previous,m=c[r];o[r]=new tM(m&&m.currentValue,t,c===Un),i[n]=t}Fi.ngInherit=!0;const xg="__ngSimpleChanges__";function Sg(i){return i[xg]||null}function Kt(i){for(;Array.isArray(i);)i=i[0];return i}function ml(i,t){return Kt(t[i])}function Li(i,t){return Kt(t[i.index])}function Mg(i,t){return i.data[t]}function Ni(i,t){const e=t[i];return Pi(e)?e:e[0]}function pl(i){return 64==(64&i[2])}function hr(i,t){return null==t?null:i[t]}function Tg(i){i[18]=0}function cu(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const je={lFrame:Bg(null),bindingsEnabled:!0};function Ig(){return je.bindingsEnabled}function le(){return je.lFrame.lView}function Je(){return je.lFrame.tView}function Zt(){let i=Ag();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ag(){return je.lFrame.currentTNode}function Sn(i,t){const e=je.lFrame;e.currentTNode=i,e.isParent=t}function du(){return je.lFrame.isParent}function uu(){je.lFrame.isParent=!1}function Ds(){return je.lFrame.bindingIndex++}function Wn(i){const t=je.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function bM(i,t){const e=je.lFrame;e.bindingIndex=e.bindingRootIndex=i,hu(t)}function hu(i){je.lFrame.currentDirectiveIndex=i}function Fg(){return je.lFrame.currentQueryIndex}function mu(i){je.lFrame.currentQueryIndex=i}function wM(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Lg(i,t,e){if(e&Pe.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Pe.Host||(r=wM(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=je.lFrame=Ng();return n.currentTNode=t,n.lView=i,!0}function pu(i){const t=Ng(),e=i[1];je.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ng(){const i=je.lFrame,t=null===i?null:i.child;return null===t?Bg(i):t}function Bg(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Vg(){const i=je.lFrame;return je.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const jg=Vg;function gu(){const i=Vg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function bi(){return je.lFrame.selectedIndex}function Rr(i){je.lFrame.selectedIndex=i}function Et(){const i=je.lFrame;return Mg(i.tView,i.selectedIndex)}function gl(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:m,ngAfterViewChecked:b,ngOnDestroy:x}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),c&&((i.contentHooks||(i.contentHooks=[])).push(e,c),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,c)),m&&(i.viewHooks||(i.viewHooks=[])).push(-e,m),b&&((i.viewHooks||(i.viewHooks=[])).push(e,b),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,b)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(e,x)}}function _l(i,t,e){zg(i,t,3,e)}function vl(i,t,e,n){(3&i[2])===e&&zg(i,t,e,n)}function _u(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function zg(i,t,e,n){const s=n??-1,o=t.length-1;let c=0;for(let m=void 0!==n?65535&i[18]:0;m<o;m++)if("number"==typeof t[m+1]){if(c=t[m],null!=n&&c>=n)break}else t[m]<0&&(i[18]+=65536),(c<s||-1==s)&&(TM(i,e,t,m),i[18]=(4294901760&i[18])+m+2),m++}function TM(i,t,e,n){const r=e[n]<0,s=e[n+1],c=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class Lo{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function bu(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],c=e[n++];i.setAttribute(t,o,c,s)}else{const s=r,o=e[++n];Wg(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function $g(i){return 3===i||4===i||6===i}function Wg(i){return 64===i.charCodeAt(0)}function No(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Gg(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Gg(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const c=i[s++];if("number"==typeof c){if(c===t){o=-1;break}if(c>t){o=s-1;break}}}for(;s<i.length;){const c=i[s];if("number"==typeof c)break;if(c===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Xg(i){return-1!==i}function bl(i){return 32767&i}function yl(i,t){let e=function OM(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let yu=!0;function wl(i){const t=yu;return yu=i,t}let RM=0;const Dn={};function Cl(i,t){const e=Kg(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,wu(n.data,i),wu(t,null),wu(n.blueprint,null));const r=Cu(i,t),s=i.injectorIndex;if(Xg(r)){const o=bl(r),c=yl(r,t),m=c[1].data;for(let b=0;b<8;b++)t[s+b]=c[o+b]|m[o+b]}return t[s+8]=r,s}function wu(i,t){i.push(0,0,0,0,0,0,0,0,t)}function Kg(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Cu(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=n_(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function xu(i,t,e){!function PM(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Io)&&(n=e[Io]),null==n&&(n=e[Io]=RM++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function Zg(i,t,e){if(e&Pe.Optional||void 0!==i)return i;nl()}function Qg(i,t,e,n){if(e&Pe.Optional&&void 0===n&&(n=null),!(e&(Pe.Self|Pe.Host))){const r=i[9],s=Yi(void 0);try{return r?r.get(t,n,e&Pe.Optional):dg(t,n,e&Pe.Optional)}finally{Yi(s)}}return Zg(n,0,e)}function Jg(i,t,e,n=Pe.Default,r){if(null!==i){if(1024&t[2]){const o=function VM(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const c=e_(s,o,e,n|Pe.Self,Dn);if(c!==Dn)return c;let m=s.parent;if(!m){const b=o[21];if(b){const x=b.get(e,Dn,n);if(x!==Dn)return x}m=n_(o),o=o[15]}s=m}return r}(i,t,e,n,Dn);if(o!==Dn)return o}const s=e_(i,t,e,n,Dn);if(s!==Dn)return s}return Qg(t,e,n,r)}function e_(i,t,e,n,r){const s=function NM(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Io)?i[Io]:void 0;return"number"==typeof t?t>=0?255&t:BM:t}(e);if("function"==typeof s){if(!Lg(t,i,n))return n&Pe.Host?Zg(r,0,n):Qg(t,e,n,r);try{const o=s(n);if(null!=o||n&Pe.Optional)return o;nl()}finally{jg()}}else if("number"==typeof s){let o=null,c=Kg(i,t),m=-1,b=n&Pe.Host?t[16][6]:null;for((-1===c||n&Pe.SkipSelf)&&(m=-1===c?Cu(i,t):t[c+8],-1!==m&&i_(n,!1)?(o=t[1],c=bl(m),t=yl(m,t)):c=-1);-1!==c;){const x=t[1];if(t_(s,c,x.data)){const E=LM(c,t,e,o,n,b);if(E!==Dn)return E}m=t[c+8],-1!==m&&i_(n,t[1].data[c+8]===b)&&t_(s,c,t)?(o=x,c=bl(m),t=yl(m,t)):c=-1}}return r}function LM(i,t,e,n,r,s){const o=t[1],c=o.data[i+8],x=xl(c,o,e,null==n?Po(c)&&yu:n!=o&&0!=(3&c.type),r&Pe.Host&&s===c);return null!==x?Pr(t,o,x,c):Dn}function xl(i,t,e,n,r){const s=i.providerIndexes,o=t.data,c=1048575&s,m=i.directiveStart,x=s>>20,k=r?c+x:i.directiveEnd;for(let O=n?c:c+x;O<k;O++){const L=o[O];if(O<m&&e===L||O>=m&&L.type===e)return O}if(r){const O=o[m];if(O&&mn(O)&&O.type===e)return m}return null}function Pr(i,t,e,n){let r=i[e];const s=t.data;if(function kM(i){return i instanceof Lo}(r)){const o=r;o.resolving&&function OE(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new J(-200,`Circular dependency in DI detected for ${i}${e}`)}(function lt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ve(i)}(s[e]));const c=wl(o.canSeeViewProviders);o.resolving=!0;const m=o.injectImpl?Yi(o.injectImpl):null;Lg(i,n,Pe.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function MM(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=Cg(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==m&&Yi(m),wl(c),o.resolving=!1,jg()}}return r}function t_(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function i_(i,t){return!(i&Pe.Self||i&Pe.Host&&t)}class Ms{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Jg(this._tNode,this._lView,t,al(n),e)}}function BM(){return new Ms(Zt(),le())}function Su(i){return Zd(i)?()=>{const t=Su(Re(i));return t&&t()}:Or(i)}function n_(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}const ks="__parameters__";function As(i,t,e){return ur(()=>{const n=function Du(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return c.annotation=o,c;function c(m,b,x){const E=m.hasOwnProperty(ks)?m[ks]:Object.defineProperty(m,ks,{value:[]})[ks];for(;E.length<=x;)E.push(null);return(E[x]=E[x]||[]).push(o),m}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ue{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ye({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fr(i,t){i.forEach(e=>Array.isArray(e)?Fr(e,t):t(e))}function s_(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Dl(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function jo(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Bi(i,t,e){let n=Os(i,t);return n>=0?i[1|n]=e:(n=~n,function zM(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function Mu(i,t){const e=Os(i,t);if(e>=0)return i[1|e]}function Os(i,t){return function o_(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Ml=ko(As("Inject",i=>({token:i})),-1),Gn=ko(As("Optional"),8),Rs=ko(As("SkipSelf"),4);var Di=(()=>((Di=Di||{})[Di.Important=1]="Important",Di[Di.DashCase=2]="DashCase",Di))();const Ou=new Map;let uT=0;const Pu="__ngContext__";function oi(i,t){Pi(t)?(i[Pu]=t[20],function fT(i){Ou.set(i[20],i)}(t)):i[Pu]=t}function Lu(i,t){return undefined(i,t)}function $o(i){const t=i[3];return fn(t)?t[3]:t}function Nu(i){return E_(i[13])}function Bu(i){return E_(i[4])}function E_(i){for(;null!==i&&!fn(i);)i=i[4];return i}function Fs(i,t,e,n,r){if(null!=n){let s,o=!1;fn(n)?s=n:Pi(n)&&(o=!0,n=n[0]);const c=Kt(n);0===i&&null!==e?null==r?O_(t,e,c):Lr(t,e,c,r||null,!0):1===i&&null!==e?Lr(t,e,c,r||null,!0):2===i?function Wu(i,t,e){const n=Il(i,t);n&&function RT(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,c,o):3===i&&t.destroyNode(c),null!=s&&function LT(i,t,e,n,r){const s=e[7];s!==Kt(e)&&Fs(t,i,n,s,r);for(let c=10;c<e.length;c++){const m=e[c];Wo(m[1],m,i,t,n,s)}}(t,i,s,e,r)}}function ju(i,t,e){return i.createElement(t,e)}function T_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,cu(r,-1)),e.splice(n,1)}function Uu(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&T_(r,n),t>0&&(i[e-1][4]=n[4]);const s=Dl(i,10+t);!function DT(i,t){Wo(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function k_(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Wo(i,t,e,3,null,null),function TT(i){let t=i[13];if(!t)return Hu(i[1],i);for(;t;){let e=null;if(Pi(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Pi(t)&&Hu(t[1],t),t=t[3];null===t&&(t=i),Pi(t)&&Hu(t[1],t),e=t&&t[4]}t=e}}(t)}}function Hu(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function OT(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Lo)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const c=r[s[o]],m=s[o+1];try{m.call(c)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function AT(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&fn(t[3])){e!==t[3]&&T_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function mT(i){Ou.delete(i[20])}(t)}}function I_(i,t,e){return function A_(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===un.None||s===un.Emulated)return null}return Li(n,e)}}(i,t.parent,e)}function Lr(i,t,e,n,r){i.insertBefore(t,e,n,r)}function O_(i,t,e){i.appendChild(t,e)}function R_(i,t,e,n,r){null!==n?Lr(i,t,e,n,r):O_(i,t,e)}function Il(i,t){return i.parentNode(t)}function P_(i,t,e){return L_(i,t,e)}let Yu,L_=function F_(i,t,e){return 40&i.type?Li(i,e):null};function Al(i,t,e,n){const r=I_(i,n,t),s=t[11],c=P_(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let m=0;m<e.length;m++)R_(s,r,e[m],c,!1);else R_(s,r,e,c,!1)}function Ol(i,t){if(null!==t){const e=t.type;if(3&e)return Li(t,i);if(4&e)return $u(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Ol(i,n);{const r=i[t.index];return fn(r)?$u(-1,r):Kt(r)}}if(32&e)return Lu(t,i)()||Kt(i[t.index]);{const n=B_(i,t);return null!==n?Array.isArray(n)?n[0]:Ol($o(i[16]),n):Ol(i,t.next)}}return null}function B_(i,t){return null!==t?i[16][6].projection[t.projection]:null}function $u(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Ol(n,r)}return t[7]}function Gu(i,t,e,n,r,s,o){for(;null!=e;){const c=n[e.index],m=e.type;if(o&&0===t&&(c&&oi(Kt(c),n),e.flags|=2),32!=(32&e.flags))if(8&m)Gu(i,t,e.child,n,r,s,!1),Fs(t,i,r,c,s);else if(32&m){const b=Lu(e,n);let x;for(;x=b();)Fs(t,i,r,x,s);Fs(t,i,r,c,s)}else 16&m?V_(i,t,n,e,r,s):Fs(t,i,r,c,s);e=o?e.projectionNext:e.next}}function Wo(i,t,e,n,r,s){Gu(e,n,i.firstChild,t,r,s,!1)}function V_(i,t,e,n,r,s){const o=e[16],m=o[6].projection[n.projection];if(Array.isArray(m))for(let b=0;b<m.length;b++)Fs(t,i,r,m[b],s);else Gu(i,t,m,o[3],r,s,!0)}function j_(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function U_(i,t,e){const{mergedAttrs:n,classes:r,styles:s}=e;null!==n&&bu(i,t,n),null!==r&&j_(i,t,r),null!==s&&function BT(i,t,e){i.setAttribute(t,"style",e)}(i,t,s)}class Br{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Vi(i){return i instanceof Br?i.changingThisBreaksApplicationSecurity:i}const Nl=new ue("ENVIRONMENT_INITIALIZER"),iv=new ue("INJECTOR",-1),nv=new ue("INJECTOR_DEF_TYPES");class rv{get(t,e=Mo){if(e===Mo){const n=new Error(`NullInjectorError: No provider for ${vt(t)}!`);throw n.name="NullInjectorError",n}return e}}function pk(...i){return{\u0275providers:sv(0,i),\u0275fromNgModule:!0}}function sv(i,...t){const e=[],n=new Set;let r;return Fr(t,s=>{const o=s;Ju(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&ov(r,e),e}function ov(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];eh(r,s=>{t.push(s)})}}function Ju(i,t,e,n){if(!(i=Re(i)))return!1;let r=null,s=lg(i);const o=!s&&dt(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const m=i.ngModule;if(s=lg(m),!s)return!1;r=m}const c=n.has(r);if(o){if(c)return!1;if(n.add(r),o.dependencies){const m="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const b of m)Ju(b,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!c){let b;n.add(r);try{Fr(s.imports,x=>{Ju(x,t,e,n)&&(b||(b=[]),b.push(x))})}finally{}void 0!==b&&ov(b,t)}if(!c){const b=Or(r)||(()=>new r);t.push({provide:r,useFactory:b,deps:rt},{provide:nv,useValue:r,multi:!0},{provide:Nl,useValue:()=>re(r),multi:!0})}const m=s.providers;null==m||c||eh(m,x=>{t.push(x)})}}return r!==i&&void 0!==i.providers}function eh(i,t){for(let e of i)Qd(e)&&(e=e.\u0275providers),Array.isArray(e)?eh(e,t):t(e)}const gk=pt({provide:String,useValue:pt});function th(i){return null!==i&&"object"==typeof i&&gk in i}function Vr(i){return"function"==typeof i}const ih=new ue("Set Injector scope."),Bl={},vk={};let nh;function Vl(){return void 0===nh&&(nh=new rv),nh}class Yn{}class cv extends Yn{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sh(t,o=>this.processProvider(o)),this.records.set(iv,Ls(void 0,this)),r.has("environment")&&this.records.set(Yn,Ls(void 0,this));const s=this.records.get(ih);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nv.multi,rt,Pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=vs(this),n=Yi(void 0);try{return t()}finally{vs(e),Yi(n)}}get(t,e=Mo,n=Pe.Default){this.assertNotDestroyed(),n=al(n);const r=vs(this),s=Yi(void 0);try{if(!(n&Pe.SkipSelf)){let c=this.records.get(t);if(void 0===c){const m=function xk(i){return"function"==typeof i||"object"==typeof i&&i instanceof ue}(t)&&rl(t);c=m&&this.injectableDefInScope(m)?Ls(rh(t),Bl):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(n&Pe.Self?Vl():this.parent).get(t,e=n&Pe.Optional&&e===Mo?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[ol]=o[ol]||[]).unshift(vt(t)),r)throw o;return function XE(i,t,e,n){const r=i[ol];throw t[ug]&&r.unshift(t[ug]),i.message=function YE(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=vt(t);if(Array.isArray(t))r=t.map(vt).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let c=t[o];s.push(o+":"+("string"==typeof c?JSON.stringify(c):vt(c)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(zE,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[ol]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Yi(s),vs(r)}}resolveInjectorInitializers(){const t=vs(this),e=Yi(void 0);try{const n=this.get(Nl.multi,rt,Pe.Self);for(const r of n)r()}finally{vs(t),Yi(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(vt(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(t){let e=Vr(t=Re(t))?t:Re(t&&t.provide);const n=function yk(i){return th(i)?Ls(void 0,i.useValue):Ls(dv(i),Bl)}(t);if(Vr(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Ls(void 0,Bl,!0),r.factory=()=>iu(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Bl&&(e.value=vk,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Ck(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Re(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function rh(i){const t=rl(i),e=null!==t?t.factory:Or(i);if(null!==e)return e;if(i instanceof ue)throw new J(204,!1);if(i instanceof Function)return function bk(i){const t=i.length;if(t>0)throw jo(t,"?"),new J(204,!1);const e=function BE(i){const t=i&&(i[sl]||i[cg]);if(t){const e=function VE(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new J(204,!1)}function dv(i,t,e){let n;if(Vr(i)){const r=Re(i);return Or(r)||rh(r)}if(th(i))n=()=>Re(i.useValue);else if(function lv(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...iu(i.deps||[]));else if(function av(i){return!(!i||!i.useExisting)}(i))n=()=>re(Re(i.useExisting));else{const r=Re(i&&(i.useClass||i.provide));if(!function wk(i){return!!i.deps}(i))return Or(r)||rh(r);n=()=>new r(...iu(i.deps))}return n}function Ls(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function sh(i,t){for(const e of i)Array.isArray(e)?sh(e,t):e&&Qd(e)?sh(e.\u0275providers,t):t(e)}class Sk{}class uv{}class Ek{resolveComponentFactory(t){throw function Dk(i){const t=Error(`No component factory found for ${vt(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let Ns=(()=>{class i{}return i.NULL=new Ek,i})();function Mk(){return Bs(Zt(),le())}function Bs(i,t){return new ut(Li(i,t))}let ut=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=Mk,i})();function Tk(i){return i instanceof ut?i.nativeElement:i}class Yo{}let Ik=(()=>{class i{}return i.\u0275prov=ye({token:i,providedIn:"root",factory:()=>null}),i})();class jr{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ak=new jr("15.1.1"),oh={};function lh(i){return i.ngOriginalError}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&lh(t);for(;e&&lh(e);)e=lh(e);return e||null}}function Kn(i){return i instanceof Function?i():i}function mv(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const pv="ng-template";function Hk(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==mv(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function gv(i){return 4===i.type&&i.value!==pv}function zk(i,t,e){return t===(4!==i.type||e?i.value:pv)}function $k(i,t,e){let n=4;const r=i.attrs||[],s=function Xk(i){for(let t=0;t<i.length;t++)if($g(i[t]))return t;return i.length}(r);let o=!1;for(let c=0;c<t.length;c++){const m=t[c];if("number"!=typeof m){if(!o)if(4&n){if(n=2|1&n,""!==m&&!zk(i,m,e)||""===m&&1===t.length){if(pn(n))return!1;o=!0}}else{const b=8&n?m:t[++c];if(8&n&&null!==i.attrs){if(!Hk(i.attrs,b,e)){if(pn(n))return!1;o=!0}continue}const E=Wk(8&n?"class":m,r,gv(i),e);if(-1===E){if(pn(n))return!1;o=!0;continue}if(""!==b){let k;k=E>s?"":r[E+1].toLowerCase();const O=8&n?k:null;if(O&&-1!==mv(O,b,0)||2&n&&b!==k){if(pn(n))return!1;o=!0}}}}else{if(!o&&!pn(n)&&!pn(m))return!1;if(o&&pn(m))continue;o=!1,n=m|1&n}}return pn(n)||o}function pn(i){return 0==(1&i)}function Wk(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let c=t[++r];for(;"string"==typeof c;)c=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Yk(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function _v(i,t,e=!1){for(let n=0;n<t.length;n++)if($k(i,t[n],e))return!0;return!1}function qk(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function vv(i,t){return i?":not("+t.trim()+")":t}function Kk(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const c=i[++e];r+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!pn(o)&&(t+=vv(s,r),r=""),n=o,s=s||!pn(n);e++}return""!==r&&(t+=vv(s,r)),t}const Ue={};function St(i){bv(Je(),le(),bi()+i,!1)}function bv(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&_l(t,s,e)}else{const s=i.preOrderHooks;null!==s&&vl(t,s,0,e)}Rr(e)}function xv(i,t=null,e=null,n){const r=Sv(i,t,e,n);return r.resolveInjectorInitializers(),r}function Sv(i,t=null,e=null,n,r=new Set){const s=[e||rt,pk(i)];return n=n||("object"==typeof i?void 0:vt(i)),new cv(s,t||Vl(),n||null,r)}let Mi=(()=>{class i{static create(e,n){if(Array.isArray(e))return xv({name:""},n,e,"");{const r=e.name??"";return xv({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=Mo,i.NULL=new rv,i.\u0275prov=ye({token:i,providedIn:"any",factory:()=>re(iv)}),i.__NG_ELEMENT_ID__=-1,i})();function W(i,t=Pe.Default){const e=le();return null===e?re(i,t):Jg(Zt(),e,Re(i),t)}function Ov(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const s=e[n+1];if(-1!==s){const o=i.data[s];mu(e[n]),o.contentQueries(2,t[s],s)}}}function Ul(i,t,e,n,r,s,o,c,m,b,x){const E=t.blueprint.slice();return E[0]=r,E[2]=76|n,(null!==x||i&&1024&i[2])&&(E[2]|=1024),Tg(E),E[3]=E[15]=i,E[8]=e,E[10]=o||i&&i[10],E[11]=c||i&&i[11],E[12]=m||i&&i[12]||null,E[9]=b||i&&i[9]||null,E[6]=s,E[20]=function hT(){return uT++}(),E[21]=x,E[16]=2==t.type?i[16]:E,E}function Us(i,t,e,n,r){let s=i.data[t];if(null===s)s=function fh(i,t,e,n,r){const s=Ag(),o=du(),m=i.data[t]=function CI(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=m),null!==s&&(o?null==s.child&&null!==m.parent&&(s.child=m):null===s.next&&(s.next=m)),m}(i,t,e,n,r),function vM(){return je.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Fo(){const i=je.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Sn(s,!0),s}function qo(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function mh(i,t,e){pu(t);try{const n=i.viewQuery;null!==n&&Sh(1,n,e);const r=i.template;null!==r&&Rv(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ov(i,t),i.staticViewQueries&&Sh(2,i.viewQuery,e);const s=i.components;null!==s&&function bI(i,t){for(let e=0;e<t.length;e++)UI(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,gu()}}function Hl(i,t,e,n){const r=t[2];if(128!=(128&r)){pu(t);try{Tg(t),function Rg(i){return je.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&Rv(i,t,e,2,n);const o=3==(3&r);if(o){const b=i.preOrderCheckHooks;null!==b&&_l(t,b,null)}else{const b=i.preOrderHooks;null!==b&&vl(t,b,0,null),_u(t,0)}if(function VI(i){for(let t=Nu(i);null!==t;t=Bu(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n];512&r[2]||cu(r[3],1),r[2]|=512}}}(t),function BI(i){for(let t=Nu(i);null!==t;t=Bu(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];pl(n)&&Hl(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&Ov(i,t),o){const b=i.contentCheckHooks;null!==b&&_l(t,b)}else{const b=i.contentHooks;null!==b&&vl(t,b,1),_u(t,1)}!function _I(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Rr(~r);else{const s=r,o=e[++n],c=e[++n];bM(o,s),c(2,t[s])}}}finally{Rr(-1)}}(i,t);const c=i.components;null!==c&&function vI(i,t){for(let e=0;e<t.length;e++)jI(i,t[e])}(t,c);const m=i.viewQuery;if(null!==m&&Sh(2,m,n),o){const b=i.viewCheckHooks;null!==b&&_l(t,b)}else{const b=i.viewHooks;null!==b&&vl(t,b,2),_u(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,cu(t[3],-1))}finally{gu()}}}function Rv(i,t,e,n,r){const s=bi(),o=2&n;try{Rr(-1),o&&t.length>22&&bv(i,t,22,!1),e(n,r)}finally{Rr(s)}}function ph(i,t,e){if(au(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function gh(i,t,e){Ig()&&(function TI(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;Po(e)&&function FI(i,t,e){const n=Li(t,i),r=Pv(e),s=i[10],o=zl(i,Ul(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||Cl(e,t),oi(n,t);const o=e.initialInputs;for(let c=r;c<s;c++){const m=i.data[c],b=Pr(t,i,c,e);oi(b,t),null!==o&&LI(0,c-r,b,m,0,o),mn(m)&&(Ni(e.index,t)[8]=Pr(t,i,c,e))}}(i,t,e,Li(e,t)),64==(64&e.flags)&&jv(i,t,e))}function _h(i,t,e=Li){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],c=-1===o?e(t,i):i[o];i[r++]=c}}}function Pv(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=vh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function vh(i,t,e,n,r,s,o,c,m,b){const x=22+n,E=x+r,k=function yI(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Ue);return e}(x,E),O="function"==typeof b?b():b;return k[1]={type:i,blueprint:k,template:e,queries:null,viewQuery:c,declTNode:t,data:k.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:m,consts:O,incompleteFirstPass:!1}}function Fv(i,t,e,n){const r=Hv(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&zv(i).push(n,r.length-1))}function Lv(i,t,e,n){for(let r in i)if(i.hasOwnProperty(r)){e=null===e?{}:e;const s=i[r];null===n?Nv(e,t,r,s):n.hasOwnProperty(r)&&Nv(e,t,n[r],s)}return e}function Nv(i,t,e,n){i.hasOwnProperty(e)?i[e].push(t,n):i[e]=[t,n]}function Bv(i,t){const e=Ni(t,i);16&e[2]||(e[2]|=32)}function bh(i,t,e,n){let r=!1;if(Ig()){const s=null===n?null:{"":-1},o=function II(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(_v(t,o.selectors,!1))if(n||(n=[]),mn(o))if(null!==o.findHostDirectiveDefs){const c=[];r=r||new Map,o.findHostDirectiveDefs(o,c,r),n.unshift(...c,o),yh(i,t,c.length)}else n.unshift(o),yh(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,e);let c,m;null===o?c=m=null:[c,m]=o,null!==c&&(r=!0,Vv(i,t,e,c,s,m)),s&&function AI(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new J(-301,!1);n.push(t[r],s)}}}(e,n,s)}return e.mergedAttrs=No(e.mergedAttrs,e.attrs),r}function Vv(i,t,e,n,r,s){for(let b=0;b<n.length;b++)xu(Cl(e,t),i,n[b].type);!function RI(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let b=0;b<n.length;b++){const x=n[b];x.providersResolver&&x.providersResolver(x)}let o=!1,c=!1,m=qo(i,t,n.length,null);for(let b=0;b<n.length;b++){const x=n[b];e.mergedAttrs=No(e.mergedAttrs,x.hostAttrs),PI(i,e,t,m,x),OI(m,x,r),null!==x.contentQueries&&(e.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(e.flags|=64);const E=x.type.prototype;!o&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),o=!0),!c&&(E.ngOnChanges||E.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),c=!0),m++}!function xI(i,t,e){const r=t.directiveEnd,s=i.data,o=t.attrs,c=[];let m=null,b=null;for(let x=t.directiveStart;x<r;x++){const E=s[x],k=e?e.get(E):null,L=k?k.outputs:null;m=Lv(E.inputs,x,m,k?k.inputs:null),b=Lv(E.outputs,x,b,L);const U=null===m||null===o||gv(t)?null:NI(m,x,o);c.push(U)}null!==m&&(m.hasOwnProperty("class")&&(t.flags|=8),m.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=m,t.outputs=b}(i,e,s)}function jv(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function yM(){return je.lFrame.currentDirectiveIndex}();try{Rr(s);for(let c=n;c<r;c++){const m=i.data[c],b=t[c];hu(c),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&kI(m,b)}}finally{Rr(-1),hu(o)}}function kI(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function yh(i,t,e){t.componentOffset=e,(i.components||(i.components=[])).push(t.index)}function OI(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;mn(t)&&(e[""]=i)}}function PI(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=Or(r.type)),o=new Lo(s,mn(r),W);i.blueprint[n]=o,e[n]=o,function EI(i,t,e,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const c=~t.index;(function MI(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=c&&o.push(c),o.push(e,n,s)}}(i,t,n,qo(i,e,r.hostVars,Ue),r)}function Mn(i,t,e,n,r,s){const o=Li(i,t);!function wh(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const c=null==o?Ve(s):o(s,n||"",r);i.setAttribute(t,r,c,e)}}(t[11],o,s,i.value,e,n,r)}function LI(i,t,e,n,r,s){const o=s[t];if(null!==o){const c=n.setInput;for(let m=0;m<o.length;){const b=o[m++],x=o[m++],E=o[m++];null!==c?n.setInput(e,E,b,x):e[x]=E}}}function NI(i,t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let c=0;c<o.length;c+=2)if(o[c]===t){n.push(s,o[c+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function Uv(i,t,e,n){return[i,!0,!1,t,null,0,n,e,null,null]}function jI(i,t){const e=Ni(t,i);if(pl(e)){const n=e[1];48&e[2]?Hl(n,e,n.template,e[8]):e[5]>0&&Ch(e)}}function Ch(i){for(let n=Nu(i);null!==n;n=Bu(n))for(let r=10;r<n.length;r++){const s=n[r];if(pl(s))if(512&s[2]){const o=s[1];Hl(o,s,o.template,s[8])}else s[5]>0&&Ch(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ni(e[n],i);pl(r)&&r[5]>0&&Ch(r)}}function UI(i,t){const e=Ni(t,i),n=e[1];(function HI(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),mh(n,e,e[8])}function zl(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function xh(i){for(;i;){i[2]|=32;const t=$o(i);if(QE(i)&&!t)return i;i=t}return null}function $l(i,t,e,n=!0){const r=t[10];r.begin&&r.begin();try{Hl(i,t,i.template,e)}catch(o){throw n&&Wv(t,o),o}finally{r.end&&r.end()}}function Sh(i,t,e){mu(0),t(i,e)}function Hv(i){return i[7]||(i[7]=[])}function zv(i){return i.cleanup||(i.cleanup=[])}function Wv(i,t){const e=i[9],n=e?e.get(fr,null):null;n&&n.handleError(t)}function Dh(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],c=e[s++],m=t[o],b=i.data[o];null!==b.setInput?b.setInput(m,r,n,c):m[c]=r}}function Wl(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const c=t[o];"number"==typeof c?s=c:1==s?r=Kd(r,c):2==s&&(n=Kd(n,c+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function Gl(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(Kt(s)),fn(s))for(let c=10;c<s.length;c++){const m=s[c],b=m[1].firstChild;null!==b&&Gl(m[1],m,b,n)}const o=e.type;if(8&o)Gl(i,t,e.child,n);else if(32&o){const c=Lu(e,t);let m;for(;m=c();)n.push(m)}else if(16&o){const c=B_(t,e);if(Array.isArray(c))n.push(...c);else{const m=$o(t[16]);Gl(m[1],m,c,n,!0)}}e=r?e.projectionNext:e.next}return n}class Ko{get rootNodes(){const t=this._lView,e=t[1];return Gl(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(fn(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Uu(t,n),Dl(e,n))}this._attachedToViewContainer=!1}k_(this._lView[1],this._lView)}onDestroy(t){Fv(this._lView[1],this._lView,null,t)}markForCheck(){xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){$l(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function MT(i,t){Wo(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=t}}class zI extends Ko{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;$l(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class Gv extends Ns{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=dt(t);return new Zo(e,this.ngModule)}}function Xv(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class WI{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=al(n);const r=this.injector.get(t,oh,n);return r!==oh||e===oh?r:this.parentInjector.get(t,e,n)}}class Zo extends uv{get inputs(){return Xv(this.componentDef.inputs)}get outputs(){return Xv(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function Zk(i){return i.map(Kk).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof Yn?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new WI(t,s):t,c=o.get(Yo,null);if(null===c)throw new J(407,!1);const m=o.get(Ik,null),b=c.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",E=n?function wI(i,t,e){return i.selectRootElement(t,e===un.ShadowDom)}(b,n,this.componentDef.encapsulation):ju(b,x,function $I(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(x)),k=this.componentDef.onPush?288:272,O=vh(0,null,null,1,0,null,null,null,null,null),L=Ul(null,O,null,k,null,null,c,b,m,o,null);let U,G;pu(L);try{const te=this.componentDef;let fe,Q=null;te.findHostDirectiveDefs?(fe=[],Q=new Map,te.findHostDirectiveDefs(te,fe,Q),fe.push(te)):fe=[te];const Se=function XI(i,t){const e=i[1];return i[22]=t,Us(e,22,2,"#host",null)}(L,E),et=function YI(i,t,e,n,r,s,o,c){const m=r[1];!function qI(i,t,e,n){for(const r of i)t.mergedAttrs=No(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Wl(t,t.mergedAttrs,!0),null!==e&&U_(n,e,t))}(n,i,t,o);const b=s.createRenderer(t,e),x=Ul(r,Pv(e),null,e.onPush?32:16,r[i.index],i,s,b,c||null,null,null);return m.firstCreatePass&&yh(m,i,n.length-1),zl(r,x),r[i.index]=x}(Se,E,te,fe,L,c,b);G=Mg(O,22),E&&function ZI(i,t,e,n){if(n)bu(i,e,["ng-version",Ak.full]);else{const{attrs:r,classes:s}=function Qk(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!pn(r))break;r=s}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&bu(i,e,r),s&&s.length>0&&j_(i,e,s.join(" "))}}(b,te,E,n),void 0!==e&&function QI(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const s=e[r];n.push(null!=s?Array.from(s):null)}}(G,this.ngContentSelectors,e),U=function KI(i,t,e,n,r,s){const o=Zt(),c=r[1],m=Li(o,r);Vv(c,r,o,e,null,n);for(let x=0;x<e.length;x++)oi(Pr(r,c,o.directiveStart+x,o),r);jv(c,r,o),m&&oi(m,r);const b=Pr(r,c,o.directiveStart+o.componentOffset,o);if(i[8]=r[8]=b,null!==s)for(const x of s)x(b,t);return ph(c,o,i),b}(et,te,fe,Q,L,[JI]),mh(O,L,null)}finally{gu()}return new GI(this.componentType,U,Bs(G,L),L,G)}}class GI extends Sk{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new zI(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;Dh(s[1],s,r,t,e),Bv(s,this._tNode.index)}}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function JI(){const i=Zt();gl(le()[1],i)}function Ze(i){let t=function Yv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(mn(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new J(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=Eh(i.inputs),o.declaredInputs=Eh(i.declaredInputs),o.outputs=Eh(i.outputs);const c=r.hostBindings;c&&nA(i,c);const m=r.viewQuery,b=r.contentQueries;if(m&&tA(i,m),b&&iA(i,b),qd(i.inputs,r.inputs),qd(i.declaredInputs,r.declaredInputs),qd(i.outputs,r.outputs),mn(r)&&r.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const c=s[o];c&&c.ngInherit&&c(i),c===Ze&&(e=!1)}}t=Object.getPrototypeOf(t)}!function eA(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=No(r.hostAttrs,e=No(e,r.hostAttrs))}}(n)}function Eh(i){return i===Un?{}:i===rt?[]:i}function tA(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function iA(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function nA(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let Xl=null;function Ur(){if(!Xl){const i=bt.Symbol;if(i&&i.iterator)Xl=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Xl=n)}}}return Xl}function Yl(i){return!!function Mh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ur()in i)}function ai(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function yi(i,t,e,n){const r=le();return ai(r,Ds(),t)&&(Je(),Mn(Et(),r,i,t,e,n)),yi}function Pt(i,t,e,n,r,s,o,c){const m=le(),b=Je(),x=i+22,E=b.firstCreatePass?function fA(i,t,e,n,r,s,o,c,m){const b=t.consts,x=Us(t,i,4,o||null,hr(b,c));bh(t,e,x,hr(b,m)),gl(t,x);const E=x.tViews=vh(2,x,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,b);return null!==t.queries&&(t.queries.template(t,x),E.queries=t.queries.embeddedTView(x)),x}(x,b,m,t,e,n,r,s,o):b.data[x];Sn(E,!1);const k=m[11].createComment("");Al(b,m,k,E),oi(k,m),zl(m,m[x]=Uv(k,m,k,E)),fl(E)&&gh(b,m,E),null!=o&&_h(m,E,c)}function yt(i,t,e){const n=le();return ai(n,Ds(),t)&&function ji(i,t,e,n,r,s,o,c){const m=Li(t,e);let x,b=t.inputs;!c&&null!=b&&(x=b[n])?(Dh(i,e,x,n,r),Po(t)&&Bv(e,t.index)):3&t.type&&(n=function SI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(m,n,r))}(Je(),Et(),n,i,t,n[11],e,!1),yt}function Th(i,t,e,n,r){const o=r?"class":"style";Dh(i,e,t.inputs[o],o,n)}function wt(i,t,e,n){const r=le(),s=Je(),o=22+i,c=r[11],m=r[o]=ju(c,t,function EM(){return je.lFrame.currentNamespace}()),b=s.firstCreatePass?function pA(i,t,e,n,r,s,o){const c=t.consts,b=Us(t,i,2,r,hr(c,s));return bh(t,e,b,hr(c,o)),null!==b.attrs&&Wl(b,b.attrs,!1),null!==b.mergedAttrs&&Wl(b,b.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,b),b}(o,s,r,0,t,e,n):s.data[o];return Sn(b,!0),U_(c,m,b),32!=(32&b.flags)&&Al(s,r,m,b),0===function dM(){return je.lFrame.elementDepthCount}()&&oi(m,r),function uM(){je.lFrame.elementDepthCount++}(),fl(b)&&(gh(s,r,b),ph(s,b,r)),null!==n&&_h(r,b),wt}function Mt(){let i=Zt();du()?uu():(i=i.parent,Sn(i,!1));const t=i;!function hM(){je.lFrame.elementDepthCount--}();const e=Je();return e.firstCreatePass&&(gl(e,i),au(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function IM(i){return 0!=(8&i.flags)}(t)&&Th(e,t,le(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function AM(i){return 0!=(16&i.flags)}(t)&&Th(e,t,le(),t.stylesWithoutHost,!1),Mt}function Qt(i,t,e,n){return wt(i,t,e,n),Mt(),Qt}function Kl(i,t,e){const n=le(),r=Je(),s=i+22,o=r.firstCreatePass?function gA(i,t,e,n,r){const s=t.consts,o=hr(s,n),c=Us(t,i,8,"ng-container",o);return null!==o&&Wl(c,o,!0),bh(t,e,c,hr(s,r)),null!==t.queries&&t.queries.elementStart(t,c),c}(s,r,n,t,e):r.data[s];Sn(o,!0);const c=n[s]=n[11].createComment("");return Al(r,n,c,o),oi(c,n),fl(o)&&(gh(r,n,o),ph(r,o,n)),null!=e&&_h(n,o),Kl}function Zl(){let i=Zt();const t=Je();return du()?uu():(i=i.parent,Sn(i,!1)),t.firstCreatePass&&(gl(t,i),au(i)&&t.queries.elementEnd(i)),Zl}function Jo(i){return!!i&&"function"==typeof i.then}const kh=function lb(i){return!!i&&"function"==typeof i.subscribe};function Jt(i,t,e,n){const r=le(),s=Je(),o=Zt();return function db(i,t,e,n,r,s,o){const c=fl(n),b=i.firstCreatePass&&zv(i),x=t[8],E=Hv(t);let k=!0;if(3&n.type||o){const U=Li(n,t),G=o?o(U):U,te=E.length,fe=o?Se=>o(Kt(Se[n.index])):n.index;let Q=null;if(!o&&c&&(Q=function vA(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const c=t[7],m=r[s+2];return c.length>m?c[m]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,k=!1;else{s=hb(n,t,x,s,!1);const Se=e.listen(G,r,s);E.push(s,Se),b&&b.push(r,fe,te,te+1)}}else s=hb(n,t,x,s,!1);const O=n.outputs;let L;if(k&&null!==O&&(L=O[r])){const U=L.length;if(U)for(let G=0;G<U;G+=2){const et=t[L[G]][L[G+1]].subscribe(s),nt=E.length;E.push(s,et),b&&b.push(r,n.index,nt,-(nt+1))}}}(s,r,r[11],o,i,t,n),Jt}function ub(i,t,e,n){try{return!1!==e(n)}catch(r){return Wv(i,r),!1}}function hb(i,t,e,n,r){return function s(o){if(o===Function)return n;xh(i.componentOffset>-1?Ni(i.index,t):t);let m=ub(t,0,n,o),b=s.__ngNextListenerFn__;for(;b;)m=ub(t,0,b,o)&&m,b=b.__ngNextListenerFn__;return r&&!1===m&&(o.preventDefault(),o.returnValue=!1),m}}function Ti(i=1){return function CM(i){return(je.lFrame.contextLView=function xM(i,t){for(;i>0;)t=t[15],i--;return t}(i,je.lFrame.contextLView))[8]}(i)}function bA(i,t){let e=null;const n=function Gk(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?_v(i,s,!0):qk(n,s))return r}else e=r}return e}function mr(i){const t=le()[16][6];if(!t.projection){const n=t.projection=jo(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?bA(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function li(i,t=0,e){const n=le(),r=Je(),s=Us(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),uu(),32!=(32&s.flags)&&function FT(i,t,e){V_(t[11],0,t,e,I_(i,e,t),P_(e.parent||t[6],e,t))}(r,n,s)}function Ql(i,t){return i<<17|t<<2}function pr(i){return i>>17&32767}function Ah(i){return 2|i}function $r(i){return(131068&i)>>2}function Oh(i,t){return-131069&i|t<<2}function Rh(i){return 1|i}function Cb(i,t,e,n,r){const s=i[e+1],o=null===t;let c=n?pr(s):$r(s),m=!1;for(;0!==c&&(!1===m||o);){const x=i[c+1];DA(i[c],t)&&(m=!0,i[c+1]=n?Rh(x):Ah(x)),c=n?pr(x):$r(x)}m&&(i[e+1]=n?Ah(s):Rh(s))}function DA(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Os(i,t)>=0}const $t={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xb(i){return i.substring($t.key,$t.keyEnd)}function Sb(i,t){const e=$t.textEnd;return e===t?-1:(t=$t.keyEnd=function kA(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,$t.key=t,e),Zs(i,t,e))}function Zs(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Jl(i,t,e){return gn(i,t,e,!1),Jl}function ki(i,t){return gn(i,t,null,!0),ki}function kb(i){!function _n(i,t,e,n){const r=Je(),s=Wn(2);r.firstUpdatePass&&Ab(r,null,s,n);const o=le();if(e!==Ue&&ai(o,s,e)){const c=r.data[bi()];if(Fb(c,n)&&!Ib(r,s)){let m=n?c.classesWithoutHost:c.stylesWithoutHost;null!==m&&(e=Kd(m,e||"")),Th(r,c,o,e,n)}else!function BA(i,t,e,n,r,s,o,c){r===Ue&&(r=rt);let m=0,b=0,x=0<r.length?r[0]:null,E=0<s.length?s[0]:null;for(;null!==x||null!==E;){const k=m<r.length?r[m+1]:void 0,O=b<s.length?s[b+1]:void 0;let U,L=null;x===E?(m+=2,b+=2,k!==O&&(L=E,U=O)):null===E||null!==x&&x<E?(m+=2,L=x):(b+=2,L=E,U=O),null!==L&&Rb(i,t,e,n,L,U,o,c),x=m<r.length?r[m]:null,E=b<s.length?s[b]:null}}(r,c,o,o[11],o[s+1],o[s+1]=function NA(i,t,e){if(null==e||""===e)return rt;const n=[],r=Vi(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}(Bi,In,i,!0)}function In(i,t){for(let e=function MA(i){return function Eb(i){$t.key=0,$t.keyEnd=0,$t.value=0,$t.valueEnd=0,$t.textEnd=i.length}(i),Sb(i,Zs(i,0,$t.textEnd))}(t);e>=0;e=Sb(t,e))Bi(i,xb(t),!0)}function gn(i,t,e,n){const r=le(),s=Je(),o=Wn(2);s.firstUpdatePass&&Ab(s,i,o,n),t!==Ue&&ai(r,o,t)&&Rb(s,s.data[bi()],r,r[11],i,r[o+1]=function VA(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=vt(Vi(i)))),i}(t,e),n,o)}function Ib(i,t){return t>=i.expandoStartIndex}function Ab(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[bi()],o=Ib(i,e);Fb(s,n)&&null===t&&!o&&(t=!1),t=function RA(i,t,e,n){const r=function fu(i){const t=je.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=ea(e=Ph(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=Ph(r,i,t,e,n),null===s){let m=function PA(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==$r(n))return i[pr(n)]}(i,t,n);void 0!==m&&Array.isArray(m)&&(m=Ph(null,i,t,m[1],n),m=ea(m,t.attrs,n),function FA(i,t,e,n){i[pr(e?t.classBindings:t.styleBindings)]=n}(i,t,n,m))}else s=function LA(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=ea(n,i[s].hostAttrs,e);return ea(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function xA(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,c=pr(o),m=$r(o);i[n]=e;let x,b=!1;if(Array.isArray(e)?(x=e[1],(null===x||Os(e,x)>0)&&(b=!0)):x=e,r)if(0!==m){const k=pr(i[c+1]);i[n+1]=Ql(k,c),0!==k&&(i[k+1]=Oh(i[k+1],n)),i[c+1]=function wA(i,t){return 131071&i|t<<17}(i[c+1],n)}else i[n+1]=Ql(c,0),0!==c&&(i[c+1]=Oh(i[c+1],n)),c=n;else i[n+1]=Ql(m,0),0===c?c=n:i[m+1]=Oh(i[m+1],n),m=n;b&&(i[n+1]=Ah(i[n+1])),Cb(i,x,n,!0),Cb(i,x,n,!1),function SA(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Os(s,t)>=0&&(e[n+1]=Rh(e[n+1]))}(t,x,i,n,s),o=Ql(c,m),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function Ph(i,t,e,n,r){let s=null;const o=e.directiveEnd;let c=e.directiveStylingLast;for(-1===c?c=e.directiveStart:c++;c<o&&(s=t[c],n=ea(n,s.hostAttrs,r),s!==i);)c++;return null!==i&&(e.directiveStylingLast=c),n}function ea(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Bi(i,o,!!e||t[++s]))}return void 0===i?null:i}function Rb(i,t,e,n,r,s,o,c){if(!(3&t.type))return;const m=i.data,b=m[c+1],x=function CA(i){return 1==(1&i)}(b)?Pb(m,t,e,r,$r(b),o):void 0;ec(x)||(ec(s)||function yA(i){return 2==(2&i)}(b)&&(s=Pb(m,null,e,r,c,o)),function NT(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Di.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Di.Important),i.setStyle(e,n,r,s))}}(n,o,ml(bi(),e),r,s))}function Pb(i,t,e,n,r,s){const o=null===t;let c;for(;r>0;){const m=i[r],b=Array.isArray(m),x=b?m[1]:m,E=null===x;let k=e[r+1];k===Ue&&(k=E?rt:void 0);let O=E?Mu(k,n):x===n?k:void 0;if(b&&!ec(O)&&(O=Mu(m,n)),ec(O)&&(c=O,o))return c;const L=i[r+1];r=o?pr(L):$r(L)}if(null!==t){let m=s?t.residualClasses:t.residualStyles;null!=m&&(c=Mu(m,n))}return c}function ec(i){return void 0!==i}function Fb(i,t){return 0!=(i.flags&(t?8:16))}function ta(i,t=""){const e=le(),n=Je(),r=i+22,s=n.firstCreatePass?Us(n,r,1,t,null):n.data[r],o=e[r]=function Vu(i,t){return i.createText(t)}(e[11],t);Al(n,e,o,s),Sn(s,!1)}function Fh(i){return tc("",i,""),Fh}function tc(i,t,e){const n=le(),r=function zs(i,t,e,n){return ai(i,Ds(),e)?t+Ve(e)+n:Ue}(n,i,t,e);return r!==Ue&&function Zn(i,t,e){const n=ml(t,i);!function M_(i,t,e){i.setValue(t,e)}(i[11],n,e)}(n,bi(),r),tc}const Js="en-US";let ny=Js;function Bh(i,t,e,n,r){if(i=Re(i),Array.isArray(i))for(let s=0;s<i.length;s++)Bh(i[s],t,e,n,r);else{const s=Je(),o=le();let c=Vr(i)?i:Re(i.provide),m=dv(i);const b=Zt(),x=1048575&b.providerIndexes,E=b.directiveStart,k=b.providerIndexes>>20;if(Vr(i)||!i.multi){const O=new Lo(m,r,W),L=jh(c,t,r?x:x+k,E);-1===L?(xu(Cl(b,o),s,c),Vh(s,i,t.length),t.push(c),b.directiveStart++,b.directiveEnd++,r&&(b.providerIndexes+=1048576),e.push(O),o.push(O)):(e[L]=O,o[L]=O)}else{const O=jh(c,t,x+k,E),L=jh(c,t,x,x+k),G=L>=0&&e[L];if(r&&!G||!r&&!(O>=0&&e[O])){xu(Cl(b,o),s,c);const te=function rO(i,t,e,n,r){const s=new Lo(i,e,W);return s.multi=[],s.index=t,s.componentProviders=0,Ty(s,r,n&&!e),s}(r?nO:iO,e.length,r,n,m);!r&&G&&(e[L].providerFactory=te),Vh(s,i,t.length,0),t.push(c),b.directiveStart++,b.directiveEnd++,r&&(b.providerIndexes+=1048576),e.push(te),o.push(te)}else Vh(s,i,O>-1?O:L,Ty(e[r?L:O],m,!r&&n));!r&&n&&G&&e[L].componentProviders++}}}function Vh(i,t,e,n){const r=Vr(t),s=function _k(i){return!!i.useClass}(t);if(r||s){const m=(s?Re(t.useClass):t).prototype.ngOnDestroy;if(m){const b=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const x=b.indexOf(e);-1===x?b.push(e,[n,m]):b[x+1].push(n,m)}else b.push(e,m)}}}function Ty(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function jh(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function iO(i,t,e,n){return Uh(this.multi,[])}function nO(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,c=Pr(e,e[1],this.providerFactory.index,n);s=c.slice(0,o),Uh(r,s);for(let m=o;m<c.length;m++)s.push(c[m])}else s=[],Uh(r,s);return s}function Uh(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function ot(i,t=[]){return e=>{e.providersResolver=(n,r)=>function tO(i,t,e){const n=Je();if(n.firstCreatePass){const r=mn(i);Bh(e,n.data,n.blueprint,r,!0),Bh(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class eo{}class ky{}class Iy extends eo{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gv(this);const n=Ri(t);this._bootstrapComponents=Kn(n.bootstrap),this._r3Injector=Sv(t,e,[{provide:eo,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],vt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Hh extends ky{constructor(t){super(),this.moduleType=t}create(t){return new Iy(this.moduleType,t)}}class oO extends eo{constructor(t,e,n){super(),this.componentFactoryResolver=new Gv(this),this.instance=null;const r=new cv([...t,{provide:eo,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],e||Vl(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function oc(i,t,e=null){return new oO(i,t,e).injector}let aO=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const n=sv(0,e.type),r=n.length>0?oc([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ye({token:i,providedIn:"environment",factory:()=>new i(re(Yn))}),i})();function zh(i){i.getStandaloneInjector=t=>t.get(aO).getOrCreateStandaloneInjector(i)}function Wh(i){return t=>{setTimeout(i,void 0,t)}}const ft=class RO extends P{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const m=t;r=m.next?.bind(m),s=m.error?.bind(m),o=m.complete?.bind(m)}this.__isAsync&&(s=Wh(s),r&&(r=Wh(r)),o&&(o=Wh(o)));const c=super.subscribe({next:r,error:s,complete:o});return t instanceof Dt&&t.add(c),c}};function PO(){return this._results[Ur()]()}class ca{get changes(){return this._changes||(this._changes=new ft)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ur(),n=ca.prototype;n[e]||(n[e]=PO)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=function Ki(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function UM(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qn=(()=>{class i{}return i.__NG_ELEMENT_ID__=NO,i})();const FO=Qn,LO=class extends FO{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=Ul(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),mh(n,r,t),new Ko(r)}};function NO(){return ac(Zt(),le())}function ac(i,t){return 4&i.type?new LO(t,i,Bs(i,t)):null}let vn=(()=>{class i{}return i.__NG_ELEMENT_ID__=BO,i})();function BO(){return $y(Zt(),le())}const VO=vn,Hy=class extends VO{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Bs(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){const t=Cu(this._hostTNode,this._hostLView);if(Xg(t)){const e=yl(t,this._hostLView),n=bl(t);return new Ms(e[1].data[n+8],e)}return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=zy(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Vo(i){return"function"==typeof i}(t);let c;if(o)c=e;else{const E=e||{};c=E.index,n=E.injector,r=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const m=o?t:new Zo(dt(t)),b=n||this.parentInjector;if(!s&&null==m.ngModule){const k=(o?b:this.parentInjector).get(Yn,null);k&&(s=k)}const x=m.create(b,r,void 0,s);return this.insert(x.hostView,c),x}insert(t,e){const n=t._lView,r=n[1];if(function cM(i){return fn(i[3])}(n)){const x=this.indexOf(t);if(-1!==x)this.detach(x);else{const E=n[3],k=new Hy(E,E[6],E[3]);k.detach(k.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function kT(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],s_(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function IT(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const c=t[19];null!==c&&c.insertView(i),t[2]|=64}(r,n,o,s);const c=$u(s,o),m=n[11],b=Il(m,o[7]);return null!==b&&function ET(i,t,e,n,r,s){n[0]=r,n[6]=t,Wo(i,n,e,1,r,s)}(r,o[6],m,n,b,c),t.attachToViewContainerRef(),s_(Gh(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=zy(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Uu(this._lContainer,e);n&&(Dl(Gh(this._lContainer),e),k_(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Uu(this._lContainer,e);return n&&null!=Dl(Gh(this._lContainer),e)?new Ko(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function zy(i){return i[8]}function Gh(i){return i[8]||(i[8]=[])}function $y(i,t){let e;const n=t[i.index];if(fn(n))e=n;else{let r;if(8&i.type)r=Kt(n);else{const s=t[11];r=s.createComment("");const o=Li(i,t);Lr(s,Il(s,o),r,function PT(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=Uv(n,t,r,i),zl(t,e)}return new Hy(e,i,t)}class Xh{constructor(t){this.queryList=t,this.matches=null}clone(){return new Xh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yh{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Yh(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==qy(t,e).matches&&this.queries[e].setDirty()}}class Wy{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class qh{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new qh(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Kh{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Kh(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,jO(e,s)),this.matchTNodeWithReadOption(t,e,xl(e,t,s,!1,!1))}else n===Qn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,xl(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ut||r===vn||r===Qn&&4&e.type)this.addMatch(e.index,-2);else{const s=xl(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function jO(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function HO(i,t,e,n){return-1===e?function UO(i,t){return 11&i.type?Bs(i,t):4&i.type?ac(i,t):null}(t,i):-2===e?function zO(i,t,e){return e===ut?Bs(t,i):e===Qn?ac(t,i):e===vn?$y(t,i):void 0}(i,t,n):Pr(i,i[1],e,t)}function Gy(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,c=[];for(let m=0;m<o.length;m+=2){const b=o[m];c.push(b<0?null:HO(t,s[b],o[m+1],e.metadata.read))}r.matches=c}return r.matches}function Zh(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=Gy(i,t,r,e);for(let c=0;c<s.length;c+=2){const m=s[c];if(m>0)n.push(o[c/2]);else{const b=s[c+1],x=t[-m];for(let E=10;E<x.length;E++){const k=x[E];k[17]===k[3]&&Zh(k[1],k,b,n)}if(null!==x[9]){const E=x[9];for(let k=0;k<E.length;k++){const O=E[k];Zh(O[1],O,b,n)}}}}}return n}function ci(i){const t=le(),e=Je(),n=Fg();mu(n+1);const r=qy(e,n);if(i.dirty&&function lM(i){return 4==(4&i[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?Zh(e,t,n,[]):Gy(e,t,r,n);i.reset(s,Tk),i.notifyOnChanges()}return!0}return!1}function gr(i,t,e){const n=Je();n.firstCreatePass&&(Yy(n,new Wy(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),Xy(n,le(),t)}function Jn(i,t,e,n){const r=Je();if(r.firstCreatePass){const s=Zt();Yy(r,new Wy(t,e,n),s.index),function WO(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}Xy(r,le(),e)}function di(){return function $O(i,t){return i[19].queries[t].queryList}(le(),Fg())}function Xy(i,t,e){const n=new ca(4==(4&e));Fv(i,t,n,n.destroy),null===t[19]&&(t[19]=new Yh),t[19].queries.push(new Xh(n))}function Yy(i,t,e){null===i.queries&&(i.queries=new qh),i.queries.track(new Kh(t,e))}function qy(i,t){return i.queries.getByIndex(t)}function dc(...i){}const uc=new ue("Application Initializer");let hc=(()=>{class i{constructor(e){this.appInits=e,this.resolve=dc,this.reject=dc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Jo(s))e.push(s);else if(kh(s)){const o=new Promise((c,m)=>{s.subscribe({complete:c,error:m})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(re(uc,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ua=new ue("AppId",{providedIn:"root",factory:function p0(){return`${nf()}${nf()}${nf()}`}});function nf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const g0=new ue("Platform Initializer"),rf=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_0=new ue("appBootstrapListener"),Gr=new ue("AnimationModuleType");let uR=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const An=new ue("LocaleId",{providedIn:"root",factory:()=>Xe(An,Pe.Optional|Pe.SkipSelf)||function hR(){return typeof $localize<"u"&&$localize.locale||Js}()});class mR{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let v0=(()=>{class i{compileModuleSync(e){return new Hh(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Kn(Ri(e).declarations).reduce((o,c)=>{const m=dt(c);return m&&o.push(new Zo(m)),o},[]);return new mR(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _R=(()=>Promise.resolve(0))();function sf(i){typeof Zone>"u"?_R.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class We{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ft(!1),this.onMicrotaskEmpty=new ft(!1),this.onStable=new ft(!1),this.onError=new ft(!1),typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function vR(){let i=bt.requestAnimationFrame,t=bt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function wR(i){const t=()=>{!function yR(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(bt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,lf(i),i.isCheckStableRunning=!0,af(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),lf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,c)=>{try{return w0(i),e.invokeTask(r,s,o,c)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),C0(i)}},onInvoke:(e,n,r,s,o,c,m)=>{try{return w0(i),e.invoke(r,s,o,c,m)}finally{i.shouldCoalesceRunChangeDetection&&t(),C0(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,lf(i),af(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!We.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new J(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,bR,dc,dc);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const bR={};function af(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function lf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function w0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function C0(i){i._nesting--,af(i)}class CR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ft,this.onMicrotaskEmpty=new ft,this.onStable=new ft,this.onError=new ft}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const x0=new ue(""),fc=new ue("");let uf,cf=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,uf||(function xR(i){uf=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),sf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sf(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(re(We),re(df),re(fc))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),df=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return uf?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),_r=null;const S0=new ue("AllowMultipleToken"),hf=new ue("PlatformDestroyListeners");class D0{constructor(t,e){this.name=t,this.token=e}}function M0(i,t,e=[]){const n=`Platform: ${t}`,r=new ue(n);return(s=[])=>{let o=ff();if(!o||o.injector.get(S0,!1)){const c=[...e,...s,{provide:r,useValue:!0}];i?i(c):function ER(i){if(_r&&!_r.get(S0,!1))throw new J(400,!1);_r=i;const t=i.get(k0);(function E0(i){const t=i.get(g0,null);t&&t.forEach(e=>e())})(i)}(function T0(i=[],t){return Mi.create({name:t,providers:[{provide:ih,useValue:"platform"},{provide:hf,useValue:new Set([()=>_r=null])},...i]})}(c,n))}return function TR(i){const t=ff();if(!t)throw new J(401,!1);return t}()}}function ff(){return _r?.get(k0)??null}let k0=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function A0(i,t){let e;return e="noop"===i?new CR:("zone.js"===i?void 0:i)||new We(t),e}(n?.ngZone,function I0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:We,useValue:r}];return r.run(()=>{const o=Mi.create({providers:s,parent:this.injector,name:e.moduleType.name}),c=e.create(o),m=c.injector.get(fr,null);if(!m)throw new J(402,!1);return r.runOutsideAngular(()=>{const b=r.onError.subscribe({next:x=>{m.handleError(x)}});c.onDestroy(()=>{mc(this._modules,c),b.unsubscribe()})}),function O0(i,t,e){try{const n=e();return Jo(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(m,r,()=>{const b=c.injector.get(hc);return b.runInitializers(),b.donePromise.then(()=>(function ry(i){Xi(i,"Expected localeId to be defined"),"string"==typeof i&&(ny=i.toLowerCase().replace(/_/g,"-"))}(c.injector.get(An,Js)||Js),this._moduleDoBootstrap(c),c))})})}bootstrapModule(e,n=[]){const r=R0({},n);return function SR(i,t,e){const n=new Hh(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(no);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new J(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(hf,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(re(Mi))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function R0(i,t){return Array.isArray(t)?t.reduce(R0,i):{...i,...t}}let no=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new me(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),o=new me(c=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),sf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{m.unsubscribe(),b.unsubscribe()}});this.isStable=Xd(s,o.pipe(function og(i={}){const{connector:t=(()=>new P),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,c,m,b=0,x=!1,E=!1;const k=()=>{c?.unsubscribe(),c=void 0},O=()=>{k(),o=m=void 0,x=E=!1},L=()=>{const U=o;O(),U?.unsubscribe()};return I((U,G)=>{b++,!E&&!x&&k();const te=m=m??t();G.add(()=>{b--,0===b&&!E&&!x&&(c=Yd(L,r))}),te.subscribe(G),!o&&b>0&&(o=new j({next:fe=>te.next(fe),error:fe=>{E=!0,k(),c=Yd(O,e,fe),te.error(fe)},complete:()=>{x=!0,k(),c=Yd(O,n),te.complete()}}),pi(U).subscribe(o))})(s)}}()))}bootstrap(e,n){const r=e instanceof uv;if(!this._injector.get(hc).done)throw!r&&function bs(i){const t=dt(i)||ni(i)||gi(i);return null!==t&&t.standalone}(e),new J(405,false);let o;o=r?e:this._injector.get(Ns).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const c=function DR(i){return i.isBoundToModule}(o)?void 0:this._injector.get(eo),b=o.create(Mi.NULL,[],n||o.selector,c),x=b.location.nativeElement,E=b.injector.get(x0,null);return E?.registerApplication(x),b.onDestroy(()=>{this.detachView(b.hostView),mc(this.components,b),E?.unregisterApplication(x)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new J(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;mc(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(_0,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>mc(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new J(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(re(We),re(Yn),re(fr))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mc(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let On=(()=>{class i{}return i.__NG_ELEMENT_ID__=IR,i})();function IR(i){return function AR(i,t,e){if(Po(i)&&!e){const n=Ni(i.index,t);return new Ko(n,n)}return 47&i.type?new Ko(t[16],t):null}(Zt(),le(),16==(16&i))}class B0{constructor(){}supports(t){return Yl(t)}create(t){return new NR(t)}}const LR=(i,t)=>t;class NR{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||LR}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<j0(n,r,s)?e:n,c=j0(o,r,s),m=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const b=c-r,x=m-r;if(b!=x){for(let k=0;k<b;k++){const O=k<s.length?s[k]:s[k]=0,L=O+k;x<=L&&L<b&&(s[k]=O+1)}s[o.previousIndex]=x-b}}c!==m&&t(o,c,m)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Yl(t))throw new J(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],o=this._trackByFn(c,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,c)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,c),n=!0),e=e._next}else r=0,function dA(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Ur()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,c=>{o=this._trackByFn(r,c),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,c,o,r)),Object.is(e.item,c)||this._addIdentityChange(e,c)):(e=this._mismatch(e,c,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new BR(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new V0),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new V0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class BR{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VR{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class V0{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new VR,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function j0(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}function H0(){return new _c([new B0])}let _c=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||H0()),deps:[[i,new Rs,new Gn]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new J(901,!1)}}return i.\u0275prov=ye({token:i,providedIn:"root",factory:H0}),i})();const $R=M0(null,"core",[]);let WR=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(re(no))},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({}),i})(),vf=null;function Rn(){return vf}class YR{}const tt=new ue("DocumentToken");let bf=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return function qR(){return re($0)}()},providedIn:"platform"}),i})();const KR=new ue("Location Initialized");let $0=(()=>{class i extends bf{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rn().getBaseHref(this._doc)}onPopState(e){const n=Rn().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Rn().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){W0()?this._history.pushState(e,n,r):this._location.hash=r}replaceState(e,n,r){W0()?this._history.replaceState(e,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:function(){return function ZR(){return new $0(re(tt))}()},providedIn:"platform"}),i})();function W0(){return!!window.history.pushState}function yf(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function G0(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function tr(i){return i&&"?"!==i[0]?"?"+i:i}let Yr=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return Xe(Y0)},providedIn:"root"}),i})();const X0=new ue("appBaseHref");let Y0=(()=>{class i extends Yr{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Xe(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return yf(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+tr(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+tr(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+tr(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(re(bf),re(X0,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QR=(()=>{class i extends Yr{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=yf(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+tr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+tr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(re(bf),re(X0,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),vc=(()=>{class i{constructor(e){this._subject=new ft,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function tP(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(G0(q0(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+tr(n))}normalize(e){return i.stripTrailingSlash(function eP(i,t){return i&&new RegExp(`^${i}([/;?#]|$)`).test(t)?t.substring(i.length):t}(this._basePath,q0(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+tr(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+tr(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=tr,i.joinWithSlash=yf,i.stripTrailingSlash=G0,i.\u0275fac=function(e){return new(e||i)(re(Yr))},i.\u0275prov=ye({token:i,factory:function(){return function JR(){return new vc(re(Yr))}()},providedIn:"root"}),i})();function q0(i){return i.replace(/\/index.html$/,"")}class UP{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let aw=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new UP(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const c=n.get(s);n.move(c,o),lw(c,r)}});for(let r=0,s=n.length;r<s;r++){const c=n.get(r).context;c.index=r,c.count=s,c.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{lw(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(W(vn),W(Qn),W(_c))},i.\u0275dir=Ce({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function lw(i,t){i.context.$implicit=t.item}let Tc=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new zP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){cw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){cw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(W(vn),W(Qn))},i.\u0275dir=Ce({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class zP{constructor(){this.$implicit=null,this.ngIf=null}}function cw(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${vt(t)}'.`)}let qr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({}),i})();const fw="browser";let yF=(()=>{class i{}return i.\u0275prov=ye({token:i,providedIn:"root",factory:()=>new wF(re(tt),window)}),i})();class wF{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function CF(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=mw(this.window.history)||mw(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mw(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class KF extends YR{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Nf extends KF{static makeCurrent(){!function XR(i){vf||(vf=i)}(new Nf)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function ZF(){return ga=ga||document.querySelector("base"),ga?ga.getAttribute("href"):null}();return null==e?null:function QF(i){Ic=Ic||document.createElement("a"),Ic.setAttribute("href",i);const t=Ic.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){ga=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function BP(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Ic,ga=null;const yw=new ue("TRANSITION_ID"),eL=[{provide:uc,useFactory:function JF(i,t,e){return()=>{e.get(hc).donePromise.then(()=>{const n=Rn(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[yw,tt,Mi],multi:!0}];let iL=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();const Ac=new ue("EventManagerPlugins");let Oc=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(re(Ac),re(We))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();class ww{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Rn().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Cw=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),_a=(()=>{class i extends Cw{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(xw),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(xw))}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();function xw(i){Rn().remove(i)}const Bf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vf=/%COMP%/g;function jf(i,t){return t.flat(100).map(e=>e.replace(Vf,i))}function Ew(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Rc=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Uf(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case un.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new lL(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case un.ShadowDom:return new cL(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=jf(n.id,n.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(re(Oc),re(_a),re(ua))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();class Uf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Bf[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Tw(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(Tw(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=Bf[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Bf[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Di.DashCase|Di.Important)?t.style.setProperty(e,n,r&Di.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Di.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ew(n)):this.eventManager.addEventListener(t,e,Ew(n))}}function Tw(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class lL extends Uf{constructor(t,e,n,r){super(t),this.component=n;const s=jf(r+"-"+n.id,n.styles);e.addStyles(s),this.contentAttr=function sL(i){return"_ngcontent-%COMP%".replace(Vf,i)}(r+"-"+n.id),this.hostAttr=function oL(i){return"_nghost-%COMP%".replace(Vf,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class cL extends Uf{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=jf(r.id,r.styles);for(let o=0;o<s.length;o++){const c=document.createElement("style");c.textContent=s[o],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let dL=(()=>{class i extends ww{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();const kw=["alt","control","meta","shift"],uL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hL={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let fL=(()=>{class i extends ww{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rn().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),o="code."),kw.forEach(b=>{const x=n.indexOf(b);x>-1&&(n.splice(x,1),o+=b+".")}),o+=s,0!=n.length||0===s.length)return null;const m={};return m.domEventName=r,m.fullKey=o,m}static matchEventFullKeyCode(e,n){let r=uL[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kw.forEach(o=>{o!==r&&(0,hL[o])(e)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();const _L=M0($R,"browser",[{provide:rf,useValue:fw},{provide:g0,useValue:function mL(){Nf.makeCurrent()},multi:!0},{provide:tt,useFactory:function gL(){return function HT(i){Yu=i}(document),document},deps:[]}]),Ow=new ue(""),Rw=[{provide:fc,useClass:class tL{addToWindow(t){bt.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},bt.getAllAngularTestabilities=()=>t.getAllTestabilities(),bt.getAllAngularRootElements=()=>t.getAllRootElements(),bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(n=>{const r=bt.getAllAngularTestabilities();let s=r.length,o=!1;const c=function(m){o=o||m,s--,0==s&&n(o)};r.forEach(function(m){m.whenStable(c)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Rn().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:x0,useClass:cf,deps:[We,df,fc]},{provide:cf,useClass:cf,deps:[We,df,fc]}],Pw=[{provide:ih,useValue:"root"},{provide:fr,useFactory:function pL(){return new fr},deps:[]},{provide:Ac,useClass:dL,multi:!0,deps:[tt,We,rf]},{provide:Ac,useClass:fL,multi:!0,deps:[tt]},{provide:Rc,useClass:Rc,deps:[Oc,_a,ua]},{provide:Yo,useExisting:Rc},{provide:Cw,useExisting:_a},{provide:_a,useClass:_a,deps:[tt]},{provide:Oc,useClass:Oc,deps:[Ac,We]},{provide:class xF{},useClass:iL,deps:[]},[]];let Fw=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:ua,useValue:e.appId},{provide:yw,useExisting:ua},eL]}}}return i.\u0275fac=function(e){return new(e||i)(re(Ow,12))},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({providers:[...Pw,...Rw],imports:[qr,WR]}),i})(),Lw=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:function(e){let n=null;return n=e?new e:function bL(){return new Lw(re(tt))}(),n},providedIn:"root"}),i})();function ke(...i){return Lt(i,Eo(i))}typeof window<"u"&&window;class en extends P{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const Pc=So(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:ML}=Array,{getPrototypeOf:TL,prototype:kL,keys:IL}=Object;const{isArray:OL}=Array;function Wf(i){return H(t=>function RL(i,t){return OL(t)?i(...t):i(t)}(i,t))}function Gf(...i){const t=Eo(i),e=function ig(i){return C(Gd(i))?i.pop():void 0}(i),{args:n,keys:r}=function jw(i){if(1===i.length){const t=i[0];if(ML(t))return{args:t,keys:null};if(function AL(i){return i&&"object"==typeof i&&TL(i)===kL}(t)){const e=IL(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}(i);if(0===n.length)return Lt([],t);const s=new me(function PL(i,t,e=he){return n=>{Hw(t,()=>{const{length:r}=i,s=new Array(r);let o=r,c=r;for(let m=0;m<r;m++)Hw(t,()=>{const b=Lt(i[m],t);let x=!1;b.subscribe(V(n,E=>{s[m]=E,x||(x=!0,c--),c||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>function Uw(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}(r,o):he));return e?s.pipe(Wf(e)):s}function Hw(i,t,e){i?jn(e,i,t):t()}function Fc(...i){return function FL(){return _s(1)}()(Lt(i,Eo(i)))}function zw(i){return new me(t=>{pi(i()).subscribe(t)})}function so(i,t){const e=C(i)?i:()=>i,n=r=>r.error(e());return new me(t?r=>t.schedule(n,0,r):n)}function Xf(){return I((i,t)=>{let e=null;i._refCount++;const n=V(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class $w extends me{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,F(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Dt;const e=this.getSubject();t.add(this.source.subscribe(V(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Dt.EMPTY)}return t}refCount(){return Xf()(this)}}function Pn(i,t){return I((e,n)=>{let r=null,s=0,o=!1;const c=()=>o&&!r&&n.complete();e.subscribe(V(n,m=>{r?.unsubscribe();let b=0;const x=s++;pi(i(m,x)).subscribe(r=V(n,E=>n.next(t?t(m,E,x,b++):E),()=>{r=null,c()}))},()=>{o=!0,c()}))})}function br(i){return i<=0?()=>Cn:I((t,e)=>{let n=0;t.subscribe(V(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Yf(...i){const t=Eo(i);return I((e,n)=>{(t?Fc(i,e,t):Fc(i,e)).subscribe(n)})}function tn(i,t){return I((e,n)=>{let r=0;e.subscribe(V(n,s=>i.call(t,s,r++)&&n.next(s)))})}function Lc(i){return I((t,e)=>{let n=!1;t.subscribe(V(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function Ww(i=LL){return I((t,e)=>{let n=!1;t.subscribe(V(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function LL(){return new Pc}function yr(i,t){const e=arguments.length>=2;return n=>n.pipe(i?tn((r,s)=>i(r,s,n)):he,br(1),e?Lc(t):Ww(()=>new Pc))}function wr(i,t){return C(t)?Xt(i,t,1):Xt(i,1)}function Vt(i,t,e){const n=C(i)||t||e?{next:i,error:t,complete:e}:i;return n?I((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let c=!0;r.subscribe(V(s,m=>{var b;null===(b=n.next)||void 0===b||b.call(n,m),s.next(m)},()=>{var m;c=!1,null===(m=n.complete)||void 0===m||m.call(n),s.complete()},m=>{var b;c=!1,null===(b=n.error)||void 0===b||b.call(n,m),s.error(m)},()=>{var m,b;c&&(null===(m=n.unsubscribe)||void 0===m||m.call(n)),null===(b=n.finalize)||void 0===b||b.call(n)}))}):he}function nr(i){return I((t,e)=>{let s,n=null,r=!1;n=t.subscribe(V(e,void 0,void 0,o=>{s=pi(i(o,nr(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function NL(i,t,e,n,r){return(s,o)=>{let c=e,m=t,b=0;s.subscribe(V(o,x=>{const E=b++;m=c?i(m,x,E):(c=!0,x),n&&o.next(m)},r&&(()=>{c&&o.next(m),o.complete()})))}}function Gw(i,t){return I(NL(i,t,arguments.length>=2,!0))}function qf(i){return i<=0?()=>Cn:I((t,e)=>{let n=[];t.subscribe(V(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function Xw(i,t){const e=arguments.length>=2;return n=>n.pipe(i?tn((r,s)=>i(r,s,n)):he,qf(1),e?Lc(t):Ww(()=>new Pc))}function Nc(i){return I((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const qe="primary",va=Symbol("RouteTitle");class jL{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function oo(i){return new jL(i)}function UL(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],c=i[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Fn(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Yw(i[r],t[r]))return!1;return!0}function Yw(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function qw(i){return Array.prototype.concat.apply([],i)}function Kw(i){return i.length>0?i[i.length-1]:null}function ei(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Cr(i){return kh(i)?i:Jo(i)?Lt(Promise.resolve(i)):ke(i)}const Bc=!1,zL={exact:function Jw(i,t,e){if(!Zr(i.segments,t.segments)||!Vc(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!Jw(i.children[n],t.children[n],e))return!1;return!0},subset:eC},Zw={exact:function $L(i,t){return Fn(i,t)},subset:function WL(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Yw(i[e],t[e]))},ignored:()=>!0};function Qw(i,t,e){return zL[e.paths](i.root,t.root,e.matrixParams)&&Zw[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function eC(i,t,e){return tC(i,t,t.segments,e)}function tC(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!Zr(r,e)||t.hasChildren()||!Vc(r,e,n))}if(i.segments.length===e.length){if(!Zr(i.segments,e)||!Vc(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!eC(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(Zr(i.segments,r)&&Vc(i.segments,r,n)&&i.children[qe])&&tC(i.children[qe],t,s,n)}}function Vc(i,t,e){return t.every((n,r)=>Zw[e](i[r].parameters,n.parameters))}class Kr{constructor(t=new Ke([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oo(this.queryParams)),this._queryParamMap}toString(){return YL.serialize(this)}}class Ke{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ei(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jc(this)}}class ba{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=oo(this.parameters)),this._parameterMap}toString(){return rC(this)}}function Zr(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let ya=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return new Kf},providedIn:"root"}),i})();class Kf{parse(t){const e=new nN(t);return new Kr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${wa(t.root,!0)}`,n=function ZL(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${Uc(e)}=${Uc(r)}`).join("&"):`${Uc(e)}=${Uc(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function qL(i){return encodeURI(i)}(t.fragment)}`:""}`}}const YL=new Kf;function jc(i){return i.segments.map(t=>rC(t)).join("/")}function wa(i,t){if(!i.hasChildren())return jc(i);if(t){const e=i.children[qe]?wa(i.children[qe],!1):"",n=[];return ei(i.children,(r,s)=>{s!==qe&&n.push(`${s}:${wa(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function XL(i,t){let e=[];return ei(i.children,(n,r)=>{r===qe&&(e=e.concat(t(n,r)))}),ei(i.children,(n,r)=>{r!==qe&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===qe?[wa(i.children[qe],!1)]:[`${r}:${wa(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[qe]?`${jc(i)}/${e[0]}`:`${jc(i)}/(${e.join("//")})`}}function iC(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uc(i){return iC(i).replace(/%3B/gi,";")}function Zf(i){return iC(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hc(i){return decodeURIComponent(i)}function nC(i){return Hc(i.replace(/\+/g,"%20"))}function rC(i){return`${Zf(i.path)}${function KL(i){return Object.keys(i).map(t=>`;${Zf(t)}=${Zf(i[t])}`).join("")}(i.parameters)}`}const QL=/^[^\/()?;=#]+/;function zc(i){const t=i.match(QL);return t?t[0]:""}const JL=/^[^=?&#]+/,tN=/^[^&#]+/;class nN{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[qe]=new Ke(t,e)),n}parseSegment(){const t=zc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new J(4009,Bc);return this.capture(t),new ba(Hc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=zc(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=zc(this.remaining);r&&(n=r,this.capture(n))}t[Hc(e)]=Hc(n)}parseQueryParam(t){const e=function eN(i){const t=i.match(JL);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function iN(i){const t=i.match(tN);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=nC(e),s=nC(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=zc(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new J(4010,Bc);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=qe);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[qe]:new Ke([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new J(4011,Bc)}}function Qf(i){return i.segments.length>0?new Ke([],{[qe]:i}):i}function $c(i){const t={};for(const n of Object.keys(i.children)){const s=$c(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function rN(i){if(1===i.numberOfChildren&&i.children[qe]){const t=i.children[qe];return new Ke(i.segments.concat(t.segments),t.children)}return i}(new Ke(i.segments,t))}function Qr(i){return i instanceof Kr}function aN(i,t,e,n,r){if(0===e.length)return ao(t.root,t.root,t.root,n,r);const s=function aC(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new oC(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return ei(s.outlets,(m,b)=>{c[b]="string"==typeof m?m.split("/"):m}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((c,m)=>{0==m&&"."===c||(0==m&&""===c?e=!0:".."===c?t++:""!=c&&r.push(c))}),r):[...r,s]},[]);return new oC(e,t,n)}(e);return s.toRoot()?ao(t.root,t.root,new Ke([],{}),n,r):function o(m){const b=function cN(i,t,e,n){if(i.isAbsolute)return new lo(t.root,!0,0);if(-1===n)return new lo(e,e===t.root,0);return function lC(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new J(4005,!1);r=n.segments.length}return new lo(n,!1,r-s)}(e,n+(Ca(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,m),x=b.processChildren?Sa(b.segmentGroup,b.index,s.commands):em(b.segmentGroup,b.index,s.commands);return ao(t.root,b.segmentGroup,x,n,r)}(i.snapshot?._lastPathIndex)}function Ca(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function xa(i){return"object"==typeof i&&null!=i&&i.outlets}function ao(i,t,e,n,r){let o,s={};n&&ei(n,(m,b)=>{s[b]=Array.isArray(m)?m.map(x=>`${x}`):`${m}`}),o=i===t?e:sC(i,t,e);const c=Qf($c(o));return new Kr(c,s,r)}function sC(i,t,e){const n={};return ei(i.children,(r,s)=>{n[s]=r===t?e:sC(r,t,e)}),new Ke(i.segments,n)}class oC{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ca(n[0]))throw new J(4003,!1);const r=n.find(xa);if(r&&r!==Kw(n))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lo{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function em(i,t,e){if(i||(i=new Ke([],{})),0===i.segments.length&&i.hasChildren())return Sa(i,t,e);const n=function uN(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],c=e[n];if(xa(c))break;const m=`${c}`,b=n<e.length-1?e[n+1]:null;if(r>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!dC(m,b,o))return s;n+=2}else{if(!dC(m,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Ke(i.segments.slice(0,n.pathIndex),{});return s.children[qe]=new Ke(i.segments.slice(n.pathIndex),i.children),Sa(s,0,r)}return n.match&&0===r.length?new Ke(i.segments,{}):n.match&&!i.hasChildren()?tm(i,t,e):n.match?Sa(i,0,r):tm(i,t,e)}function Sa(i,t,e){if(0===e.length)return new Ke(i.segments,{});{const n=function dN(i){return xa(i[0])?i[0].outlets:{[qe]:i}}(e),r={};return ei(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=em(i.children[o],t,s))}),ei(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Ke(i.segments,r)}}function tm(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(xa(s)){const m=hN(s.outlets);return new Ke(n,m)}if(0===r&&Ca(e[0])){n.push(new ba(i.segments[t].path,cC(e[0]))),r++;continue}const o=xa(s)?s.outlets[qe]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&Ca(c)?(n.push(new ba(o,cC(c))),r+=2):(n.push(new ba(o,{})),r++)}return new Ke(n,{})}function hN(i){const t={};return ei(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=tm(new Ke([],{}),0,e))}),t}function cC(i){const t={};return ei(i,(e,n)=>t[n]=`${e}`),t}function dC(i,t,e){return i==e.path&&Fn(t,e.parameters)}const Da="imperative";class Ln{constructor(t,e){this.id=t,this.url=e}}class im extends Ln{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jr extends Ln{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wc extends Ln{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uC extends Ln{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=16}}class hC extends Ln{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fN extends Ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mN extends Ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pN extends Ln{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gN extends Ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _N extends Ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vN{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bN{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yN{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wN{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CN{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xN{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fC{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let DN=(()=>{class i{createUrlTree(e,n,r,s,o,c){return aN(e||n.root,r,s,o,c)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),EN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(t){return DN.\u0275fac(t)},providedIn:"root"}),i})();class mC{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=nm(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=nm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=rm(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return rm(t,this._root).map(e=>e.value)}}function nm(i,t){if(i===t.value)return t;for(const e of t.children){const n=nm(i,e);if(n)return n}return null}function rm(i,t){if(i===t.value)return[t];for(const e of t.children){const n=rm(i,e);if(n.length)return n.unshift(t),n}return[]}class rr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function co(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class pC extends mC{constructor(t,e){super(t),this.snapshot=e,sm(this,t)}toString(){return this.snapshot.toString()}}function gC(i,t){const e=function MN(i,t){const o=new Gc([],{},{},"",{},qe,t,null,i.root,-1,{});return new vC("",new rr(o,[]))}(i,t),n=new en([new ba("",{})]),r=new en({}),s=new en({}),o=new en({}),c=new en(""),m=new uo(n,r,o,c,s,qe,t,e.root);return m.snapshot=e.root,new pC(new rr(m,[]),e)}class uo{constructor(t,e,n,r,s,o,c,m){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.title=this.data?.pipe(H(b=>b[va]))??ke(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(H(t=>oo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(H(t=>oo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _C(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function TN(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Gc{get title(){return this.data?.[va]}constructor(t,e,n,r,s,o,c,m,b,x,E){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=x,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vC extends mC{constructor(t,e){super(e),this.url=t,sm(this,e)}toString(){return bC(this._root)}}function sm(i,t){t.value._routerState=i,t.children.forEach(e=>sm(i,e))}function bC(i){const t=i.children.length>0?` { ${i.children.map(bC).join(", ")} } `:"";return`${i.value}${t}`}function om(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Fn(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Fn(t.params,e.params)||i.params.next(e.params),function HL(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Fn(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Fn(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function am(i,t){const e=Fn(i.params,t.params)&&function GL(i,t){return Zr(i,t)&&i.every((e,n)=>Fn(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||am(i.parent,t.parent))}function Ea(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function IN(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Ea(i,n,r);return Ea(i,n)})}(i,t,e);return new rr(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>Ea(i,c)),o}}const n=function AN(i){return new uo(new en(i.url),new en(i.params),new en(i.queryParams),new en(i.fragment),new en(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Ea(i,s));return new rr(n,r)}}const lm="ngNavigationCancelingError";function yC(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=Qr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=wC(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function wC(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[lm]=!0,n.cancellationCode=t,e&&(n.url=e),n}function CC(i){return xC(i)&&Qr(i.url)}function xC(i){return i&&i[lm]}class ON{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ma,this.attachRef=null}}let Ma=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new ON,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Xc=!1;let SC=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=qe,this.activateEvents=new ft,this.deactivateEvents=new ft,this.attachEvents=new ft,this.detachEvents=new ft,this.parentContexts=Xe(Ma),this.location=Xe(vn),this.changeDetector=Xe(On),this.environmentInjector=Xe(Yn)}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,Xc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,Xc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,Xc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new J(4013,Xc);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,m=new RN(e,c,r.injector);if(n&&function PN(i){return!!i.resolveComponentFactory}(n)){const b=n.resolveComponentFactory(o);this.activated=r.createComponent(b,r.length,m)}else this.activated=r.createComponent(o,{index:r.length,injector:m,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=Ce({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fi]}),i})();class RN{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===uo?this.route:t===Ma?this.childContexts:this.parent.get(t,e)}}let cm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Oi({type:i,selectors:[["ng-component"]],standalone:!0,features:[zh],decls:1,vars:0,template:function(e,n){1&e&&Qt(0,"router-outlet")},dependencies:[SC],encapsulation:2}),i})();function DC(i,t){return i.providers&&!i._injector&&(i._injector=oc(i.providers,t,`Route: ${i.path}`)),i._injector??t}function um(i){const t=i.children&&i.children.map(um),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==qe&&(e.component=cm),e}function nn(i){return i.outlet||qe}function EC(i,t){const e=i.filter(n=>nn(n)===t);return e.push(...i.filter(n=>nn(n)!==t)),e}function Ta(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class VN{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),om(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=co(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),ei(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=co(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=co(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=co(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new xN(s.value.snapshot))}),t.children.length&&this.forwardEvent(new wN(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(om(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),om(c.route.value),this.activateChildRoutes(t,null,o.children)}else{const c=Ta(r.snapshot),m=c?.get(Ns)??null;o.attachRef=null,o.route=r,o.resolver=m,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class MC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Yc{constructor(t,e){this.component=t,this.route=e}}function jN(i,t,e){const n=i._root;return ka(n,t?t._root:null,e,[n.value])}function ho(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function NE(i){return null!==rl(i)}(i)?t.get(i):i:n}function ka(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=co(t);return i.children.forEach(o=>{(function HN(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,c=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const m=function zN(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Zr(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Zr(i.url,t.url)||!Fn(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!am(i,t)||!Fn(i.queryParams,t.queryParams);default:return!am(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new MC(n)):(s.data=o.data,s._resolvedData=o._resolvedData),ka(i,t,s.component?c?c.children:null:e,n,r),m&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Yc(c.outlet.component,o))}else o&&Ia(t,c,r),r.canActivateChecks.push(new MC(n)),ka(i,null,s.component?c?c.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),ei(s,(o,c)=>Ia(o,e.getContext(c),r)),r}function Ia(i,t,e){const n=co(i),r=i.value;ei(n,(s,o)=>{Ia(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new Yc(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Aa(i){return"function"==typeof i}function hm(i){return i instanceof Pc||"EmptyError"===i?.name}const qc=Symbol("INITIAL_VALUE");function fo(){return Pn(i=>Gf(i.map(t=>t.pipe(br(1),Yf(qc)))).pipe(H(t=>{for(const e of t)if(!0!==e){if(e===qc)return qc;if(!1===e||e instanceof Kr)return e}return!0}),tn(t=>t!==qc),br(1)))}function TC(i){return function pe(...i){return De(i)}(Vt(t=>{if(Qr(t))throw yC(0,t)}),H(t=>!0===t))}const fm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kC(i,t,e,n,r){const s=mm(i,t,e);return s.matched?function a2(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?ke(r.map(o=>{const c=ho(o,i);return Cr(function qN(i){return i&&Aa(i.canMatch)}(c)?c.canMatch(t,e):i.runInContext(()=>c(t,e)))})).pipe(fo(),TC()):ke(!0)}(n=DC(t,n),t,e).pipe(H(o=>!0===o?s:{...fm})):ke(s)}function mm(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...fm}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||UL)(e,i,t);if(!r)return{...fm};const s={};ei(r.posParams,(c,m)=>{s[m]=c.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Kc(i,t,e,n){if(e.length>0&&function d2(i,t,e){return e.some(n=>Zc(i,t,n)&&nn(n)!==qe)}(i,e,n)){const s=new Ke(t,function c2(i,t,e,n){const r={};r[qe]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&nn(s)!==qe){const o=new Ke([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[nn(s)]=o}return r}(i,t,n,new Ke(e,i.children)));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function u2(i,t,e){return e.some(n=>Zc(i,t,n))}(i,e,n)){const s=new Ke(i.segments,function l2(i,t,e,n,r){const s={};for(const o of n)if(Zc(i,e,o)&&!r[nn(o)]){const c=new Ke([],{});c._sourceSegment=i,c._segmentIndexShift=t.length,s[nn(o)]=c}return{...r,...s}}(i,t,e,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new Ke(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function Zc(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function IC(i,t,e,n){return!!(nn(i)===n||n!==qe&&Zc(t,e,i))&&("**"===i.path||mm(t,i,e).matched)}function AC(i,t,e){return 0===t.length&&!i.children[e]}const Qc=!1;class Jc{constructor(t){this.segmentGroup=t||null}}class OC{constructor(t){this.urlTree=t}}function Oa(i){return so(new Jc(i))}function RC(i){return so(new OC(i))}class p2{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=Kc(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ke(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,qe).pipe(H(s=>this.createUrlTree($c(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(nr(s=>{if(s instanceof OC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Jc?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,qe).pipe(H(r=>this.createUrlTree($c(r),t.queryParams,t.fragment))).pipe(nr(r=>{throw r instanceof Jc?this.noMatchError(r):r}))}noMatchError(t){return new J(4002,Qc)}createUrlTree(t,e,n){const r=Qf(t);return new Kr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(H(s=>new Ke([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Lt(r).pipe(wr(s=>{const o=n.children[s],c=EC(e,s);return this.expandSegmentGroup(t,c,o,s).pipe(H(m=>({segment:m,outlet:s})))}),Gw((s,o)=>(s[o.outlet]=o.segment,s),{}),Xw())}expandSegment(t,e,n,r,s,o){return Lt(n).pipe(wr(c=>this.expandSegmentAgainstRoute(t,e,n,c,r,s,o).pipe(nr(b=>{if(b instanceof Jc)return ke(null);throw b}))),yr(c=>!!c),nr((c,m)=>{if(hm(c))return AC(e,r,s)?ke(new Ke([],{})):Oa(e);throw c}))}expandSegmentAgainstRoute(t,e,n,r,s,o,c){return IC(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):Oa(e):Oa(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?RC(s):this.lineralizeSegments(n,s).pipe(Xt(o=>{const c=new Ke(o,{});return this.expandSegment(t,c,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:c,consumedSegments:m,remainingSegments:b,positionalParamSegments:x}=mm(e,r,s);if(!c)return Oa(e);const E=this.applyRedirectCommands(m,r.redirectTo,x);return r.redirectTo.startsWith("/")?RC(E):this.lineralizeSegments(r,E).pipe(Xt(k=>this.expandSegment(t,e,n,k.concat(b),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=DC(n,t),n.loadChildren?(n._loadedRoutes?ke({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(H(c=>(n._loadedRoutes=c.routes,n._loadedInjector=c.injector,new Ke(r,{})))):ke(new Ke(r,{}))):kC(e,n,r,t).pipe(Pn(({matched:o,consumedSegments:c,remainingSegments:m})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(Xt(x=>{const E=x.injector??t,k=x.routes,{segmentGroup:O,slicedSegments:L}=Kc(e,c,m,k),U=new Ke(O.segments,O.children);if(0===L.length&&U.hasChildren())return this.expandChildren(E,k,U).pipe(H(Q=>new Ke(c,Q)));if(0===k.length&&0===L.length)return ke(new Ke(c,{}));const G=nn(n)===s;return this.expandSegment(E,U,k,L,G?qe:s,!0).pipe(H(fe=>new Ke(c.concat(fe.segments),fe.children)))})):Oa(e)))}getChildConfig(t,e,n){return e.children?ke({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ke({routes:e._loadedRoutes,injector:e._loadedInjector}):function o2(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?ke(!0):ke(r.map(o=>{const c=ho(o,i);return Cr(function WN(i){return i&&Aa(i.canLoad)}(c)?c.canLoad(t,e):i.runInContext(()=>c(t,e)))})).pipe(fo(),TC())}(t,e,n).pipe(Xt(r=>r?this.configLoader.loadChildren(t,e).pipe(Vt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function f2(i){return so(wC(Qc,3))}())):ke({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ke(n);if(r.numberOfChildren>1||!r.children[qe])return so(new J(4e3,Qc));r=r.children[qe]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new Kr(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ei(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const c=r.substring(1);n[s]=e[c]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return ei(e.children,(c,m)=>{o[m]=this.createSegmentGroup(t,c,n,r)}),new Ke(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new J(4001,Qc);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class _2{}class y2{constructor(t,e,n,r,s,o,c){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c}recognize(){const t=Kc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,qe).pipe(H(e=>{if(null===e)return null;const n=new Gc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new rr(n,e),s=new vC(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=_C(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return Lt(Object.keys(n.children)).pipe(wr(r=>{const s=n.children[r],o=EC(e,r);return this.processSegmentGroup(t,o,s,r)}),Gw((r,s)=>r&&s?(r.push(...s),r):null),function BL(i,t=!1){return I((e,n)=>{let r=0;e.subscribe(V(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),Lc(null),Xw(),H(r=>{if(null===r)return null;const s=FC(r);return function w2(i){i.sort((t,e)=>t.value.outlet===qe?-1:e.value.outlet===qe?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return Lt(e).pipe(wr(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),yr(o=>!!o),nr(o=>{if(hm(o))return AC(n,r,s)?ke([]):ke(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!IC(e,n,r,s))return ke(null);let o;if("**"===e.path){const c=r.length>0?Kw(r).parameters:{},m=NC(n)+r.length;o=ke({snapshot:new Gc(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BC(e),nn(e),e.component??e._loadedComponent??null,e,LC(n),m,VC(e)),consumedSegments:[],remainingSegments:[]})}else o=kC(n,e,r,t).pipe(H(({matched:c,consumedSegments:m,remainingSegments:b,parameters:x})=>{if(!c)return null;const E=NC(n)+m.length;return{snapshot:new Gc(m,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BC(e),nn(e),e.component??e._loadedComponent??null,e,LC(n),E,VC(e)),consumedSegments:m,remainingSegments:b}}));return o.pipe(Pn(c=>{if(null===c)return ke(null);const{snapshot:m,consumedSegments:b,remainingSegments:x}=c;t=e._injector??t;const E=e._loadedInjector??t,k=function C2(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:O,slicedSegments:L}=Kc(n,b,x,k.filter(G=>void 0===G.redirectTo));if(0===L.length&&O.hasChildren())return this.processChildren(E,k,O).pipe(H(G=>null===G?null:[new rr(m,G)]));if(0===k.length&&0===L.length)return ke([new rr(m,[])]);const U=nn(e)===s;return this.processSegment(E,k,O,L,U?qe:s).pipe(H(G=>null===G?null:[new rr(m,G)]))}))}}function x2(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function FC(i){const t=[],e=new Set;for(const n of i){if(!x2(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=FC(n.children);t.push(new rr(n.value,r))}return t.filter(n=>!e.has(n))}function LC(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function NC(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function BC(i){return i.data||{}}function VC(i){return i.resolve||{}}function jC(i){return"string"==typeof i.title||null===i.title}function pm(i){return Pn(t=>{const e=i(t);return e?Lt(e).pipe(H(()=>t)):ke(t)})}const mo=new ue("ROUTES");let gm=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ke(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Cr(e.loadComponent()).pipe(H(HC),Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Nc(()=>{this.componentLoaders.delete(e)})),r=new $w(n,()=>new P).pipe(Xf());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ke({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(H(c=>{this.onLoadEndListener&&this.onLoadEndListener(n);let m,b,x=!1;Array.isArray(c)?b=c:(m=c.create(e).injector,b=qw(m.get(mo,[],Pe.Self|Pe.Optional)));return{routes:b.map(um),injector:m}}),Nc(()=>{this.childrenLoaders.delete(n)})),o=new $w(s,()=>new P).pipe(Xf());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Cr(e()).pipe(H(HC),Xt(r=>r instanceof ky||Array.isArray(r)?ke(r):Lt(this.compiler.compileModuleAsync(r))))}}return i.\u0275fac=function(e){return new(e||i)(re(Mi),re(v0))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function HC(i){return function O2(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let td=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new P,this.configLoader=Xe(gm),this.environmentInjector=Xe(Yn),this.urlSerializer=Xe(ya),this.rootContexts=Xe(Ma),this.navigationId=0,this.afterPreactivation=()=>ke(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new bN(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new vN(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e){return this.transitions=new en({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Da,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tn(n=>0!==n.id),H(n=>({...n,extractedUrl:e.urlHandlingStrategy.extract(n.rawUrl)})),Pn(n=>{let r=!1,s=!1;return ke(n).pipe(Vt(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pn(o=>{const c=e.browserUrlTree.toString(),m=!e.navigated||o.extractedUrl.toString()!==c||c!==e.currentUrlTree.toString();if(!m&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const x="";return this.events.next(new uC(o.id,e.serializeUrl(n.rawUrl),x,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),Cn}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return zC(o.source)&&(e.browserUrlTree=o.extractedUrl),ke(o).pipe(Pn(x=>{const E=this.transitions?.getValue();return this.events.next(new im(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),E!==this.transitions?.getValue()?Cn:Promise.resolve(x)}),function g2(i,t,e,n){return Pn(r=>function m2(i,t,e,n,r){return new p2(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(H(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),Vt(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},n.urlAfterRedirects=x.urlAfterRedirects}),function D2(i,t,e,n,r){return Xt(s=>function b2(i,t,e,n,r,s,o="emptyOnly"){return new y2(i,t,e,n,r,o,s).recognize().pipe(Pn(c=>null===c?function v2(i){return new me(t=>t.error(i))}(new _2):ke(c)))}(i,t,e,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(H(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Vt(x=>{if(n.targetSnapshot=x.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!x.extras.skipLocationChange){const k=e.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);e.setBrowserUrl(k,x)}e.browserUrlTree=x.urlAfterRedirects}const E=new fN(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(E)}));if(m&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:x,extractedUrl:E,source:k,restoredState:O,extras:L}=o,U=new im(x,this.urlSerializer.serialize(E),k,O);this.events.next(U);const G=gC(E,this.rootComponentType).snapshot;return ke(n={...o,targetSnapshot:G,urlAfterRedirects:E,extras:{...L,skipLocationChange:!1,replaceUrl:!1}})}{const x="";return this.events.next(new uC(o.id,e.serializeUrl(n.extractedUrl),x,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),Cn}}),Vt(o=>{const c=new mN(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),H(o=>n={...o,guards:jN(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function ZN(i,t){return Xt(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?ke({...e,guardsResult:!0}):function QN(i,t,e,n){return Lt(i).pipe(Xt(r=>function s2(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ke(s.map(c=>{const m=Ta(t)??r,b=ho(c,m);return Cr(function YN(i){return i&&Aa(i.canDeactivate)}(b)?b.canDeactivate(i,t,e,n):m.runInContext(()=>b(i,t,e,n))).pipe(yr())})).pipe(fo()):ke(!0)}(r.component,r.route,e,t,n)),yr(r=>!0!==r,!0))}(o,n,r,i).pipe(Xt(c=>c&&function $N(i){return"boolean"==typeof i}(c)?function JN(i,t,e,n){return Lt(t).pipe(wr(r=>Fc(function t2(i,t){return null!==i&&t&&t(new yN(i)),ke(!0)}(r.route.parent,n),function e2(i,t){return null!==i&&t&&t(new CN(i)),ke(!0)}(r.route,n),function r2(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function UN(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>zw(()=>ke(o.guards.map(m=>{const b=Ta(o.node)??e,x=ho(m,b);return Cr(function XN(i){return i&&Aa(i.canActivateChild)}(x)?x.canActivateChild(n,i):b.runInContext(()=>x(n,i))).pipe(yr())})).pipe(fo())));return ke(s).pipe(fo())}(i,r.path,e),function n2(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return ke(!0);const r=n.map(s=>zw(()=>{const o=Ta(t)??e,c=ho(s,o);return Cr(function GN(i){return i&&Aa(i.canActivate)}(c)?c.canActivate(t,i):o.runInContext(()=>c(t,i))).pipe(yr())}));return ke(r).pipe(fo())}(i,r.route,e))),yr(r=>!0!==r,!0))}(n,s,i,t):ke(c)),H(c=>({...e,guardsResult:c})))})}(this.environmentInjector,o=>this.events.next(o)),Vt(o=>{if(n.guardsResult=o.guardsResult,Qr(o.guardsResult))throw yC(0,o.guardsResult);const c=new pN(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(c)}),tn(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),pm(o=>{if(o.guards.canActivateChecks.length)return ke(o).pipe(Vt(c=>{const m=new gN(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(m)}),Pn(c=>{let m=!1;return ke(c).pipe(function E2(i,t){return Xt(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ke(e);let s=0;return Lt(r).pipe(wr(o=>function M2(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!jC(r)&&(s[va]=r.title),function T2(i,t,e,n){const r=function k2(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return ke({});const s={};return Lt(r).pipe(Xt(o=>function I2(i,t,e,n){const r=Ta(t)??n,s=ho(i,r);return Cr(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(i[o],t,e,n).pipe(yr(),Vt(c=>{s[o]=c}))),qf(1),function VL(i){return H(()=>i)}(s),nr(o=>hm(o)?Cn:so(o)))}(s,i,t,n).pipe(H(o=>(i._resolvedData=o,i.data=_C(i,e).resolve,r&&jC(r)&&(i.data[va]=r.title),null)))}(o.route,n,i,t)),Vt(()=>s++),qf(1),Xt(o=>s===r.length?ke(e):Cn))})}(e.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>m=!0,complete:()=>{m||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Vt(c=>{const m=new _N(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(m)}))}),pm(o=>{const c=m=>{const b=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(m.routeConfig).pipe(Vt(x=>{m.component=x}),H(()=>{})));for(const x of m.children)b.push(...c(x));return b};return Gf(c(o.targetSnapshot.root)).pipe(Lc(),br(1))}),pm(()=>this.afterPreactivation()),H(o=>{const c=function kN(i,t,e){const n=Ea(i,t._root,e?e._root:void 0);return new pC(n,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:c}}),Vt(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((i,t,e)=>H(n=>(new VN(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),Vt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Jr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Nc(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),nr(o=>{if(s=!0,xC(o)){CC(o)||(e.navigated=!0,e.restoreHistory(n,!0));const c=new Wc(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(c),CC(o)){const m=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),b={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||zC(n.source)};e.scheduleNavigation(m,Da,null,b,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{e.restoreHistory(n,!0);const c=new hC(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(c);try{n.resolve(e.errorHandler(o))}catch(m){n.reject(m)}}return Cn}))}))}cancelNavigationTransition(e,n,r){const s=new Wc(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zC(i){return i!==Da}let $C=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===qe);return n}getResolvedTitleForRoute(e){return e.data[va]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return Xe(R2)},providedIn:"root"}),i})(),R2=(()=>{class i extends $C{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(re(Lw))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),P2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return Xe(L2)},providedIn:"root"}),i})();class F2{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let L2=(()=>{class i extends F2{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=function Ht(i){return ur(()=>{const t=i.prototype.constructor,e=t[Hn]||Su(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[Hn]||Su(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(i)))(n||i)}}(),i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const id=new ue("",{providedIn:"root",factory:()=>({})});let B2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:function(){return Xe(V2)},providedIn:"root"}),i})(),V2=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function j2(i){throw i}function U2(i,t,e){return t.parse("/")}const H2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Xe(uR),this.isNgZoneEnabled=!1,this.options=Xe(id,{optional:!0})||{},this.errorHandler=this.options.errorHandler||j2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||U2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Xe(B2),this.routeReuseStrategy=Xe(P2),this.urlCreationStrategy=Xe(EN),this.titleStrategy=Xe($C),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qw(Xe(mo,{optional:!0})??[]),this.navigationTransitions=Xe(td),this.urlSerializer=Xe(ya),this.location=Xe(vc),this.isNgZoneEnabled=Xe(We)instanceof We&&We.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gC(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Da,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const m={...r};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const c=this.parseUrl(e);this.scheduleNavigation(c,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(um),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:m}=n,b=m?this.currentUrlTree.fragment:o;let x=null;switch(c){case"merge":x={...this.currentUrlTree.queryParams,...s};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=s||null}return null!==x&&(x=this.removeEmptyProps(x)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,x,b??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=Qr(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Da,null,n)}navigate(e,n={skipLocationChange:!1}){return function $2(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new J(4008,!1)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...H2}:!1===n?{...z2}:n,Qr(e))return Qw(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Qw(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,m,b,x;return o?(c=o.resolve,m=o.reject,b=o.promise):b=new Promise((E,k)=>{c=E,m=k}),x="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:x,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:c,reject:m,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(E=>Promise.reject(E))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class GC{}let X2=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(tn(e=>e instanceof Jr),wr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=oc(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,c=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Lt(r).pipe(_s())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ke(null);const s=r.pipe(Xt(o=>null===o?ke(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?Lt([s,this.loader.loadComponent(n)]).pipe(_s()):s})}}return i.\u0275fac=function(e){return new(e||i)(re(Ui),re(v0),re(Yn),re(GC),re(gm))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vm=new ue("");let XC=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof im?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Jr&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof fC&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fC(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){!function Av(){throw new Error("invalid")}()},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();function es(i,t){return{\u0275kind:i,\u0275providers:t}}function qC(){const i=Xe(Mi);return t=>{const e=i.get(no);if(t!==e.components[0])return;const n=i.get(Ui),r=i.get(KC);1===i.get(ym)&&n.initialNavigation(),i.get(ZC,null,Pe.Optional)?.setUpPreloading(),i.get(vm,null,Pe.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const KC=new ue("",{factory:()=>new P}),ym=new ue("",{providedIn:"root",factory:()=>1});const ZC=new ue("");function Q2(i){return es(0,[{provide:ZC,useExisting:X2},{provide:GC,useExisting:i}])}const QC=new ue("ROUTER_FORROOT_GUARD"),J2=[vc,{provide:ya,useClass:Kf},Ui,Ma,{provide:uo,useFactory:function YC(i){return i.routerState.root},deps:[Ui]},gm,[]];function eB(){return new D0("Router",Ui)}let JC=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[J2,[],{provide:mo,multi:!0,useValue:e},{provide:QC,useFactory:rB,deps:[[Ui,new Gn,new Rs]]},{provide:id,useValue:n||{}},n?.useHash?{provide:Yr,useClass:QR}:{provide:Yr,useClass:Y0},{provide:vm,useFactory:()=>{const i=Xe(yF),t=Xe(We),e=Xe(id),n=Xe(td),r=Xe(ya);return e.scrollOffset&&i.setOffset(e.scrollOffset),new XC(r,n,i,t,e)}},n?.preloadingStrategy?Q2(n.preloadingStrategy).\u0275providers:[],{provide:D0,multi:!0,useFactory:eB},n?.initialNavigation?sB(n):[],[{provide:ex,useFactory:qC},{provide:_0,multi:!0,useExisting:ex}]]}}static forChild(e){return{ngModule:i,providers:[{provide:mo,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(re(QC,8))},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[cm]}),i})();function rB(i){return"guarded"}function sB(i){return["disabled"===i.initialNavigation?es(3,[{provide:uc,multi:!0,useFactory:()=>{const t=Xe(Ui);return()=>{t.setUpLocationChangeListener()}}},{provide:ym,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?es(2,[{provide:ym,useValue:0},{provide:uc,multi:!0,deps:[Mi],useFactory:t=>{const e=t.get(KR,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const s=t.get(Ui),o=t.get(KC);(function n(r){t.get(Ui).events.pipe(tn(o=>o instanceof Jr||o instanceof Wc||o instanceof hC),H(o=>o instanceof Jr||o instanceof Wc&&(0===o.code||1===o.code)&&null),tn(o=>null!==o),br(1)).subscribe(()=>{r()})})(()=>{r(!0)}),t.get(td).afterPreactivation=()=>(r(!0),o.closed?ke(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const ex=new ue(""),aB=[];let lB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[JC.forRoot(aB),JC]}),i})();var jt=hs(621);let cB=(()=>{class i{constructor(){}calcCoordinates(e,n,r){const s=(r.y-e.y)/(r.x-e.x);return s*n+(e.y-s*e.x)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class tx extends jt.fabric.Polygon{constructor(t,e,n,r,s){super([]),this.service=new cB,this.build(t,e,n,r),this.set("fill",s),this.set("dirty",!0)}build(t,e,n,r){const s=this.service.calcCoordinates(t,n,{x:r,y:0}),o=this.service.calcCoordinates(e,n,{x:r,y:0}),c=new jt.fabric.Point(n,s),m=new jt.fabric.Point(n,o);this.set("points",[t,e,m,c])}}let ix=(()=>{class i{constructor(){}createVerticalScale(e,n){let r=new jt.fabric.Group,s=new jt.fabric.Line([0,0,0,e],{originX:"center",originY:"center",left:0,top:0,stroke:"white"});return r.add(s),n.forEach(o=>{r.add(new jt.fabric.Line([0,0,o.size,0],{left:o.left,top:o.top,stroke:o.color,strokeWidth:o.thickness}),new jt.fabric.Text(o.label,{left:-18,top:o.top-7,stroke:o.color,fontSize:12}))}),r}createSpeedZones(e){let n=new jt.fabric.Group;return e.forEach(r=>n.add(new tx(new jt.fabric.Point(0,r.y1),new jt.fabric.Point(0,r.y2),15,130,r.color))),n}createPointer(e,n=0){return new jt.fabric.Triangle({width:e,height:e,fill:"green",left:0,top:n+e/2,angle:-90})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wm=(()=>{class i{constructor(){this.verticalSpeed$=new en(0)}getVerticalSpeed$(){return this.verticalSpeed$}setVerticalSpeed(e){this.verticalSpeed$.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class dB extends jt.fabric.Line{constructor(t,e,n,r=0,s=0,o=20,c=130){super([s,e,o,n]),this.x3=c,this.y3=r,this.type="vsiCursor",this.stroke=t,this.strokeWidth=3}updateCursor(t){this.y1=t,this.calcY2Coordinates(),this.set("y1",this.y1),this.set("y2",this.y2),this.set("dirty",!0)}calcY2Coordinates(){if(null!=this.x1&&null!=this.y1&&null!=this.x2&&null!=this.y2){const t=(this.y3-this.y1)/(this.x3-this.x1);this.y2=t*this.x2+(this.y1-t*this.x1)}}}var rn=(()=>{return(i=rn||(rn={})).fluo_blue="#06e9f6",i.fluo_green="#00ff00",i.needle_green="#02e602",i.red_alert="#ff0000",rn;var i})();let Cm,uB=(()=>{class i{constructor(e,n){this.service=e,this.dataService=n,this.instrumentWidth=50,this.instrumentHeight=380,this.verticalPadding=10,this.pointerSize=14,this.markList=[{top:-190,label:"",size:28,left:-28,thickness:1,color:"white"},{top:-180,label:"6",size:5,left:-5,thickness:2,color:"white"},{top:-135,label:"2",size:5,left:-5,thickness:2,color:"white"},{top:-112.5,label:"",size:5,left:-5,thickness:1,color:"white"},{top:-90,label:"1",size:5,left:-5,thickness:2,color:"white"},{top:-45,label:"",size:5,left:-5,thickness:1,color:"white"},{top:0,label:"",size:40,left:-20,thickness:3,color:"yellow"},{top:45,label:"",size:5,left:-5,thickness:1,color:"white"},{top:90,label:"1",size:5,left:-5,thickness:2,color:"white"},{top:112.5,label:"",size:5,left:-5,thickness:1,color:"white"},{top:135,label:"2",size:5,left:-5,thickness:2,color:"white"},{top:180,label:"6",size:5,left:-5,thickness:2,color:"white"},{top:190,label:"",size:25,left:-25,thickness:1,color:"white"}],this.dataService.getVerticalSpeed$().subscribe(r=>this.updatePointerWithVerticalSpeed(r))}setCanvas(e){this.canvas=e}build(){let e=new jt.fabric.Rect({fill:"gray",width:20,left:5,height:this.instrumentHeight,opacity:.7}),n=new tx(new jt.fabric.Point(0,-190),new jt.fabric.Point(0,190),20,130,"gray");n.set("width",this.instrumentWidth),n.set("height",this.instrumentHeight),n.set("opacity",.7),this.verticalScaleGroup=this.service.createVerticalScale(this.instrumentHeight,this.markList),this.verticalScaleGroup.width=this.instrumentWidth,this.verticalScaleGroup.height=this.instrumentHeight;let r=this.service.createSpeedZones([{y1:-135,y2:-190,color:rn.red_alert},{y1:-90,y2:-135,color:rn.fluo_green},{y1:0,y2:-20,color:rn.fluo_green},{y1:0,y2:20,color:rn.fluo_green},{y1:90,y2:135,color:rn.fluo_green},{y1:135,y2:190,color:rn.red_alert}]);r.width=this.instrumentWidth,r.height=this.instrumentHeight,r.originX="center",r.originY="center",this.verticalScaleGroup.add(r),r.sendToBack();let s=new jt.fabric.Polygon([{x:0,y:0},{x:-10,y:5},{x:-10,y:18},{x:0,y:18},{x:0,y:-18},{x:-10,y:-18},{x:-10,y:-5},{x:0,y:0}],{fill:rn.fluo_blue});return this.verticalScaleGroup.add(s),this.pointer=new dB(rn.needle_green,0,0),this.verticalScaleGroup.add(this.pointer),this.vsiContainer=new jt.fabric.Group([e,n,this.verticalScaleGroup]),this.vsiContainer.width=this.instrumentWidth+20,this.vsiContainer.height=this.instrumentHeight+20,this.vsiContainer.left=700,this.vsiContainer.top=50,this.vsiContainer}updatePointerWithVerticalSpeed(e){this.pointer&&(this.pointer.updateCursor(this.calculatePointerPositionFromVSpeed(e)),this.pointer.set("stroke",this.updatePointerColor(e)),this.canvas.renderAll())}calculatePointerPositionFromVSpeed(e){return e>6e3?-190:e<-6e3?190:e>2e3?-1*(.01125*(e-2e3)+135):e>1e3&&e<=2e3?-1*(.045*(e-1e3)+90):e<-1e3&&e>=-2e3?-1*(.045*(e+1e3)-90):e<-2e3?-1*(.01125*(e+2e3)-135):.09*-e}updatePointerColor(e){return e>=1e3||e<-1e3?"gray":rn.needle_green}}return i.\u0275fac=function(e){return new(e||i)(re(ix),re(wm))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();try{Cm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Cm=!1}let Pa,nd,ts,sn=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function bF(i){return i===fw}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Cm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(re(rf))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Fa(i){return function hB(){if(null==Pa&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pa=!0}))}finally{Pa=Pa||!1}return Pa}()?i:!!i.capture}function rx(){if(null==ts){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ts=!1,ts;if("scrollBehavior"in document.documentElement.style)ts=!0;else{const i=Element.prototype.scrollTo;ts=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return ts}function La(){if("object"!=typeof document||!document)return 0;if(null==nd){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),nd=0,0===i.scrollLeft&&(i.scrollLeft=1,nd=0===i.scrollLeft?1:2),i.remove()}return nd}function Sm(i){return i.composedPath?i.composedPath()[0]:i.target}function Dm(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class PB extends Dt{constructor(t,e){super()}schedule(t,e=0){return this}}const rd={setInterval(i,t,...e){const{delegate:n}=rd;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=rd;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class Em extends PB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return rd.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&rd.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ms(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const ax={now:()=>(ax.delegate||Date).now(),delegate:void 0};class Na{constructor(t,e=Na.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Na.now=ax.now;class Mm extends Na{constructor(t,e=Na.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Tm=new Mm(Em),FB=Tm;function ui(i){return null!=i&&"false"!=`${i}`}function Hi(i,t=0){return function LB(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function sd(i){return Array.isArray(i)?i:[i]}function Ut(i){return null==i?"":"string"==typeof i?i:`${i}px`}function od(i){return i instanceof ut?i.nativeElement:i}function _o(i){return I((t,e)=>{pi(i).subscribe(V(e,()=>e.complete(),u)),!e.closed&&t.subscribe(e)})}const lx=new Set;let vo,BB=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):jB}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function VB(i){if(!lx.has(i))try{vo||(vo=document.createElement("style"),vo.setAttribute("type","text/css"),document.head.appendChild(vo)),vo.sheet&&(vo.sheet.insertRule(`@media ${i} {body{ }}`,0),lx.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(re(sn))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function jB(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let UB=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new P}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return cx(sd(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Gf(cx(sd(e)).map(o=>this._registerQuery(o).observable));return s=Fc(s.pipe(br(1)),s.pipe(function NB(i){return tn((t,e)=>i<=e)}(1),function km(i,t=Tm){return I((e,n)=>{let r=null,s=null,o=null;const c=()=>{if(r){r.unsubscribe(),r=null;const b=s;s=null,n.next(b)}};function m(){const b=o+i,x=t.now();if(x<b)return r=this.schedule(void 0,b-x),void n.add(r);c()}e.subscribe(V(n,b=>{s=b,o=t.now(),r||(r=t.schedule(m,i),n.add(r))},()=>{c(),n.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe(H(o=>{const c={matches:!1,breakpoints:{}};return o.forEach(({matches:m,query:b})=>{c.matches=c.matches||m,c.breakpoints[b]=m}),c}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new me(o=>{const c=m=>this._zone.run(()=>o.next(m));return n.addListener(c),()=>{n.removeListener(c)}}).pipe(Yf(n),H(({matches:o})=>({query:e,matches:o})),_o(this._destroySubject)),mql:n};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(re(BB),re(We))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function cx(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const fx="cdk-high-contrast-black-on-white",mx="cdk-high-contrast-white-on-black",Im="cdk-high-contrast-active";let eV=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=Xe(UB).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Im,fx,mx),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(Im,fx):2===n&&e.add(Im,mx)}}}return i.\u0275fac=function(e){return new(e||i)(re(sn),re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const tV=new ue("cdk-dir-doc",{providedIn:"root",factory:function iV(){return Xe(tt)}}),nV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ba=(()=>{class i{constructor(e){this.value="ltr",this.change=new ft,e&&(this.value=function rV(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?nV.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(re(tV,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Va=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({}),i})();const oV=new ue("mat-sanity-checks",{providedIn:"root",factory:function sV(){return!0}});let ti=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Dm()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(re(eV),re(oV,8),re(tt))},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[Va,Va]}),i})();function aV(i,t){return class extends i{get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function lV(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ui(t)}constructor(...t){super(...t),this._disableRipple=!1}}}class dV{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const _x=Fa({passive:!0,capture:!0});class uV{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Sm(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){const s=this._events.get(e);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,_x)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(n),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,_x)))}}const vx={enterDuration:225,exitDuration:150},bx=Fa({passive:!0,capture:!0}),yx=["mousedown","touchstart"],wx=["mouseup","mouseleave","touchend","touchcancel"];class bo{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=od(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...vx,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function fV(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),c=t-r.left,m=e-r.top,b=s.enterDuration,x=document.createElement("div");x.classList.add("mat-ripple-element"),x.style.left=c-o+"px",x.style.top=m-o+"px",x.style.height=2*o+"px",x.style.width=2*o+"px",null!=n.color&&(x.style.backgroundColor=n.color),x.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(x);const E=window.getComputedStyle(x),O=E.transitionDuration,L="none"===E.transitionProperty||"0s"===O||"0s, 0s"===O||0===r.width&&0===r.height,U=new dV(this,x,n,L);x.style.transform="scale3d(1, 1, 1)",U.state=0,n.persistent||(this._mostRecentTransientRipple=U);let G=null;return!L&&(b||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const te=()=>this._finishRippleTransition(U),fe=()=>this._destroyRipple(U);x.addEventListener("transitionend",te),x.addEventListener("transitioncancel",fe),G={onTransitionEnd:te,onTransitionCancel:fe}}),this._activeRipples.set(U,G),(L||!b)&&this._finishRippleTransition(U),U}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,n={...vx,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=od(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,yx.forEach(n=>{bo._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{wx.forEach(e=>{this._triggerElement.addEventListener(e,this,bx)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=1,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=function ZB(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!function QB(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(yx.forEach(e=>bo._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&wx.forEach(e=>t.removeEventListener(e,this,bx)))}}bo._eventManager=new uV;const ad=new ue("mat-ripple-global-options");let Cx=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new bo(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(W(ut),W(We),W(sn),W(ad,8),W(Gr,8))},i.\u0275dir=Ce({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&ki("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),ld=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,ti]}),i})(),mV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti]}),i})();const pV=["*"],yV=new ue("MAT_CARD_CONFIG");let Am=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}}return i.\u0275fac=function(e){return new(e||i)(W(yV,8))},i.\u0275cmp=Oi({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,n){2&e&&ki("mat-mdc-card-outlined","outlined"===n.appearance)("mdc-card--outlined","outlined"===n.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:pV,decls:1,vars:0,template:function(e,n){1&e&&(mr(),li(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),i})(),xx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=Ce({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),i})(),Om=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=Ce({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),i})(),Sx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,qr,ti]}),i})();const zi=new ue("NgValueAccessor"),Pj=["knob"],Fj=["valueIndicatorContainer"];function Lj(i,t){if(1&i&&(wt(0,"div",4,5)(2,"div",6)(3,"span",7),ta(4),Mt()()()),2&i){const e=Ti();St(4),Fh(e.valueIndicatorText)}}const Nj=["trackActive"];function Bj(i,t){if(1&i&&Qt(0,"div"),2&i){const e=t.$implicit,n=t.index,r=Ti(3);kb(0===e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Jl("transform",r._calcTickMarkTransform(n))}}function Vj(i,t){if(1&i&&(Kl(0),Pt(1,Bj,1,4,"div",11),Zl()),2&i){const e=Ti(2);St(1),yt("ngForOf",e._tickMarks)}}function jj(i,t){if(1&i&&(wt(0,"div",8,9),Pt(2,Vj,2,1,"ng-container",10),Mt()),2&i){const e=Ti();St(2),yt("ngIf",e._cachedWidth)}}function Uj(i,t){if(1&i&&Qt(0,"mat-slider-visual-thumb",7),2&i){const e=Ti();yt("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}const Hj=["*"],bd=new ue("_MatSlider"),IS=new ue("_MatSliderThumb"),AS=new ue("_MatSliderRangeThumb"),OS=new ue("_MatSliderVisualThumb");let zj=(()=>{class i{constructor(e,n,r,s){this._cdr=e,this._ngZone=n,this._slider=s,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._onPointerMove=o=>{if(this._sliderInput._isFocused)return;const c=this._hostElement.getBoundingClientRect(),m=this._isSliderThumbHovered(o,c);this._isHovered=m,m?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=()=>{this._isActive=!0,this._showActiveRipple()},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef)},this._hostElement=r.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const e=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{e.addEventListener("pointermove",this._onPointerMove),e.addEventListener("pointerdown",this._onDragStart),e.addEventListener("pointerup",this._onDragEnd),e.addEventListener("pointerleave",this._onMouseLeave),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const e=this._sliderInputEl;e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return 0===e?.state||1===e?.state}_showRipple(e,n){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(1===this.thumbPosition?2:1)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||n))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const n=this._getSibling();n._isShowingAnyRipple()||(this._hideValueIndicator(),n._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(1===this.thumbPosition?2:1)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}_isSliderThumbHovered(e,n){const r=n.width/2,m=e.clientY-(n.y+r);return Math.pow(e.clientX-(n.x+r),2)+Math.pow(m,2)<Math.pow(r,2)}}return i.\u0275fac=function(e){return new(e||i)(W(On),W(We),W(ut),W(bd))},i.\u0275cmp=Oi({type:i,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(e,n){if(1&e&&(gr(Cx,5),gr(Pj,5),gr(Fj,5)),2&e){let r;ci(r=di())&&(n._ripple=r.first),ci(r=di())&&(n._knob=r.first),ci(r=di())&&(n._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[ot([{provide:OS,useExisting:i}])],decls:4,vars:2,consts:[["class","mdc-slider__value-indicator-container",4,"ngIf"],[1,"mdc-slider__thumb-knob"],["knob",""],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator-container"],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(e,n){1&e&&(Pt(0,Lj,5,1,"div",0),Qt(1,"div",1,2)(3,"div",3)),2&e&&(yt("ngIf",n.discrete),St(3),yt("matRippleDisabled",!0))},dependencies:[Tc,Cx],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),i})();const $j=aV(lV(class{constructor(i){this._elementRef=i}}),"primary");let Wj=(()=>{class i extends $j{get disabled(){return this._disabled}set disabled(e){this._disabled=ui(e);const n=this._getInput(2),r=this._getInput(1);n&&(n.disabled=this._disabled),r&&(r.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=ui(e),this._updateValueIndicatorUIs()}get showTickMarks(){return this._showTickMarks}set showTickMarks(e){this._showTickMarks=ui(e)}get min(){return this._min}set min(e){const n=Hi(e,this._min);this._min!==n&&this._updateMin(n)}_updateMin(e){const n=this._min;this._min=e,this._isRange?this._updateMinRange({old:n,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){const n=this._getInput(2),r=this._getInput(1),s=n.value,o=r.value;r.min=e.new,n.min=Math.max(e.new,r.value),r.max=Math.min(n.max,n.value),r._updateWidthInactive(),n._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(n,r):this._onTranslateXChangeBySideEffect(r,n),s!==n.value&&this._onValueChange(n),o!==r.value&&this._onValueChange(r)}_updateMinNonRange(e){const n=this._getInput(2);if(n){const r=n.value;n.min=e,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get max(){return this._max}set max(e){const n=Hi(e,this._max);this._max!==n&&this._updateMax(n)}_updateMax(e){const n=this._max;this._max=e,this._isRange?this._updateMaxRange({old:n,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){const n=this._getInput(2),r=this._getInput(1),s=n.value,o=r.value;n.max=e.new,r.max=Math.min(e.new,n.value),n.min=r.value,n._updateWidthInactive(),r._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(r,n):this._onTranslateXChangeBySideEffect(n,r),s!==n.value&&this._onValueChange(n),o!==r.value&&this._onValueChange(r)}_updateMaxNonRange(e){const n=this._getInput(2);if(n){const r=n.value;n.max=e,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get step(){return this._step}set step(e){const n=Hi(e,this._step);this._step!==n&&this._updateStep(n)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const e=this._getInput(2),n=this._getInput(1),r=e.value,s=n.value,o=n.value;e.min=this._min,n.max=this._max,e.step=this._step,n.step=this._step,this._platform.SAFARI&&(e.value=e.value,n.value=n.value),e.min=Math.max(this._min,n.value),n.max=Math.min(this._max,e.value),n._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(n,e):this._onTranslateXChangeBySideEffect(e,n),r!==e.value&&this._onValueChange(e),s!==n.value&&this._onValueChange(n)}_updateStepNonRange(){const e=this._getInput(2);if(e){const n=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),n!==e.value&&this._onValueChange(e)}}constructor(e,n,r,s,o,c,m){super(s),this._ngZone=e,this._cdr=n,this._platform=r,this._dir=o,this._globalRippleOptions=c,this._disabled=!1,this._discrete=!1,this._showTickMarks=!1,this._min=0,this._max=100,this._step=0,this.displayWith=b=>`${b}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===m,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const e=this._getInput(2),n=this._getInput(1);this._isRange=!!e&&!!n,this._cdr.detectChanges();const r=this._getThumb(2);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._inputOffset=this._knobRadius,this._isRange?this._initUIRange(e,n):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,n){e.initProps(),e.initUI(),n.initProps(),n.initUI(),e._updateMinMax(),n._updateMinMax(),e._updateStaticStyles(),n._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),n._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const e=this._getInput(2),n=this._getInput(1);e._setIsLeftThumb(),n._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),n.translateX=n._calcTranslateXByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateWidthInactive(),n._updateWidthInactive(),e._updateThumbUIByValue(),n._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(2)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(1)._isActive||this._getThumb(2)._isActive}_getValue(e=2){const n=this._getInput(e);return n?n.value:this.min}_skipUpdate(){return!(!this._getInput(1)?._skipUIUpdate&&!this._getInput(2)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){const n=this._trackActive.nativeElement.style,r=e.left!==n.left&&e.right!==n.right;n.left=e.left,n.right=e.right,n.transformOrigin=e.transformOrigin,r?(this._elementRef.nativeElement.classList.add("mat-mdc-slider-disable-track-animation"),this._ngZone.onStable.pipe(br(1)).subscribe(()=>{this._elementRef.nativeElement.classList.remove("mat-mdc-slider-disable-track-animation"),n.transform=e.transform})):n.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,n){this._hasViewInitialized&&(e._updateThumbUIByValue(),n._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const e=this._getInput(2),n=this._getInput(1);e._updateThumbUIByValue(),n._updateThumbUIByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateMinMax(),n._updateMinMax(),e._updateWidthInactive(),n._updateWidthInactive()}else{const e=this._getInput(2);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const e=this._getInput(1),n=this._getInput(2);return!(!e||!n)&&n.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){const n=e.getSibling(),r=this._getThumb(e.thumbPosition);this._getThumb(n.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){this._skipUpdate()||(this._getThumb(2===e.thumbPosition?2:1)._hostElement.style.transform=`translateX(${e.translateX}px)`)}_updateValueIndicatorUI(e){if(this._skipUpdate())return;const n=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext=n:e._hostElement.setAttribute("aria-valuetext",n),this.discrete){1===e.thumbPosition?this.startValueIndicatorText=n:this.endValueIndicatorText=n;const r=this._getThumb(e.thumbPosition);n.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const e=this._getInput(2),n=this._getInput(1);e&&this._updateValueIndicatorUI(e),n&&this._updateValueIndicatorUI(n)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const e=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*r-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){const n=e.getSibling();if(!n||!this._cachedWidth)return;const r=Math.abs(n.translateX-e.translateX)/this._cachedWidth;this._setTrackActiveStyles(e._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-n.translateX+"px",transformOrigin:"right",transform:`scaleX(${r})`}:{left:`${n.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(e){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){const n=this._getValue();let r=Math.max(Math.round((n-this.min)/e),0),s=Math.max(Math.round((this.max-n)/e),0);this._isRtl?r++:s++,this._tickMarks=Array(r).fill(0).concat(Array(s).fill(1))}_updateTickMarkUIRange(e){const n=this._getValue(),r=this._getValue(1),s=Math.max(Math.floor((r-this.min)/e),0),o=Math.max(Math.floor((n-r)/e)+1,0),c=Math.max(Math.floor((this.max-n)/e),0);this._tickMarks=Array(s).fill(1).concat(Array(o).fill(0),Array(c).fill(1))}_getInput(e){return 2===e&&this._input?this._input:this._inputs?.length?1===e?this._inputs.first:this._inputs.last:void 0}_getThumb(e){return 2===e?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}}return i.\u0275fac=function(e){return new(e||i)(W(We),W(On),W(sn),W(ut),W(Ba,8),W(ad,8),W(Gr,8))},i.\u0275cmp=Oi({type:i,selectors:[["mat-slider"]],contentQueries:function(e,n,r){if(1&e&&(Jn(r,IS,5),Jn(r,AS,4)),2&e){let s;ci(s=di())&&(n._input=s.first),ci(s=di())&&(n._inputs=s)}},viewQuery:function(e,n){if(1&e&&(gr(Nj,5),gr(OS,5)),2&e){let r;ci(r=di())&&(n._trackActive=r.first),ci(r=di())&&(n._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:10,hostBindings:function(e,n){2&e&&ki("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations)},inputs:{color:"color",disableRipple:"disableRipple",disabled:"disabled",discrete:"discrete",showTickMarks:"showTickMarks",min:"min",max:"max",step:"step",displayWith:"displayWith"},exportAs:["matSlider"],features:[ot([{provide:bd,useExisting:i}]),Ze],ngContentSelectors:Hj,decls:9,vars:5,consts:[[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],["trackActive",""],["class","mdc-slider__tick-marks",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText"],[1,"mdc-slider__tick-marks"],["tickMarkContainer",""],[4,"ngIf"],[3,"class","transform",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(mr(),li(0),wt(1,"div",0),Qt(2,"div",1),wt(3,"div",2),Qt(4,"div",3,4),Mt(),Pt(6,jj,3,1,"div",5),Mt(),Pt(7,Uj,1,3,"mat-slider-visual-thumb",6),Qt(8,"mat-slider-visual-thumb",7)),2&e&&(St(6),yt("ngIf",n.showTickMarks),St(1),yt("ngIf",n._isRange),St(1),yt("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[aw,Tc,zj],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000));border-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color, var(--mdc-theme-primary, #6200ee));opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mdc-theme-on-surface, #000));opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mdc-theme-primary, #6200ee));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mdc-theme-on-surface, #000));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color, #666666);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color, #666666)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height, 6px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 6px)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height, 6px)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size, 2px);width:var(--mdc-slider-with-tick-marks-container-size, 2px)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking, 0.0071428571em);font-size:var(--mdc-slider-label-label-text-size, 0.875rem);font-family:var(--mdc-slider-label-label-text-font, Roboto, sans-serif);font-weight:var(--mdc-slider-label-label-text-weight, 500);line-height:var(--mdc-slider-label-label-text-line-height, 1.375rem)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape, 50%);width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-style:solid;border-width:calc(var(--mdc-slider-handle-height, 20px) / 2) calc(var(--mdc-slider-handle-width, 20px) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape, 50%)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color, #fff);border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator{opacity:var(--mat-mdc-slider-value-indicator-opacity, 1)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-mdc-slider-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-mdc-slider-hover-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-mdc-slider-focus-ripple-color, transparent)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})();const Xj={provide:zi,useExisting:ht(()=>ep),multi:!0};let ep=(()=>{class i{get value(){return Hi(this._hostElement.value)}set value(e){const n=Hi(e).toString();this._hasSetInitialValue?this._isActive||(this._hostElement.value=n,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges()):this._initialValue=n}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=0,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return Hi(this._hostElement.min)}set min(e){this._hostElement.min=Hi(e).toString(),this._cdr.detectChanges()}get max(){return Hi(this._hostElement.max)}set max(e){this._hostElement.max=Hi(e).toString(),this._cdr.detectChanges()}get step(){return Hi(this._hostElement.step)}set step(e){this._hostElement.step=Hi(e).toString(),this._cdr.detectChanges()}get disabled(){return ui(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=ui(e),this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}constructor(e,n,r,s){this._ngZone=e,this._elementRef=n,this._cdr=r,this._slider=s,this.valueChange=new ft,this.dragStart=new ft,this.dragEnd=new ft,this.thumbPosition=2,this._knobRadius=8,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new P,this._skipUIUpdate=!1,this._onChangeFn=()=>{},this._onTouchedFn=()=>{},this._hostElement=n.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._setIsFocused(!0)}_onChange(){this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this.valueChange.emit(this.value),this._onChangeFn(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){this.disabled||0!==e.button||(this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value})))}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){const n=e.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,s=0===this._slider.step?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/s),b=Math.round((this._slider._isRtl?1-n/r:n/r)*o)/o*(this._slider.max-this._slider.min)+this._slider.min,x=Math.round(b/s)*s;if(x===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation}));this.value=x,this.valueChange.emit(this.value),this._onChangeFn(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive()))}_clamp(e){return Math.max(Math.min(e,this._slider._cachedWidth),0)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*this._slider._cachedWidth:this.percentage*this._slider._cachedWidth}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding}px)`}_updateWidthInactive(){this._hostElement.style.padding="0px",this._hostElement.style.width="calc(100% + 48px)",this._hostElement.style.left="-24px"}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,n){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(n)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){this.value=e}registerOnChange(e){this._onChangeFn=e}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return i.\u0275fac=function(e){return new(e||i)(W(We),W(ut),W(On),W(bd))},i.\u0275dir=Ce({type:i,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(e,n){1&e&&Jt("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),2&e&&yi("aria-valuetext",n._valuetext)},inputs:{value:"value"},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[ot([Xj,{provide:IS,useExisting:i}])]}),i})(),RS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,qr,ld]}),i})(),Kj=(()=>{class i{constructor(e){this.dataService=e,this.value=0}ngOnInit(){}speedChange(e){this.value=1e3*e,this.dataService.setVerticalSpeed(this.value)}}return i.\u0275fac=function(e){return new(e||i)(W(wm))},i.\u0275cmp=Oi({type:i,selectors:[["app-vsi-controler"]],decls:11,vars:5,consts:[[3,"min","max","step"],["matSliderThumb","",3,"value","valueChange"],[1,"info-container"],[1,"info-label"],[1,"info-value"]],template:function(e,n){1&e&&(wt(0,"mat-card")(1,"mat-card-title"),ta(2," Vertical Speed Indicator "),Mt(),wt(3,"mat-card-content")(4,"mat-slider",0)(5,"input",1),Jt("valueChange",function(s){return n.speedChange(s)}),Mt()(),wt(6,"div",2)(7,"label",3),ta(8,"Vertical Speed:"),Mt(),wt(9,"label",4),ta(10),Mt()()()()),2&e&&(St(4),yt("min",-6.5)("max",6.5)("step",.1),St(1),yt("value",0),St(5),tc("",n.value," p/min"))},dependencies:[Wj,ep,Am,Om,xx],styles:["[_nghost-%COMP%]{padding:20px}mat-card-title[_ngcontent-%COMP%]{padding:0 20px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-slider[_ngcontent-%COMP%]{flex-grow:1}.info-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.info-container[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700}.info-container[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{align-self:center;font-size:smaller}"]}),i})(),Zj=(()=>{class i{constructor(e,n,r){this.service=e,this.dataService=n,this.verticalSpeedIndicator=r,this.canvasWidth=800,this.canvasHeight=500}ngOnInit(){this.canvas=new jt.fabric.Canvas("PFD_canvas"),this.buildBackground(),this.buildVerticalIndicatorSpeed(),this.test(),this.canvas.renderAll(),this.dataService.getVerticalSpeed$().subscribe(e=>this.testUpdate(e))}buildBackground(){let n=new jt.fabric.Group([new jt.fabric.Rect({fill:"#8FAABA",width:this.canvasWidth-10,height:this.canvasHeight-10,stroke:"black",strokeWidth:5,opacity:.5})]);this.canvas.add(n)}buildVerticalIndicatorSpeed(){this.verticalSpeedIndicator.setCanvas(this.canvas),this.canvas.add(this.verticalSpeedIndicator.build())}test(){}testUpdate(e){}}return i.\u0275fac=function(e){return new(e||i)(W(ix),W(wm),W(uB))},i.\u0275cmp=Oi({type:i,selectors:[["app-root"]],decls:4,vars:0,consts:[["id","PFD_canvas","width","800","height","500"]],template:function(e,n){1&e&&(wt(0,"mat-card")(1,"mat-card-content"),Qt(2,"canvas",0)(3,"app-vsi-controler"),Mt()())},dependencies:[Am,Om,Kj],styles:["[_nghost-%COMP%]{display:flex;padding:20px}mat-card[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;flex-grow:1}"]}),i})();class PS{}class Qj{}const sr="*";function LS(i,t=null){return{type:2,steps:i,options:t}}function rs(i){return{type:6,styles:i,offset:null}}function BS(i){Promise.resolve().then(i)}class Wa{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class VS{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?BS(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,c)=>Math.max(o,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function jS(i){return new J(3e3,!1)}function RU(){return typeof window<"u"&&typeof window.document<"u"}function rp(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Er(i){switch(i.length){case 0:return new Wa;case 1:return i[0];default:return new VS(i)}}function US(i,t,e,n,r=new Map,s=new Map){const o=[],c=[];let m=-1,b=null;if(n.forEach(x=>{const E=x.get("offset"),k=E==m,O=k&&b||new Map;x.forEach((L,U)=>{let G=U,te=L;if("offset"!==U)switch(G=t.normalizePropertyName(G,o),te){case"!":te=r.get(U);break;case sr:te=s.get(U);break;default:te=t.normalizeStyleValue(U,G,te,o)}O.set(G,te)}),k||c.push(O),b=O,m=E}),o.length)throw function wU(i){return new J(3502,!1)}();return c}function sp(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&op(e,"start",i)));break;case"done":i.onDone(()=>n(e&&op(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&op(e,"destroy",i)))}}function op(i,t,e){const s=ap(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function ap(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function $i(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function HS(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let lp=(i,t)=>!1,zS=(i,t,e)=>[],$S=null;function cp(i){const t=i.parentNode||i.host;return t===$S?null:t}(rp()||typeof Element<"u")&&(RU()?($S=(()=>document.documentElement)(),lp=(i,t)=>{for(;t;){if(t===i)return!0;t=cp(t)}return!1}):lp=(i,t)=>i.contains(t),zS=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let ss=null,WS=!1;const GS=lp,XS=zS;let YS=(()=>{class i{validateStyleProperty(e){return function FU(i){ss||(ss=function LU(){return typeof document<"u"?document.body:null}()||{},WS=!!ss.style&&"WebkitAppearance"in ss.style);let t=!0;return ss.style&&!function PU(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ss.style,!t&&WS&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ss.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return GS(e,n)}getParentElement(e){return cp(e)}query(e,n,r){return XS(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,c=[],m){return new Wa(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),dp=(()=>{class i{}return i.NOOP=new YS,i})();const up="ng-enter",yd="ng-leave",wd="ng-trigger",Cd=".ng-trigger",KS="ng-animating",hp=".ng-animating";function or(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:fp(parseFloat(t[1]),t[2])}function fp(i,t){return"s"===t?1e3*i:i}function xd(i,t,e){return i.hasOwnProperty("duration")?i:function VU(i,t,e){let r,s=0,o="";if("string"==typeof i){const c=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return t.push(jS()),{duration:0,delay:0,easing:""};r=fp(parseFloat(c[1]),c[2]);const m=c[3];null!=m&&(s=fp(parseFloat(m),c[4]));const b=c[5];b&&(o=b)}else r=i;if(!e){let c=!1,m=t.length;r<0&&(t.push(function Jj(){return new J(3100,!1)}()),c=!0),s<0&&(t.push(function eU(){return new J(3101,!1)}()),c=!0),c&&t.splice(m,0,jS())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Ga(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function ZS(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Mr(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function JS(i,t,e){return e?t+":"+e+";":""}function eD(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=JS(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=JS(0,zU(e),i.style[e]));i.setAttribute("style",t)}function Nn(i,t,e){i.style&&(t.forEach((n,r)=>{const s=pp(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),rp()&&eD(i))}function os(i,t){i.style&&(t.forEach((e,n)=>{const r=pp(n);i.style[r]=""}),rp()&&eD(i))}function Xa(i){return Array.isArray(i)?1==i.length?i[0]:LS(i):i}const mp=new RegExp("{{\\s*(.+?)\\s*}}","g");function tD(i){let t=[];if("string"==typeof i){let e;for(;e=mp.exec(i);)t.push(e[1]);mp.lastIndex=0}return t}function Ya(i,t,e){const n=i.toString(),r=n.replace(mp,(s,o)=>{let c=t[o];return null==c&&(e.push(function iU(i){return new J(3003,!1)}()),c=""),c.toString()});return r==n?i:r}function Sd(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const HU=/-+([a-z0-9])/g;function pp(i){return i.replace(HU,(...t)=>t[1].toUpperCase())}function zU(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wi(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function nU(i){return new J(3004,!1)}()}}function iD(i,t){return window.getComputedStyle(i)[t]}function qU(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function KU(i,t,e){if(":"==i[0]){const m=function ZU(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function _U(i){return new J(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof m)return void t.push(m);i=m}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function gU(i){return new J(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(nD(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(nD(o,r))}(n,e,t)):e.push(i),e}const Td=new Set(["true","1"]),kd=new Set(["false","0"]);function nD(i,t){const e=Td.has(i)||kd.has(i),n=Td.has(t)||kd.has(t);return(r,s)=>{let o="*"==i||i==r,c="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?Td.has(i):kd.has(i)),!c&&n&&"boolean"==typeof s&&(c=s?Td.has(t):kd.has(t)),o&&c}}const QU=new RegExp("s*:selfs*,?","g");function gp(i,t,e,n){return new JU(i).build(t,e,n)}class JU{constructor(t){this._driver=t}build(t,e,n){const r=new iH(e);return this._resetContextStyleTimingState(r),Wi(this,Xa(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function sU(){return new J(3006,!1)}()),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(e),0==c.type){const m=c,b=m.name;b.toString().split(/\s*,\s*/).forEach(x=>{m.name=x,s.push(this.visitState(m,e))}),m.name=b}else if(1==c.type){const m=this.visitTransition(c,e);n+=m.queryCount,r+=m.depCount,o.push(m)}else e.errors.push(function oU(){return new J(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(c=>{c instanceof Map&&c.forEach(m=>{tD(m).forEach(b=>{o.hasOwnProperty(b)||s.add(b)})})}),s.size&&(Sd(s.values()),e.errors.push(function aU(i,t){return new J(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Wi(this,Xa(t.animation),e);return{type:1,matchers:qU(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:as(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Wi(this,n,e)),options:as(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const c=Wi(this,o,e);return r=Math.max(r,e.currentTime),c});return e.currentTime=r,{type:3,steps:s,options:as(t.options)}}visitAnimate(t,e){const n=function rH(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return _p(xd(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=_p(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=xd(e,t);return _p(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:rs({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,c=!1;if(!o){c=!0;const b={};n.easing&&(b.easing=n.easing),o=rs(b)}e.currentTime+=n.duration+n.delay;const m=this.visitStyle(o,e);m.isEmptyStep=c,r=m}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let c of r)"string"==typeof c?c===sr?n.push(c):e.errors.push(new J(3002,!1)):n.push(ZS(c));let s=!1,o=null;return n.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(o=c.get("easing"),c.delete("easing")),!s))for(let m of c.values())if(m.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,m)=>{const b=e.collectedStyles.get(e.currentQuerySelector),x=b.get(m);let E=!0;x&&(s!=r&&s>=x.startTime&&r<=x.endTime&&(e.errors.push(function cU(i,t,e,n,r){return new J(3010,!1)}()),E=!1),s=x.startTime),E&&b.set(m,{startTime:s,endTime:r}),e.options&&function UU(i,t,e){const n=t.params||{},r=tD(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function tU(i){return new J(3001,!1)}())})}(c,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function dU(){return new J(3011,!1)}()),n;let s=0;const o=[];let c=!1,m=!1,b=0;const x=t.steps.map(te=>{const fe=this._makeStyleAst(te,e);let Q=null!=fe.offset?fe.offset:function nH(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(fe.styles),Se=0;return null!=Q&&(s++,Se=fe.offset=Q),m=m||Se<0||Se>1,c=c||Se<b,b=Se,o.push(Se),fe});m&&e.errors.push(function uU(){return new J(3012,!1)}()),c&&e.errors.push(function hU(){return new J(3200,!1)}());const E=t.steps.length;let k=0;s>0&&s<E?e.errors.push(function fU(){return new J(3202,!1)}()):0==s&&(k=1/(E-1));const O=E-1,L=e.currentTime,U=e.currentAnimateTimings,G=U.duration;return x.forEach((te,fe)=>{const Q=k>0?fe==O?1:k*fe:o[fe],Se=Q*G;e.currentTime=L+U.delay+Se,U.duration=Se,this._validateStyleAst(te,e),te.offset=Q,n.styles.push(te)}),n}visitReference(t,e){return{type:8,animation:Wi(this,Xa(t.animation),e),options:as(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:as(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:as(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function eH(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(QU,"")),i=i.replace(/@\*/g,Cd).replace(/@\w+/g,e=>Cd+"-"+e.slice(1)).replace(/:animating/g,hp),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,$i(e.collectedStyles,e.currentQuerySelector,new Map);const c=Wi(this,Xa(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:c,originalSelector:t.selector,options:as(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function mU(){return new J(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:xd(t.timings,e.errors,!0);return{type:12,animation:Wi(this,Xa(t.animation),e),timings:n,options:null}}}class iH{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function as(i){return i?(i=Ga(i)).params&&(i.params=function tH(i){return i?Ga(i):null}(i.params)):i={},i}function _p(i,t,e){return{duration:i,delay:t,easing:e}}function vp(i,t,e,n,r,s,o=null,c=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:c}}class Id{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const aH=new RegExp(":enter","g"),cH=new RegExp(":leave","g");function bp(i,t,e,n,r,s=new Map,o=new Map,c,m,b=[]){return(new dH).buildKeyframes(i,t,e,n,r,s,o,c,m,b)}class dH{buildKeyframes(t,e,n,r,s,o,c,m,b,x=[]){b=b||new Id;const E=new yp(t,e,b,r,s,x,[]);E.options=m;const k=m.delay?or(m.delay):0;E.currentTimeline.delayNextStep(k),E.currentTimeline.setStyles([o],null,E.errors,m),Wi(this,n,E);const O=E.timelines.filter(L=>L.containsAnimation());if(O.length&&c.size){let L;for(let U=O.length-1;U>=0;U--){const G=O[U];if(G.element===e){L=G;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([c],null,E.errors,m)}return O.length?O.map(L=>L.buildKeyframes()):[vp(e,[],[],[],0,k,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:or(Ya(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?or(n.duration):null,c=null!=n.delay?or(n.delay):null;return 0!==o&&t.forEach(m=>{const b=e.appendInstructionToTimeline(m,o,c);s=Math.max(s,b.duration+b.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Wi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ad);const o=or(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Wi(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?or(t.options.delay):0;t.steps.forEach(o=>{const c=e.createSubContext(t.options);s&&c.delayNextStep(s),Wi(this,o,c),r=Math.max(r,c.currentTimeline.currentTime),n.push(c.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return xd(e.params?Ya(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,c=e.createSubContext().currentTimeline;c.easing=n.easing,t.styles.forEach(m=>{c.forwardTime((m.offset||0)*s),c.setStyles(m.styles,m.easing,e.errors,e.options),c.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(c),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?or(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ad);let o=n;const c=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=c.length;let m=null;c.forEach((b,x)=>{e.currentQueryIndex=x;const E=e.createSubContext(t.options,b);s&&E.delayNextStep(s),b===e.element&&(m=E.currentTimeline),Wi(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),c=o*(e.currentQueryTotal-1);let m=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=c-m;break;case"full":m=n.currentStaggerTime}const x=e.currentTimeline;m&&x.delayNextStep(m);const E=x.currentTime;Wi(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-E+(r.startTime-n.currentTimeline.startTime)}}const Ad={};class yp{constructor(t,e,n,r,s,o,c,m){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ad,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Od(this._driver,e,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=or(n.duration)),null!=n.delay&&(r.delay=or(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(c=>{(!e||!o.hasOwnProperty(c))&&(o[c]=Ya(s[c],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new yp(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Ad,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new uH(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let c=[];if(r&&c.push(this.element),t.length>0){t=(t=t.replace(aH,"."+this._enterClassName)).replace(cH,"."+this._leaveClassName);let b=this._driver.query(this.element,t,1!=n);0!==n&&(b=n<0?b.slice(b.length+n,b.length):b.slice(0,n)),c.push(...b)}return!s&&0==c.length&&o.push(function pU(i){return new J(3014,!1)}()),c}}class Od{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Od(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||sr),this._currentKeyframe.set(e,sr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function hH(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,sr)}else Mr(r,e)}),e}(t,this._globalTimelineStyles);for(let[c,m]of o){const b=Ya(m,s,n);this._pendingStyles.set(c,b),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??sr),this._updateStyle(c,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((c,m)=>{const b=Mr(c,new Map,this._backFill);b.forEach((x,E)=>{"!"===x?t.add(E):x===sr&&e.add(E)}),n||b.set("offset",m/this.duration),r.push(b)});const s=t.size?Sd(t.values()):[],o=e.size?Sd(e.values()):[];if(n){const c=r[0],m=new Map(c);c.set("offset",0),m.set("offset",1),r=[c,m]}return vp(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class uH extends Od{constructor(t,e,n,r,s,o,c=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,c=e/o,m=Mr(t[0]);m.set("offset",0),s.push(m);const b=Mr(t[0]);b.set("offset",oD(c)),s.push(b);const x=t.length-1;for(let E=1;E<=x;E++){let k=Mr(t[E]);const O=k.get("offset");k.set("offset",oD((e+O*n)/o)),s.push(k)}n=o,e=0,r="",t=s}return vp(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function oD(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class wp{}const fH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class mH extends wp{normalizePropertyName(t,e){return pp(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(fH.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const c=n.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&r.push(function rU(i,t){return new J(3005,!1)}())}return o+s}}function aD(i,t,e,n,r,s,o,c,m,b,x,E,k){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:c,queriedElements:m,preStyleProps:b,postStyleProps:x,totalTime:E,errors:k}}const Cp={};class lD{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function pH(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,c,m,b,x){const E=[],k=this.ast.options&&this.ast.options.params||Cp,L=this.buildStyles(n,c&&c.params||Cp,E),U=m&&m.params||Cp,G=this.buildStyles(r,U,E),te=new Set,fe=new Map,Q=new Map,Se="void"===r,et={params:gH(U,k),delay:this.ast.options?.delay},nt=x?[]:bp(t,e,this.ast.animation,s,o,L,G,et,b,E);let fi=0;if(nt.forEach(lr=>{fi=Math.max(lr.duration+lr.delay,fi)}),E.length)return aD(e,this._triggerName,n,r,Se,L,G,[],[],fe,Q,fi,E);nt.forEach(lr=>{const cr=lr.element,uE=$i(fe,cr,new Set);lr.preStyleProps.forEach(ds=>uE.add(ds));const Ja=$i(Q,cr,new Set);lr.postStyleProps.forEach(ds=>Ja.add(ds)),cr!==e&&te.add(cr)});const ar=Sd(te.values());return aD(e,this._triggerName,n,r,Se,L,G,nt,ar,fe,Q,fi)}}function gH(i,t){const e=Ga(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class _H{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Ga(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,c)=>{o&&(o=Ya(o,r,e));const m=this.normalizer.normalizePropertyName(c,e);o=this.normalizer.normalizeStyleValue(c,m,o,e),n.set(c,o)})}),n}}class bH{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new _H(r.style,r.options&&r.options.params||{},n))}),cD(this.states,"true","1"),cD(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new lD(t,r,this.states))}),this.fallbackTransition=function yH(i,t,e){return new lD(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,c)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function cD(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const wH=new Id;class CH{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=gp(this._driver,e,n,[]);if(n.length)throw function CU(i){return new J(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=US(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const c=new Map;if(s?(o=bp(this._driver,e,s,up,yd,new Map,new Map,n,wH,r),o.forEach(x=>{const E=$i(c,x.element,new Map);x.postStyleProps.forEach(k=>E.set(k,null))})):(r.push(function xU(){return new J(3300,!1)}()),o=[]),r.length)throw function SU(i){return new J(3504,!1)}();c.forEach((x,E)=>{x.forEach((k,O)=>{x.set(O,this._driver.computeStyle(E,O,sr))})});const b=Er(o.map(x=>{const E=c.get(x.element);return this._buildPlayer(x,new Map,E)}));return this._playersById.set(t,b),b.onDestroy(()=>this.destroy(t)),this.players.push(b),b}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function DU(i){return new J(3301,!1)}();return e}listen(t,e,n,r){const s=ap(e,"","","");return sp(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const dD="ng-animate-queued",xp="ng-animate-disabled",MH=[],uD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},on="__ng_removed";class Sp{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function OH(i){return i??null}(n?t.value:t),n){const s=Ga(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const qa="void",Dp=new Sp(qa);class kH{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,an(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function EU(i,t){return new J(3302,!1)}();if(null==n||0==n.length)throw function MU(i){return new J(3303,!1)}();if(!function RH(i){return"start"==i||"done"==i}(n))throw function TU(i,t){return new J(3400,!1)}();const s=$i(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const c=$i(this._engine.statesByElement,t,new Map);return c.has(e)||(an(t,wd),an(t,wd+"-"+e),c.set(e,Dp)),()=>{this._engine.afterFlush(()=>{const m=s.indexOf(o);m>=0&&s.splice(m,1),this._triggers.has(e)||c.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function kU(i){return new J(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new Ep(this.id,e,t);let c=this._engine.statesByElement.get(t);c||(an(t,wd),an(t,wd+"-"+e),this._engine.statesByElement.set(t,c=new Map));let m=c.get(e);const b=new Sp(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&m&&b.absorbOptions(m.options),c.set(e,b),m||(m=Dp),b.value!==qa&&m.value===b.value){if(!function LH(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(m.params,b.params)){const U=[],G=s.matchStyles(m.value,m.params,U),te=s.matchStyles(b.value,b.params,U);U.length?this._engine.reportError(U):this._engine.afterFlush(()=>{os(t,G),Nn(t,te)})}return}const k=$i(this._engine.playersByElement,t,[]);k.forEach(U=>{U.namespaceId==this.id&&U.triggerName==e&&U.queued&&U.destroy()});let O=s.matchTransition(m.value,b.value,t,b.params),L=!1;if(!O){if(!r)return;O=s.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:O,fromState:m,toState:b,player:o,isFallbackTransition:L}),L||(an(t,dD),o.onStart(()=>{wo(t,dD)})),o.onDone(()=>{let U=this.players.indexOf(o);U>=0&&this.players.splice(U,1);const G=this._engine.playersByElement.get(t);if(G){let te=G.indexOf(o);te>=0&&G.splice(te,1)}}),this.players.push(o),k.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Cd,!0);n.forEach(r=>{if(r[on])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const c=[];if(s.forEach((m,b)=>{if(o.set(b,m.value),this._triggers.has(b)){const x=this.trigger(t,b,qa,r);x&&c.push(x)}}),c.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Er(c).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const m=this._triggers.get(o).fallbackTransition,b=n.get(o)||Dp,x=new Sp(qa),E=new Ep(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:m,fromState:b,toState:x,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[on];(!s||s===uD)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){an(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(c=>{if(c.name==n.triggerName){const m=ap(s,n.triggerName,n.fromState.value,n.toState.value);m._data=t,sp(n.player,c.phase,m,c.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class IH{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new kH(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,c=this.driver.getParentElement(e);for(;c;){const m=r.get(c);if(m){const b=n.indexOf(m);n.splice(b+1,0,t),o=!0;break}c=this.driver.getParentElement(c)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(Rd(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Rd(e))return;const s=e[on];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),an(t,xp)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wo(t,xp))}removeNode(t,e,n,r){if(Rd(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[on]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return Rd(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Cd,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,hp,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Er(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[on];if(e&&e.setForRemoval){if(t[on]=uD,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(xp)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)an(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Er(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function IU(i){return new J(3402,!1)}()}_flushAnimations(t,e){const n=new Id,r=[],s=new Map,o=[],c=new Map,m=new Map,b=new Map,x=new Set;this.disabledNodes.forEach(Me=>{x.add(Me);const Ae=this.driver.query(Me,".ng-animate-queued",!0);for(let Le=0;Le<Ae.length;Le++)x.add(Ae[Le])});const E=this.bodyNode,k=Array.from(this.statesByElement.keys()),O=mD(k,this.collectedEnterElements),L=new Map;let U=0;O.forEach((Me,Ae)=>{const Le=up+U++;L.set(Ae,Le),Me.forEach(it=>an(it,Le))});const G=[],te=new Set,fe=new Set;for(let Me=0;Me<this.collectedLeaveElements.length;Me++){const Ae=this.collectedLeaveElements[Me],Le=Ae[on];Le&&Le.setForRemoval&&(G.push(Ae),te.add(Ae),Le.hasAnimation?this.driver.query(Ae,".ng-star-inserted",!0).forEach(it=>te.add(it)):fe.add(Ae))}const Q=new Map,Se=mD(k,Array.from(te));Se.forEach((Me,Ae)=>{const Le=yd+U++;Q.set(Ae,Le),Me.forEach(it=>an(it,Le))}),t.push(()=>{O.forEach((Me,Ae)=>{const Le=L.get(Ae);Me.forEach(it=>wo(it,Le))}),Se.forEach((Me,Ae)=>{const Le=Q.get(Ae);Me.forEach(it=>wo(it,Le))}),G.forEach(Me=>{this.processLeaveNode(Me)})});const et=[],nt=[];for(let Me=this._namespaceList.length-1;Me>=0;Me--)this._namespaceList[Me].drainQueuedTransitions(e).forEach(Le=>{const it=Le.player,Yt=Le.element;if(et.push(it),this.collectedEnterElements.length){const mi=Yt[on];if(mi&&mi.setForMove){if(mi.previousTriggersValues&&mi.previousTriggersValues.has(Le.triggerName)){const us=mi.previousTriggersValues.get(Le.triggerName),ln=this.statesByElement.get(Le.element);if(ln&&ln.has(Le.triggerName)){const $d=ln.get(Le.triggerName);$d.value=us,ln.set(Le.triggerName,$d)}}return void it.destroy()}}const Bn=!E||!this.driver.containsElement(E,Yt),Gi=Q.get(Yt),Ir=L.get(Yt),kt=this._buildInstruction(Le,n,Ir,Gi,Bn);if(kt.errors&&kt.errors.length)return void nt.push(kt);if(Bn)return it.onStart(()=>os(Yt,kt.fromStyles)),it.onDestroy(()=>Nn(Yt,kt.toStyles)),void r.push(it);if(Le.isFallbackTransition)return it.onStart(()=>os(Yt,kt.fromStyles)),it.onDestroy(()=>Nn(Yt,kt.toStyles)),void r.push(it);const mE=[];kt.timelines.forEach(mi=>{mi.stretchStartingKeyframe=!0,this.disabledNodes.has(mi.element)||mE.push(mi)}),kt.timelines=mE,n.append(Yt,kt.timelines),o.push({instruction:kt,player:it,element:Yt}),kt.queriedElements.forEach(mi=>$i(c,mi,[]).push(it)),kt.preStyleProps.forEach((mi,us)=>{if(mi.size){let ln=m.get(us);ln||m.set(us,ln=new Set),mi.forEach(($d,zp)=>ln.add(zp))}}),kt.postStyleProps.forEach((mi,us)=>{let ln=b.get(us);ln||b.set(us,ln=new Set),mi.forEach(($d,zp)=>ln.add(zp))})});if(nt.length){const Me=[];nt.forEach(Ae=>{Me.push(function AU(i,t){return new J(3505,!1)}())}),et.forEach(Ae=>Ae.destroy()),this.reportError(Me)}const fi=new Map,ar=new Map;o.forEach(Me=>{const Ae=Me.element;n.has(Ae)&&(ar.set(Ae,Ae),this._beforeAnimationBuild(Me.player.namespaceId,Me.instruction,fi))}),r.forEach(Me=>{const Ae=Me.element;this._getPreviousPlayers(Ae,!1,Me.namespaceId,Me.triggerName,null).forEach(it=>{$i(fi,Ae,[]).push(it),it.destroy()})});const lr=G.filter(Me=>gD(Me,m,b)),cr=new Map;fD(cr,this.driver,fe,b,sr).forEach(Me=>{gD(Me,m,b)&&lr.push(Me)});const Ja=new Map;O.forEach((Me,Ae)=>{fD(Ja,this.driver,new Set(Me),m,"!")}),lr.forEach(Me=>{const Ae=cr.get(Me),Le=Ja.get(Me);cr.set(Me,new Map([...Array.from(Ae?.entries()??[]),...Array.from(Le?.entries()??[])]))});const ds=[],hE=[],fE={};o.forEach(Me=>{const{element:Ae,player:Le,instruction:it}=Me;if(n.has(Ae)){if(x.has(Ae))return Le.onDestroy(()=>Nn(Ae,it.toStyles)),Le.disabled=!0,Le.overrideTotalTime(it.totalTime),void r.push(Le);let Yt=fE;if(ar.size>1){let Gi=Ae;const Ir=[];for(;Gi=Gi.parentNode;){const kt=ar.get(Gi);if(kt){Yt=kt;break}Ir.push(Gi)}Ir.forEach(kt=>ar.set(kt,Yt))}const Bn=this._buildAnimation(Le.namespaceId,it,fi,s,Ja,cr);if(Le.setRealPlayer(Bn),Yt===fE)ds.push(Le);else{const Gi=this.playersByElement.get(Yt);Gi&&Gi.length&&(Le.parentPlayer=Er(Gi)),r.push(Le)}}else os(Ae,it.fromStyles),Le.onDestroy(()=>Nn(Ae,it.toStyles)),hE.push(Le),x.has(Ae)&&r.push(Le)}),hE.forEach(Me=>{const Ae=s.get(Me.element);if(Ae&&Ae.length){const Le=Er(Ae);Me.setRealPlayer(Le)}}),r.forEach(Me=>{Me.parentPlayer?Me.syncPlayerEvents(Me.parentPlayer):Me.destroy()});for(let Me=0;Me<G.length;Me++){const Ae=G[Me],Le=Ae[on];if(wo(Ae,yd),Le&&Le.hasAnimation)continue;let it=[];if(c.size){let Bn=c.get(Ae);Bn&&Bn.length&&it.push(...Bn);let Gi=this.driver.query(Ae,hp,!0);for(let Ir=0;Ir<Gi.length;Ir++){let kt=c.get(Gi[Ir]);kt&&kt.length&&it.push(...kt)}}const Yt=it.filter(Bn=>!Bn.destroyed);Yt.length?PH(this,Ae,Yt):this.processLeaveNode(Ae)}return G.length=0,ds.forEach(Me=>{this.players.push(Me),Me.onDone(()=>{Me.destroy();const Ae=this.players.indexOf(Me);this.players.splice(Ae,1)}),Me.play()}),ds}elementContainsData(t,e){let n=!1;const r=e[on];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const c=this.playersByQueriedElement.get(t);c&&(o=c)}else{const c=this.playersByElement.get(t);if(c){const m=!s||s==qa;c.forEach(b=>{b.queued||!m&&b.triggerName!=r||o.push(b)})}}return(n||r)&&(o=o.filter(c=>!(n&&n!=c.namespaceId||r&&r!=c.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,c=e.isRemovalTransition?void 0:e.triggerName;for(const m of e.timelines){const b=m.element,x=b!==s,E=$i(n,b,[]);this._getPreviousPlayers(b,x,o,c,e.toState).forEach(O=>{const L=O.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),O.destroy(),E.push(O)})}os(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const c=e.triggerName,m=e.element,b=[],x=new Set,E=new Set,k=e.timelines.map(L=>{const U=L.element;x.add(U);const G=U[on];if(G&&G.removedBeforeQueried)return new Wa(L.duration,L.delay);const te=U!==m,fe=function FH(i){const t=[];return pD(i,t),t}((n.get(U)||MH).map(fi=>fi.getRealPlayer())).filter(fi=>!!fi.element&&fi.element===U),Q=s.get(U),Se=o.get(U),et=US(0,this._normalizer,0,L.keyframes,Q,Se),nt=this._buildPlayer(L,et,fe);if(L.subTimeline&&r&&E.add(U),te){const fi=new Ep(t,c,U);fi.setRealPlayer(nt),b.push(fi)}return nt});b.forEach(L=>{$i(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function AH(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,L.element,L))}),x.forEach(L=>an(L,KS));const O=Er(k);return O.onDestroy(()=>{x.forEach(L=>wo(L,KS)),Nn(m,e.toStyles)}),E.forEach(L=>{$i(r,L,[]).push(O)}),O}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Wa(t.duration,t.delay)}}class Ep{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Wa,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>sp(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){$i(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Rd(i){return i&&1===i.nodeType}function hD(i,t){const e=i.style.display;return i.style.display=t??"none",e}function fD(i,t,e,n,r){const s=[];e.forEach(m=>s.push(hD(m)));const o=[];n.forEach((m,b)=>{const x=new Map;m.forEach(E=>{const k=t.computeStyle(b,E,r);x.set(E,k),(!k||0==k.length)&&(b[on]=TH,o.push(b))}),i.set(b,x)});let c=0;return e.forEach(m=>hD(m,s[c++])),o}function mD(i,t){const e=new Map;if(i.forEach(c=>e.set(c,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(c){if(!c)return 1;let m=s.get(c);if(m)return m;const b=c.parentNode;return m=e.has(b)?b:r.has(b)?1:o(b),s.set(c,m),m}return t.forEach(c=>{const m=o(c);1!==m&&e.get(m).push(c)}),e}function an(i,t){i.classList?.add(t)}function wo(i,t){i.classList?.remove(t)}function PH(i,t,e){Er(e).onDone(()=>i.processLeaveNode(t))}function pD(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof VS?pD(n.players,t):t.push(n)}}function gD(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class Pd{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new IH(t,e,n),this._timelineEngine=new CH(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let c=this._triggerCache[o];if(!c){const m=[],x=gp(this._driver,s,m,[]);if(m.length)throw function yU(i,t){return new J(3404,!1)}();c=function vH(i,t,e){return new bH(i,t,e)}(r,x,this._normalizer),this._triggerCache[o]=c}this._transitionEngine.registerTrigger(e,r,c)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=HS(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,c]=HS(n);return this._timelineEngine.listen(o,e,c,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let BH=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Nn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nn(this._element,this._initialStyles),this._endStyles&&(Nn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(os(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(os(this._element,this._endStyles),this._endStyles=null),Nn(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function Mp(i){let t=null;return i.forEach((e,n)=>{(function VH(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class _D{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:iD(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class jH{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return GS(t,e)}getParentElement(t){return cp(t)}query(t,e,n){return XS(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const m={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(m.easing=s);const b=new Map,x=o.filter(O=>O instanceof _D);(function $U(i,t){return 0===i||0===t})(n,r)&&x.forEach(O=>{O.currentSnapshot.forEach((L,U)=>b.set(U,L))});let E=function jU(i){return i.length?i[0]instanceof Map?i:i.map(t=>ZS(t)):[]}(e).map(O=>Mr(O));E=function WU(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(c=>o.set(c,iD(i,c)))}}return t}(t,E,b);const k=function NH(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=Mp(t[0]),t.length>1&&(n=Mp(t[t.length-1]))):t instanceof Map&&(e=Mp(t)),e||n?new BH(i,e,n):null}(t,E);return new _D(t,E,m,k)}}let UH=(()=>{class i extends PS{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:un.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?LS(e):e;return vD(this._renderer,null,n,"register",[r]),new HH(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(re(Yo),re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();class HH extends Qj{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new zH(this._id,t,e||{},this._renderer)}}class zH{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return vD(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function vD(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const bD="@.disabled";let $H=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const c=o?.parentNode(s);c&&o.removeChild(c,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let x=this._rendererCache.get(s);return x||(x=new yD("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,x)),x}const o=n.id,c=n.id+"-"+this._currentId;this._currentId++,this.engine.register(c,e);const m=x=>{Array.isArray(x)?x.forEach(m):this.engine.registerTrigger(o,c,e,x.name,x)};return n.data.animation.forEach(m),new WH(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,c]=s;o(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(re(Yo),re(Pd),re(We))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})();class yD{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==bD?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class WH extends yD{constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==bD?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function GH(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function XH(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,c=>{this.factory.scheduleListenerCallback(c._data||-1,n,c)})}return this.delegate.listen(t,e,n)}}const wD=[{provide:PS,useClass:UH},{provide:wp,useFactory:function qH(){return new mH}},{provide:Pd,useClass:(()=>{class i extends Pd{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(re(tt),re(dp),re(wp),re(no))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})()},{provide:Yo,useFactory:function KH(i,t,e){return new $H(i,t,e)},deps:[Rc,Pd,We]}],Tp=[{provide:dp,useFactory:()=>new jH},{provide:Gr,useValue:"BrowserAnimations"},...wD],CD=[{provide:dp,useClass:YS},{provide:Gr,useValue:"NoopAnimations"},...wD];let ZH=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?CD:Tp}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({providers:Tp,imports:[Fw]}),i})(),xD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,ld,ti]}),i})(),SD=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),iz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({providers:[SD]}),i})(),nz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,ti]}),i})(),ID=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[iz,qr,ti,ld,mV,nz]}),i})(),XD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,ti]}),i})(),YD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[ti,ti]}),i})();const s5=["addListener","removeListener"],o5=["addEventListener","removeEventListener"],a5=["on","off"];function jd(i,t,e,n){if(C(e)&&(n=e,e=void 0),n)return jd(i,t,e).pipe(Wf(n));const[r,s]=function d5(i){return C(i.addEventListener)&&C(i.removeEventListener)}(i)?o5.map(o=>c=>i[o](t,c,e)):function l5(i){return C(i.addListener)&&C(i.removeListener)}(i)?s5.map(qD(i,t)):function c5(i){return C(i.on)&&C(i.off)}(i)?a5.map(qD(i,t)):[];if(!r&&Do(i))return Xt(o=>jd(o,t,e))(pi(i));if(!r)throw new TypeError("Invalid event target");return new me(o=>{const c=(...m)=>o.next(1<m.length?m:m[0]);return r(c),()=>s(c)})}function qD(i,t){return e=>n=>i[e](t,n)}const Qa={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Qa;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new Dt(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=Qa;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Qa;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},f5=new class h5 extends Mm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class u5 extends Em{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Qa.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Qa.cancelAnimationFrame(e),t._scheduled=void 0)}});let Lp,m5=1;const Ud={};function KD(i){return i in Ud&&(delete Ud[i],!0)}const p5={setImmediate(i){const t=m5++;return Ud[t]=!0,Lp||(Lp=Promise.resolve()),Lp.then(()=>KD(t)&&i()),t},clearImmediate(i){KD(i)}},{setImmediate:g5,clearImmediate:_5}=p5,Hd={setImmediate(...i){const{delegate:t}=Hd;return(t?.setImmediate||g5)(...i)},clearImmediate(i){const{delegate:t}=Hd;return(t?.clearImmediate||_5)(i)},delegate:void 0},y5=new class b5 extends Mm{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class v5 extends Em{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Hd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Hd.clearImmediate(e),t._scheduled=void 0)}});function Np(i,t=Tm){return function w5(i){return I((t,e)=>{let n=!1,r=null,s=null,o=!1;const c=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const b=r;r=null,e.next(b)}o&&e.complete()},m=()=>{s=null,o&&e.complete()};t.subscribe(V(e,b=>{n=!0,r=b,s||pi(i(b)).subscribe(s=V(e,c,m))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>function x5(i=0,t,e=FB){let n=-1;return null!=t&&(tg(t)?e=t:n=t),new me(r=>{let s=function C5(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(i,t))}const S5=["contentWrapper"],D5=["*"],E5=new ue("VIRTUAL_SCROLL_STRATEGY");let zd=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new P,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new me(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Np(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ke()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(tn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=od(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(re(We),re(sn),re(tt,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ZD=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new P,this._elementScrolled=new me(o=>this.ngZone.runOutsideAngular(()=>jd(this.elementRef.nativeElement,"scroll").pipe(_o(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=La()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==La()?e.left=e.right:1==La()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;rx()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==La()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==La()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(W(ut),W(zd),W(We),W(Ba,8))},i.\u0275dir=Ce({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),Bp=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new P,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Np(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(re(sn),re(We),re(tt,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QD=new ue("VIRTUAL_SCROLLABLE");let k5=(()=>{class i extends ZD{constructor(e,n,r,s){super(e,n,r,s)}measureViewportSize(e){const n=this.elementRef.nativeElement;return"horizontal"===e?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(e){return new(e||i)(W(ut),W(zd),W(We),W(Ba,8))},i.\u0275dir=Ce({type:i,features:[Ze]}),i})();const A5=typeof requestAnimationFrame<"u"?f5:y5;let O5=(()=>{class i extends k5{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=ui(e)}constructor(e,n,r,s,o,c,m,b){super(e,c,r,o),this.elementRef=e,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=b,this._platform=Xe(sn),this._detachedSubject=new P,this._renderedRangeSubject=new P,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new me(x=>this._scrollStrategy.scrolledIndexChange.subscribe(E=>Promise.resolve().then(()=>this.ngZone.run(()=>x.next(E))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Dt.EMPTY,this._viewportChanges=m.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Yf(null),Np(0,A5)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(_o(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function I5(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,n="to-start"){e=this.appendOnly&&"to-start"===n?0:e;const s="horizontal"==this.orientation,o=s?"X":"Y";let m=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===n&&(m+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=m&&(this._renderedContentTransform=m,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,n="auto"){this._scrollStrategy.scrollToIndex(e,n)}measureScrollOffset(e){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let n;const r="left",s="right",o="rtl"==this.dir?.value;n="start"==e?o?s:r:"end"==e?o?r:s:e||("horizontal"===this.orientation?"left":"top");const c=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-c}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of e)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(W(ut),W(On),W(We),W(E5,8),W(Ba,8),W(zd),W(Bp),W(QD,8))},i.\u0275cmp=Oi({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,n){if(1&e&&gr(S5,7),2&e){let r;ci(r=di())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,n){2&e&&ki("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[ot([{provide:ZD,useFactory:(t,e)=>t||e,deps:[[new Gn,new Ml(QD)],i]}]),Ze,zh],ngContentSelectors:D5,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,n){1&e&&(mr(),wt(0,"div",0,1),li(2),Mt(),Qt(3,"div",2)),2&e&&(St(3),Jl("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),Vp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({}),i})(),JD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[Va,Vp,O5,Va,Vp]}),i})();class jp{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class R5 extends jp{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class P5 extends jp{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class F5 extends jp{constructor(t){super(),this.element=t instanceof ut?t.nativeElement:t}}class L5{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof R5?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof P5?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof F5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class N5 extends L5{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const c=o.element,m=this._document.createComment("dom-portal");c.parentNode.insertBefore(m,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(c,m)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Mi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let B5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({}),i})();const eE=rx();class V5{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ut(-this._previousScrollPosition.left),t.style.top=Ut(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),eE&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),eE&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class j5{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tE{enable(){}disable(){}attach(){}}function Up(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function iE(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class U5{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Up(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let H5=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new tE,this.close=o=>new j5(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new V5(this._viewportRuler,this._document),this.reposition=o=>new U5(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(re(zd),re(Bp),re(We),re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class z5{constructor(t){if(this.scrollStrategy=new tE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class $5{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let nE=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(re(tt))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),W5=(()=>{class i extends nE{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(re(tt),re(We,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G5=(()=>{class i extends nE{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Sm(s)},this._clickListener=s=>{const o=Sm(s),c="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const m=this._attachedOverlays.slice();for(let b=m.length-1;b>-1;b--){const x=m[b];if(x._outsidePointerEvents.observers.length<1||!x.hasAttached())continue;if(x.overlayElement.contains(o)||x.overlayElement.contains(c))break;const E=x._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(s)):E.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(re(tt),re(sn),re(We,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rE=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Dm()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),Dm()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(re(tt),re(sn))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class X5{constructor(t,e,n,r,s,o,c,m,b,x=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=m,this._outsideClickDispatcher=b,this._animationsDisabled=x,this._backdropElement=null,this._backdropClick=new P,this._attachments=new P,this._detachments=new P,this._locationChanges=Dt.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new P,this._outsidePointerEvents=new P,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(br(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ut(this._config.width),t.height=Ut(this._config.height),t.minWidth=Ut(this._config.minWidth),t.minHeight=Ut(this._config.minHeight),t.maxWidth=Ut(this._config.maxWidth),t.maxHeight=Ut(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=sd(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(_o(Xd(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const sE="cdk-overlay-connected-position-bounding-box",Y5=/([A-Za-z%]+)$/;class q5{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new P,this._resizeSubscription=Dt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(sE),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let c of this._preferredPositions){let m=this._getOriginPoint(t,r,c),b=this._getOverlayPoint(m,e,c),x=this._getOverlayFit(b,e,n,c);if(x.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,m);this._canFitWithFlexibleDimensions(x,b,n)?s.push({position:c,origin:m,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(m,c)}):(!o||o.overlayFit.visibleArea<x.visibleArea)&&(o={overlayFit:x,overlayPoint:b,originPoint:m,position:c,overlayRect:e})}if(s.length){let c=null,m=-1;for(const b of s){const x=b.boundingBoxRect.width*b.boundingBoxRect.height*(b.position.weight||1);x>m&&(m=x,c=b)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(sE),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r="start"==n.originX?o:c}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=aE(e);let{x:o,y:c}=t,m=this._getOffset(r,"x"),b=this._getOffset(r,"y");m&&(o+=m),b&&(c+=b);let k=0-c,O=c+s.height-n.height,L=this._subtractOverflows(s.width,0-o,o+s.width-n.width),U=this._subtractOverflows(s.height,k,O),G=L*U;return{visibleArea:G,isCompletelyWithinViewport:s.width*s.height===G,fitsInViewportVertically:U===s.height,fitsInViewportHorizontally:L==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=oE(this._overlayRef.getConfig().minHeight),c=oE(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=c&&c<=s)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=aE(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),m=Math.max(s.top-n.top-t.y,0),b=Math.max(s.left-n.left-t.x,0);let x=0,E=0;return x=r.width<=s.width?b||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,E=r.height<=s.height?m||-c:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x,y:E},{x:t.x+x,y:t.y+E}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new $5(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,c,x,E,k;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)c=n.height-t.y+2*this._viewportMargin,s=n.height-c+this._viewportMargin;else{const O=Math.min(n.bottom-t.y+n.top,t.y),L=this._lastBoundingBoxSize.height;s=2*O,o=t.y-O,s>L&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-L/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)k=n.width-t.x+this._viewportMargin,x=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)E=t.x,x=n.right-t.x;else{const O=Math.min(n.right-t.x+n.left,t.x),L=this._lastBoundingBoxSize.width;x=2*O,E=t.x-O,x>L&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.x-L/2)}return{top:o,left:E,bottom:c,right:k,width:x,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ut(n.height),r.top=Ut(n.top),r.bottom=Ut(n.bottom),r.width=Ut(n.width),r.left=Ut(n.left),r.right=Ut(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ut(s)),o&&(r.maxWidth=Ut(o))}this._lastBoundingBoxSize=n,cs(this._boundingBox.style,r)}_resetBoundingBoxStyles(){cs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const x=this._viewportRuler.getViewportScrollPosition();cs(n,this._getExactOverlayY(e,t,x)),cs(n,this._getExactOverlayX(e,t,x))}else n.position="static";let c="",m=this._getOffset(e,"x"),b=this._getOffset(e,"y");m&&(c+=`translateX(${m}px) `),b&&(c+=`translateY(${b}px)`),n.transform=c.trim(),o.maxHeight&&(r?n.maxHeight=Ut(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Ut(o.maxWidth):s&&(n.maxWidth="")),cs(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ut(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ut(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:iE(t,n),isOriginOutsideView:Up(t,n),isOverlayClipped:iE(e,n),isOverlayOutsideView:Up(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&sd(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ut)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function cs(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function oE(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(Y5);return e&&"px"!==e?null:parseFloat(t)}return i||null}function aE(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const lE="cdk-global-overlay-wrapper";class K5{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(lE),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=n,m=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),b=!("100%"!==s&&"100vh"!==s||c&&"100%"!==c&&"100vh"!==c),x=this._xPosition,E=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let O="",L="",U="";m?U="flex-start":"center"===x?(U="center",k?L=E:O=E):k?"left"===x||"end"===x?(U="flex-end",O=E):("right"===x||"start"===x)&&(U="flex-start",L=E):"left"===x||"start"===x?(U="flex-start",O=E):("right"===x||"end"===x)&&(U="flex-end",L=E),t.position=this._cssPosition,t.marginLeft=m?"0":O,t.marginTop=b?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=m?"0":L,e.justifyContent=U,e.alignItems=b?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(lE),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Z5=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new K5}flexibleConnectedTo(e){return new q5(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(re(Bp),re(tt),re(sn),re(rE))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Q5=0,Hp=(()=>{class i{constructor(e,n,r,s,o,c,m,b,x,E,k,O){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=m,this._document=b,this._directionality=x,this._location=E,this._outsideClickDispatcher=k,this._animationsModuleType=O}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new z5(e);return o.direction=o.direction||this._directionality.value,new X5(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Q5++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(no)),new N5(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(re(H5),re(rE),re(Ns),re(Z5),re(W5),re(Mi),re(We),re(tt),re(Ba),re(vc),re(G5),re(Gr,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const t4={provide:new ue("cdk-connected-overlay-scroll-strategy"),deps:[Hp],useFactory:function e4(i){return()=>i.scrollStrategies.reposition()}};let i4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({providers:[Hp,t4],imports:[Va,B5,JD,JD]}),i})();const o4={provide:new ue("mat-menu-scroll-strategy"),deps:[Hp],useFactory:function s4(i){return()=>i.scrollStrategies.reposition()}};let dE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({providers:[o4],imports:[qr,ld,ti,i4,Vp,ti]}),i})();const a4=[xD,ID,RS,XD,YD,Sx,dE];let l4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i}),i.\u0275inj=mt({imports:[qr,a4,xD,ID,RS,XD,YD,Sx,dE]}),i})(),c4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=gt({type:i,bootstrap:[Zj]}),i.\u0275inj=mt({imports:[qr,Fw,lB,ZH,l4]}),i})();_L().bootstrapModule(c4).catch(i=>console.error(i))},621:(el,Be,hs)=>{var y,f,_,p,l,u,C=C||{version:"5.3.0"};if(Be.fabric=C,typeof document<"u"&&typeof window<"u")C.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),C.window=window;else{var fs=new(hs(960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;C.document=fs.document,C.jsdomImplForWrapper=hs(759).implForWrapper,C.nodeCanvas=hs(272).Canvas,C.window=fs,DOMParser=C.window.DOMParser}function Dt(y,f){var _=y.canvas,p=f.targetCanvas,l=p.getContext("2d");l.translate(0,p.height),l.scale(1,-1),l.drawImage(_,0,_.height-p.height,p.width,p.height,0,0,p.width,p.height)}function ps(y,f){var p=f.targetCanvas.getContext("2d"),l=f.destinationWidth,u=f.destinationHeight,a=l*u*4,h=new Uint8Array(this.imageBuffer,0,a),g=new Uint8ClampedArray(this.imageBuffer,0,a);y.readPixels(0,0,l,u,y.RGBA,y.UNSIGNED_BYTE,h);var d=new ImageData(g,l,u);p.putImageData(d,0,0)}C.isTouchSupported="ontouchstart"in C.window||"ontouchstart"in C.document||C.window&&C.window.navigator&&C.window.navigator.maxTouchPoints>0,C.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",C.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],C.DPI=96,C.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",C.commaWsp="(?:\\s+,?\\s*|,\\s*)",C.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,C.reNonWord=/[ \n\.,;!\?\-]/,C.fontPaths={},C.iMatrix=[1,0,0,1,0,0],C.svgNS="http://www.w3.org/2000/svg",C.perfLimitSizeTotal=2097152,C.maxCacheSideLimit=4096,C.minCacheSideLimit=256,C.charWidthsCache={},C.textureSize=2048,C.disableStyleCopyPaste=!1,C.enableGLFiltering=!0,C.devicePixelRatio=C.window.devicePixelRatio||C.window.webkitDevicePixelRatio||C.window.mozDevicePixelRatio||1,C.browserShadowBlurConstant=1,C.arcToSegmentsCache={},C.boundsOfCurveCache={},C.cachesBoundsOfCurve=!0,C.forceGLPutImageData=!1,C.initFilterBackend=function(){return C.enableGLFiltering&&C.isWebglSupported&&C.isWebglSupported(C.textureSize)?(console.log("max texture size: "+C.maxTextureSize),new C.WebglFilterBackend({tileSize:C.textureSize})):C.Canvas2dFilterBackend?new C.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=C),function(){function y(a,h){if(this.__eventListeners[a]){var g=this.__eventListeners[a];h?g[g.indexOf(h)]=!1:C.util.array.fill(g,!1)}}function _(a,h){var g=function(){h.apply(this,arguments),this.off(a,g)}.bind(this);this.on(a,g)}C.Observable={fire:function u(a,h){if(!this.__eventListeners)return this;var g=this.__eventListeners[a];if(!g)return this;for(var d=0,v=g.length;d<v;d++)g[d]&&g[d].call(this,h||{});return this.__eventListeners[a]=g.filter(function(w){return!1!==w}),this},on:function f(a,h){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var g in a)this.on(g,a[g]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(h);return this},once:function p(a,h){if(1===arguments.length)for(var g in a)_.call(this,g,a[g]);else _.call(this,a,h);return this},off:function l(a,h){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)y.call(this,a);else if(1===arguments.length&&"object"==typeof arguments[0])for(var g in a)y.call(this,g,a[g]);else y.call(this,a,h);return this}}}(),C.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var y=0,f=arguments.length;y<f;y++)this._onObjectAdded(arguments[y]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(y,f,_){var p=this._objects;return _?p[f]=y:p.splice(f,0,y),this._onObjectAdded&&this._onObjectAdded(y),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f,y=this._objects,_=!1,p=0,l=arguments.length;p<l;p++)-1!==(f=y.indexOf(arguments[p]))&&(_=!0,y.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[p]));return this.renderOnAddRemove&&_&&this.requestRenderAll(),this},forEachObject:function(y,f){for(var _=this.getObjects(),p=0,l=_.length;p<l;p++)y.call(f,_[p],p,_);return this},getObjects:function(y){return typeof y>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===y})},item:function(y){return this._objects[y]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(y,f){return this._objects.indexOf(y)>-1||!!f&&this._objects.some(function(_){return"function"==typeof _.contains&&_.contains(y,!0)})},complexity:function(){return this._objects.reduce(function(y,f){return y+(f.complexity?f.complexity():0)},0)}},C.CommonMethods={_setOptions:function(y){for(var f in y)this.set(f,y[f])},_initGradient:function(y,f){y&&y.colorStops&&!(y instanceof C.Gradient)&&this.set(f,new C.Gradient(y))},_initPattern:function(y,f,_){!y||!y.source||y instanceof C.Pattern?_&&_():this.set(f,new C.Pattern(y,_))},_setObject:function(y){for(var f in y)this._set(f,y[f])},set:function(y,f){return"object"==typeof y?this._setObject(y):this._set(y,f),this},_set:function(y,f){this[y]=f},toggle:function(y){var f=this.get(y);return"boolean"==typeof f&&this.set(y,!f),this},get:function(y){return this[y]}},y=Be,f=Math.sqrt,_=Math.atan2,p=Math.pow,l=Math.PI/180,u=Math.PI/2,C.util={cos:function(a){if(0===a)return 1;switch(a<0&&(a=-a),a/u){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(0===a)return 0;var g=1;switch(a<0&&(g=-1),a/u){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(a)},removeFromArray:function(a,h){var g=a.indexOf(h);return-1!==g&&a.splice(g,1),a},getRandomInt:function(a,h){return Math.floor(Math.random()*(h-a+1))+a},degreesToRadians:function(a){return a*l},radiansToDegrees:function(a){return a/l},rotatePoint:function(a,h,g){var d=new C.Point(a.x-h.x,a.y-h.y),v=C.util.rotateVector(d,g);return new C.Point(v.x,v.y).addEquals(h)},rotateVector:function(a,h){var g=C.util.sin(h),d=C.util.cos(h);return{x:a.x*d-a.y*g,y:a.x*g+a.y*d}},createVector:function(a,h){return new C.Point(h.x-a.x,h.y-a.y)},calcAngleBetweenVectors:function(a,h){return Math.acos((a.x*h.x+a.y*h.y)/(Math.hypot(a.x,a.y)*Math.hypot(h.x,h.y)))},getHatVector:function(a){return new C.Point(a.x,a.y).multiply(1/Math.hypot(a.x,a.y))},getBisector:function(a,h,g){var d=C.util.createVector(a,h),v=C.util.createVector(a,g),w=C.util.calcAngleBetweenVectors(d,v),S=C.util.calcAngleBetweenVectors(C.util.rotateVector(d,w),v);return{vector:C.util.getHatVector(C.util.rotateVector(d,w*(0===S?1:-1)/2)),angle:w}},projectStrokeOnPoints:function(a,h,g){var d=[],v=h.strokeWidth/2,w=h.strokeUniform?new C.Point(1/h.scaleX,1/h.scaleY):new C.Point(1,1),S=function(D){var M=v/Math.hypot(D.x,D.y);return new C.Point(D.x*M*w.x,D.y*M*w.y)};return a.length<=1||a.forEach(function(D,M){var R,j,T=new C.Point(D.x,D.y);0===M?(j=a[M+1],R=g?S(C.util.createVector(j,T)).addEquals(T):a[a.length-1]):M===a.length-1?(R=a[M-1],j=g?S(C.util.createVector(R,T)).addEquals(T):a[0]):(R=a[M-1],j=a[M+1]);var _e,be,q=C.util.getBisector(T,R,j),ae=q.vector;if("miter"===h.strokeLineJoin&&(_e=-v/Math.sin(q.angle/2),be=new C.Point(ae.x*_e*w.x,ae.y*_e*w.y),Math.hypot(be.x,be.y)/v<=h.strokeMiterLimit))return d.push(T.add(be)),void d.push(T.subtract(be));_e=-v*Math.SQRT2,be=new C.Point(ae.x*_e*w.x,ae.y*_e*w.y),d.push(T.add(be)),d.push(T.subtract(be))}),d},transformPoint:function(a,h,g){return g?new C.Point(h[0]*a.x+h[2]*a.y,h[1]*a.x+h[3]*a.y):new C.Point(h[0]*a.x+h[2]*a.y+h[4],h[1]*a.x+h[3]*a.y+h[5])},makeBoundingBoxFromPoints:function(a,h){if(h)for(var g=0;g<a.length;g++)a[g]=C.util.transformPoint(a[g],h);var d=[a[0].x,a[1].x,a[2].x,a[3].x],v=C.util.array.min(d),S=C.util.array.max(d)-v,D=[a[0].y,a[1].y,a[2].y,a[3].y],M=C.util.array.min(D);return{left:v,top:M,width:S,height:C.util.array.max(D)-M}},invertTransform:function(a){var h=1/(a[0]*a[3]-a[1]*a[2]),g=[h*a[3],-h*a[1],-h*a[2],h*a[0]],d=C.util.transformPoint({x:a[4],y:a[5]},g,!0);return g[4]=-d.x,g[5]=-d.y,g},toFixed:function(a,h){return parseFloat(Number(a).toFixed(h))},parseUnit:function(a,h){var g=/\D{0,2}$/.exec(a),d=parseFloat(a);switch(h||(h=C.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return d*C.DPI/25.4;case"cm":return d*C.DPI/2.54;case"in":return d*C.DPI;case"pt":return d*C.DPI/72;case"pc":return d*C.DPI/72*12;case"em":return d*h;default:return d}},falseFunction:function(){return!1},getKlass:function(a,h){return a=C.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),C.util.resolveNamespace(h)[a]},getSvgAttributes:function(a){var h=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"])}return h},resolveNamespace:function(a){if(!a)return C;var d,h=a.split("."),g=h.length,v=y||C.window;for(d=0;d<g;++d)v=v[h[d]];return v},loadImage:function(a,h,g,d){if(a){var v=C.util.createImage(),w=function(){h&&h.call(g,v,!1),v=v.onload=v.onerror=null};v.onload=w,v.onerror=function(){C.log("Error loading "+v.src),h&&h.call(g,null,!0),v=v.onload=v.onerror=null},0!==a.indexOf("data")&&null!=d&&(v.crossOrigin=d),"data:image/svg"===a.substring(0,14)&&(v.onload=null,C.util.loadImageInDom(v,w)),v.src=a}else h&&h.call(g,a)},loadImageInDom:function(a,h){var g=C.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(a),C.document.querySelector("body").appendChild(g),a.onload=function(){h(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(a,h,g,d){var v=[],w=0,S=(a=a||[]).length;function D(){++w===S&&h&&h(v.filter(function(M){return M}))}S?a.forEach(function(M,T){M&&M.type?C.util.getKlass(M.type,g).fromObject(M,function(j,q){q||(v[T]=j),d&&d(M,j,q),D()}):D()}):h&&h(v)},enlivenObjectEnlivables:function(a,h,g){var d=C.Object.ENLIVEN_PROPS.filter(function(v){return!!a[v]});C.util.enlivenObjects(d.map(function(v){return a[v]}),function(v){var w={};d.forEach(function(S,D){w[S]=v[D],h&&(h[S]=v[D])}),g&&g(w)})},enlivenPatterns:function(a,h){function g(){++v===w&&h&&h(d)}var d=[],v=0,w=(a=a||[]).length;w?a.forEach(function(S,D){S&&S.source?new C.Pattern(S,function(M){d[D]=M,g()}):(d[D]=S,g())}):h&&h(d)},groupSVGElements:function(a,h,g){var d;return a&&1===a.length?(typeof g<"u"&&(a[0].sourcePath=g),a[0]):(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),d=new C.Group(a,h),typeof g<"u"&&(d.sourcePath=g),d)},populateWithProperties:function(a,h,g){if(g&&Array.isArray(g))for(var d=0,v=g.length;d<v;d++)g[d]in a&&(h[g[d]]=a[g[d]])},createCanvasElement:function(){return C.document.createElement("canvas")},copyCanvasElement:function(a){var h=C.util.createCanvasElement();return h.width=a.width,h.height=a.height,h.getContext("2d").drawImage(a,0,0),h},toDataURL:function(a,h,g){return a.toDataURL("image/"+h,g)},createImage:function(){return C.document.createElement("img")},multiplyTransformMatrices:function(a,h,g){return[a[0]*h[0]+a[2]*h[1],a[1]*h[0]+a[3]*h[1],a[0]*h[2]+a[2]*h[3],a[1]*h[2]+a[3]*h[3],g?0:a[0]*h[4]+a[2]*h[5]+a[4],g?0:a[1]*h[4]+a[3]*h[5]+a[5]]},qrDecompose:function(a){var h=_(a[1],a[0]),g=p(a[0],2)+p(a[1],2),d=f(g),v=(a[0]*a[3]-a[2]*a[1])/d,w=_(a[0]*a[2]+a[1]*a[3],g);return{angle:h/l,scaleX:d,scaleY:v,skewX:w/l,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return C.iMatrix.concat();var h=C.util.degreesToRadians(a.angle),g=C.util.cos(h),d=C.util.sin(h);return[g,d,-d,g,0,0]},calcDimensionsMatrix:function(a){var h=typeof a.scaleX>"u"?1:a.scaleX,g=typeof a.scaleY>"u"?1:a.scaleY,d=[a.flipX?-h:h,0,0,a.flipY?-g:g,0,0],v=C.util.multiplyTransformMatrices,w=C.util.degreesToRadians;return a.skewX&&(d=v(d,[1,0,Math.tan(w(a.skewX)),1],!0)),a.skewY&&(d=v(d,[1,Math.tan(w(a.skewY)),0,1],!0)),d},composeMatrix:function(a){var h=[1,0,0,1,a.translateX||0,a.translateY||0],g=C.util.multiplyTransformMatrices;return a.angle&&(h=g(h,C.util.calcRotateMatrix(a))),(1!==a.scaleX||1!==a.scaleY||a.skewX||a.skewY||a.flipX||a.flipY)&&(h=g(h,C.util.calcDimensionsMatrix(a))),h},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},isTransparent:function(a,h,g,d){d>0&&(h>d?h-=d:h=0,g>d?g-=d:g=0);var w,v=!0,D=a.getImageData(h,g,2*d||1,2*d||1),M=D.data.length;for(w=3;w<M&&0!=(v=D.data[w]<=0);w+=4);return D=null,v},parsePreserveAspectRatioAttribute:function(a){var w,h="meet",v=a.split(" ");return v&&v.length&&("meet"!==(h=v.pop())&&"slice"!==h?(w=h,h="meet"):v.length&&(w=v.pop())),{meetOrSlice:h,alignX:"none"!==w?w.slice(1,4):"none",alignY:"none"!==w?w.slice(5,8):"none"}},clearFabricFontCache:function(a){(a=(a||"").toLowerCase())?C.charWidthsCache[a]&&delete C.charWidthsCache[a]:C.charWidthsCache={}},limitDimsByArea:function(a,h){var g=Math.sqrt(h*a),d=Math.floor(h/g);return{x:Math.floor(g),y:d}},capValue:function(a,h,g){return Math.max(a,Math.min(h,g))},findScaleToFit:function(a,h){return Math.min(h.width/a.width,h.height/a.height)},findScaleToCover:function(a,h){return Math.max(h.width/a.width,h.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(h){return C.util.toFixed(h,C.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(a,h){var g=C.util.invertTransform(h),d=C.util.multiplyTransformMatrices(g,a.calcOwnMatrix());C.util.applyTransformToObject(a,d)},addTransformToObject:function(a,h){C.util.applyTransformToObject(a,C.util.multiplyTransformMatrices(h,a.calcOwnMatrix()))},applyTransformToObject:function(a,h){var g=C.util.qrDecompose(h),d=new C.Point(g.translateX,g.translateY);a.flipX=!1,a.flipY=!1,a.set("scaleX",g.scaleX),a.set("scaleY",g.scaleY),a.skewX=g.skewX,a.skewY=g.skewY,a.angle=g.angle,a.setPositionByOrigin(d,"center","center")},sizeAfterTransform:function(a,h,g){var d=a/2,v=h/2,w=[{x:-d,y:-v},{x:d,y:-v},{x:-d,y:v},{x:d,y:v}],S=C.util.calcDimensionsMatrix(g),D=C.util.makeBoundingBoxFromPoints(w,S);return{x:D.width,y:D.height}},mergeClipPaths:function(a,h){var g=a,d=h;g.inverted&&!d.inverted&&(g=h,d=a),C.util.applyTransformToObject(d,C.util.multiplyTransformMatrices(C.util.invertTransform(g.calcTransformMatrix()),d.calcTransformMatrix()));var v=g.inverted&&d.inverted;return v&&(g.inverted=d.inverted=!1),new C.Group([g],{clipPath:d,inverted:v})},hasStyleChanged:function(a,h,g){return g=g||!1,a.fill!==h.fill||a.stroke!==h.stroke||a.strokeWidth!==h.strokeWidth||a.fontSize!==h.fontSize||a.fontFamily!==h.fontFamily||a.fontWeight!==h.fontWeight||a.fontStyle!==h.fontStyle||a.textBackgroundColor!==h.textBackgroundColor||a.deltaY!==h.deltaY||g&&(a.overline!==h.overline||a.underline!==h.underline||a.linethrough!==h.linethrough)},stylesToArray:function(g,h){g=C.util.object.clone(g,!0);for(var d=h.split("\n"),v=-1,w={},S=[],D=0;D<d.length;D++)if(g[D])for(var M=0;M<d[D].length;M++){v++;var T=g[D][M];T&&Object.keys(T).length>0&&(C.util.hasStyleChanged(w,T,!0)?S.push({start:v,end:v+1,style:T}):S[S.length-1].end++),w=T||{}}else v+=d[D].length;return S},stylesFromArray:function(a,h){if(!Array.isArray(a))return a;for(var g=h.split("\n"),d=-1,v=0,w={},S=0;S<g.length;S++)for(var D=0;D<g[S].length;D++)d++,a[v]&&a[v].start<=d&&d<a[v].end&&(w[S]=w[S]||{},w[S][D]=Object.assign({},a[v].style),d===a[v].end-1&&v++);return w}},function(){var y=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_={m:"l",M:"L"};function p(A,N,B,P,X,F,I,V,$,H,Y){var oe=C.util.cos(A),ce=C.util.sin(A),ge=C.util.cos(N),K=C.util.sin(N),z=B*X*ge-P*F*K+I,ie=P*X*ge+B*F*K+V;return["C",H+$*(-B*X*ce-P*F*oe),Y+$*(-P*X*ce+B*F*oe),z+$*(B*X*K+P*F*ge),ie+$*(P*X*K-B*F*ge),z,ie]}function u(A,N,B,P){var X=Math.atan2(N,A),F=Math.atan2(P,B);return F>=X?F-X:2*Math.PI-(X-F)}function h(A,N,B){for(var Y=function l(A,N,B,P,X,F,I){var V=Math.PI,$=I*V/180,H=C.util.sin($),Y=C.util.cos($),oe=0,ce=0,ge=-Y*A*.5-H*N*.5,K=-Y*N*.5+H*A*.5,z=(B=Math.abs(B))*B,ie=(P=Math.abs(P))*P,ne=K*K,Z=ge*ge,se=z*ie-z*ne-ie*Z,ve=0;if(se<0){var Ne=Math.sqrt(1-se/(z*ie));B*=Ne,P*=Ne}else ve=(X===F?-1:1)*Math.sqrt(se/(z*ne+ie*Z));var Te=ve*B*K/P,ee=-ve*P*ge/B,Ie=Y*Te-H*ee+.5*A,He=H*Te+Y*ee+.5*N,ze=u(1,0,(ge-Te)/B,(K-ee)/P),_t=u((ge-Te)/B,(K-ee)/P,(-ge-Te)/B,(-K-ee)/P);0===F&&_t>0?_t-=2*V:1===F&&_t<0&&(_t+=2*V);for(var at=Math.ceil(Math.abs(_t/V*2)),qt=[],Ot=_t/at,Vn=8/3*Math.sin(Ot/4)*Math.sin(Ot/4)/Math.sin(Ot/2),gs=ze+Ot,cn=0;cn<at;cn++)qt[cn]=p(ze,gs,Y,H,B,P,Ie,He,Vn,oe,ce),oe=qt[cn][5],ce=qt[cn][6],ze=gs,gs+=Ot;return qt}(B[6]-A,B[7]-N,B[1],B[2],B[4],B[5],B[3]),oe=0,ce=Y.length;oe<ce;oe++)Y[oe][1]+=A,Y[oe][2]+=N,Y[oe][3]+=A,Y[oe][4]+=N,Y[oe][5]+=A,Y[oe][6]+=N;return Y}function d(A,N,B,P){return Math.sqrt((B-A)*(B-A)+(P-N)*(P-N))}function M(A,N,B,P,X,F,I,V){return function($){var H=function v(A){return A*A*A}($),Y=function w(A){return 3*A*A*(1-A)}($),oe=function S(A){return 3*A*(1-A)*(1-A)}($),ce=function D(A){return(1-A)*(1-A)*(1-A)}($);return{x:I*H+X*Y+B*oe+A*ce,y:V*H+F*Y+P*oe+N*ce}}}function T(A,N,B,P,X,F,I,V){return function($){var H=1-$;return Math.atan2(3*H*H*(P-N)+6*H*$*(F-P)+3*$*$*(V-F),3*H*H*(B-A)+6*H*$*(X-B)+3*$*$*(I-X))}}function ae(A,N,B,P,X,F){return function(I){var V=function R(A){return A*A}(I),$=function j(A){return 2*A*(1-A)}(I),H=function q(A){return(1-A)*(1-A)}(I);return{x:X*V+B*$+A*H,y:F*V+P*$+N*H}}}function de(A,N,B,P,X,F){return function(I){var V=1-I;return Math.atan2(2*V*(P-N)+2*I*(F-P),2*V*(B-A)+2*I*(X-B))}}function _e(A,N,B){var X,I,P={x:N,y:B},F=0;for(I=1;I<=100;I+=1)X=A(I/100),F+=d(P.x,P.y,X.x,X.y),P=X;return F}function he(A){for(var P,H,Y,oe,N=0,B=A.length,X=0,F=0,I=0,V=0,$=[],ce=0;ce<B;ce++){switch(Y={x:X,y:F,command:(P=A[ce])[0]},P[0]){case"M":Y.length=0,I=X=P[1],V=F=P[2];break;case"L":Y.length=d(X,F,P[1],P[2]),X=P[1],F=P[2];break;case"C":H=M(X,F,P[1],P[2],P[3],P[4],P[5],P[6]),oe=T(X,F,P[1],P[2],P[3],P[4],P[5],P[6]),Y.iterator=H,Y.angleFinder=oe,Y.length=_e(H,X,F),X=P[5],F=P[6];break;case"Q":H=ae(X,F,P[1],P[2],P[3],P[4]),oe=de(X,F,P[1],P[2],P[3],P[4]),Y.iterator=H,Y.angleFinder=oe,Y.length=_e(H,X,F),X=P[3],F=P[4];break;case"Z":case"z":Y.destX=I,Y.destY=V,Y.length=d(X,F,I,V),X=I,F=V}N+=Y.length,$.push(Y)}return $.push({length:N,x:X,y:F}),$}C.util.joinPath=function(A){return A.map(function(N){return N.join(" ")}).join(" ")},C.util.parsePath=function De(A){var P,X,oe,ce,ge,N=[],B=[],F=C.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",V="("+I+")"+C.commaWsp,$="([01])"+C.commaWsp+"?",Y=new RegExp(V+"?"+V+"?"+V+$+$+V+"?("+I+")","g");if(!A||!A.match)return N;for(var z,K=0,ie=(ge=A.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;K<ie;K++){ce=(P=ge[K]).slice(1).trim(),B.length=0;var ne=P.charAt(0);if(z=[ne],"a"===ne.toLowerCase())for(var Z;Z=Y.exec(ce);)for(var se=1;se<Z.length;se++)B.push(Z[se]);else for(;oe=F.exec(ce);)B.push(oe[0]);se=0;for(var ve=B.length;se<ve;se++)X=parseFloat(B[se]),isNaN(X)||z.push(X);var Ne=f[ne.toLowerCase()],Te=_[ne]||ne;if(z.length-1>Ne)for(var ee=1,Ie=z.length;ee<Ie;ee+=Ne)N.push([ne].concat(z.slice(ee,ee+Ne))),ne=Te;else N.push(z)}return N},C.util.makePathSimpler=function g(A){var I,V,$,Y,oe,ce,N=0,B=0,P=A.length,X=0,F=0,H=[];for(V=0;V<P;++V){switch($=!1,(I=A[V].slice(0))[0]){case"l":I[0]="L",I[1]+=N,I[2]+=B;case"L":N=I[1],B=I[2];break;case"h":I[1]+=N;case"H":I[0]="L",I[2]=B,N=I[1];break;case"v":I[1]+=B;case"V":I[0]="L",B=I[1],I[1]=N,I[2]=B;break;case"m":I[0]="M",I[1]+=N,I[2]+=B;case"M":N=I[1],B=I[2],X=I[1],F=I[2];break;case"c":I[0]="C",I[1]+=N,I[2]+=B,I[3]+=N,I[4]+=B,I[5]+=N,I[6]+=B;case"C":oe=I[3],ce=I[4],N=I[5],B=I[6];break;case"s":I[0]="S",I[1]+=N,I[2]+=B,I[3]+=N,I[4]+=B;case"S":"C"===Y?(oe=2*N-oe,ce=2*B-ce):(oe=N,ce=B),N=I[3],B=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=oe,I[2]=ce,oe=I[3],ce=I[4];break;case"q":I[0]="Q",I[1]+=N,I[2]+=B,I[3]+=N,I[4]+=B;case"Q":oe=I[1],ce=I[2],N=I[3],B=I[4];break;case"t":I[0]="T",I[1]+=N,I[2]+=B;case"T":"Q"===Y?(oe=2*N-oe,ce=2*B-ce):(oe=N,ce=B),I[0]="Q",N=I[1],B=I[2],I[1]=oe,I[2]=ce,I[3]=N,I[4]=B;break;case"a":I[0]="A",I[6]+=N,I[7]+=B;case"A":$=!0,H=H.concat(h(N,B,I)),N=I[6],B=I[7];break;case"z":case"Z":N=X,B=F}$||H.push(I),Y=I[0]}return H},C.util.getSmoothPathFromPoints=function me(A,N){var P,B=[],X=new C.Point(A[0].x,A[0].y),F=new C.Point(A[1].x,A[1].y),I=A.length,V=1,$=0,H=I>2;for(H&&(V=A[2].x<F.x?-1:A[2].x===F.x?0:1,$=A[2].y<F.y?-1:A[2].y===F.y?0:1),B.push(["M",X.x-V*(N=N||0),X.y-$*N]),P=1;P<I;P++){if(!X.eq(F)){var Y=X.midPointFrom(F);B.push(["Q",X.x,X.y,Y.x,Y.y])}X=A[P],P+1<A.length&&(F=A[P+1])}return H&&(V=X.x>A[P-2].x?1:X.x===A[P-2].x?0:-1,$=X.y>A[P-2].y?1:X.y===A[P-2].y?0:-1),B.push(["L",X.x+V*N,X.y+$*N]),B},C.util.getPathSegmentsInfo=he,C.util.getBoundsOfCurve=function a(A,N,B,P,X,F,I,V){var $;if(C.cachesBoundsOfCurve&&($=y.call(arguments),C.boundsOfCurveCache[$]))return C.boundsOfCurveCache[$];var z,ie,ne,Z,se,ve,Ne,Te,H=Math.sqrt,Y=Math.min,oe=Math.max,ce=Math.abs,ge=[],K=[[],[]];ie=6*A-12*B+6*X,z=-3*A+9*B-9*X+3*I,ne=3*B-3*A;for(var ee=0;ee<2;++ee)if(ee>0&&(ie=6*N-12*P+6*F,z=-3*N+9*P-9*F+3*V,ne=3*P-3*N),ce(z)<1e-12){if(ce(ie)<1e-12)continue;0<(Z=-ne/ie)&&Z<1&&ge.push(Z)}else!((Ne=ie*ie-4*ne*z)<0)&&(0<(se=(-ie+(Te=H(Ne)))/(2*z))&&se<1&&ge.push(se),0<(ve=(-ie-Te)/(2*z))&&ve<1&&ge.push(ve));for(var at,ze=ge.length,_t=ze;ze--;)K[0][ze]=(at=1-(Z=ge[ze]))*at*at*A+3*at*at*Z*B+3*at*Z*Z*X+Z*Z*Z*I,K[1][ze]=at*at*at*N+3*at*at*Z*P+3*at*Z*Z*F+Z*Z*Z*V;K[0][_t]=A,K[1][_t]=N,K[0][_t+1]=I,K[1][_t+1]=V;var qt=[{x:Y.apply(null,K[0]),y:Y.apply(null,K[1])},{x:oe.apply(null,K[0]),y:oe.apply(null,K[1])}];return C.cachesBoundsOfCurve&&(C.boundsOfCurveCache[$]=qt),qt},C.util.getPointOnPath=function pe(A,N,B){B||(B=he(A));for(var P=0;N-B[P].length>0&&P<B.length-2;)N-=B[P].length,P++;var $,X=B[P],F=N/X.length,V=A[P];switch(X.command){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return($=new C.Point(X.x,X.y).lerp(new C.Point(X.destX,X.destY),F)).angle=Math.atan2(X.destY-X.y,X.destX-X.x),$;case"L":return($=new C.Point(X.x,X.y).lerp(new C.Point(V[1],V[2]),F)).angle=Math.atan2(V[2]-X.y,V[1]-X.x),$;case"C":case"Q":return function be(A,N){for(var I,V,Y,B=0,P=0,X=A.iterator,F={x:A.x,y:A.y},$=.01,H=A.angleFinder;P<N&&$>1e-4;)I=X(B),Y=B,(V=d(F.x,F.y,I.x,I.y))+P>N?(B-=$,$/=2):(F=I,B+=$,P+=V);return I.angle=H(Y),I}(X,N)}},C.util.transformPath=function Ee(A,N,B){return B&&(N=C.util.multiplyTransformMatrices(N,[1,0,0,1,-B.x,-B.y])),A.map(function(P){for(var X=P.slice(0),F={},I=1;I<P.length-1;I+=2)F.x=P[I],F.y=P[I+1],F=C.util.transformPoint(F,N),X[I]=F.x,X[I+1]=F.y;return X})}}(),function(){var y=Array.prototype.slice;function u(a,h,g){if(a&&0!==a.length){var d=a.length-1,v=h?a[d][h]:a[d];if(h)for(;d--;)g(a[d][h],v)&&(v=a[d][h]);else for(;d--;)g(a[d],v)&&(v=a[d]);return v}}C.util.array={fill:function l(a,h){for(var g=a.length;g--;)a[g]=h;return a},invoke:function f(a,h){for(var g=y.call(arguments,2),d=[],v=0,w=a.length;v<w;v++)d[v]=g.length?a[v][h].apply(a[v],g):a[v][h].call(a[v]);return d},min:function p(a,h){return u(a,h,function(g,d){return g<d})},max:function _(a,h){return u(a,h,function(g,d){return g>=d})}}}(),function(){function y(_,p,l){if(l)if(!C.isLikelyNode&&p instanceof Element)_=p;else if(p instanceof Array){_=[];for(var u=0,a=p.length;u<a;u++)_[u]=y({},p[u],l)}else if(p&&"object"==typeof p)for(var h in p)"canvas"===h||"group"===h?_[h]=null:p.hasOwnProperty(h)&&(_[h]=y({},p[h],l));else _=p;else for(var h in p)_[h]=p[h];return _}C.util.object={extend:y,clone:function f(_,p){return y({},_,p)}},C.util.object.extend(C.util,C.Observable)}(),function(){function l(u,a){var h=u.charCodeAt(a);if(isNaN(h))return"";if(h<55296||h>57343)return u.charAt(a);if(55296<=h&&h<=56319){if(u.length<=a+1)throw"High surrogate without following low surrogate";var g=u.charCodeAt(a+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return u.charAt(a)+u.charAt(a+1)}if(0===a)throw"Low surrogate without preceding high surrogate";var d=u.charCodeAt(a-1);if(55296>d||d>56319)throw"Low surrogate without preceding high surrogate";return!1}C.util.string={camelize:function y(u){return u.replace(/-+(.)?/g,function(a,h){return h?h.toUpperCase():""})},capitalize:function f(u,a){return u.charAt(0).toUpperCase()+(a?u.slice(1):u.slice(1).toLowerCase())},escapeXml:function _(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function p(u){var h,a=0,g=[];for(a=0;a<u.length;a++)!1!==(h=l(u,a))&&g.push(h);return g}}}(),function(){var y=Array.prototype.slice,f=function(){},_=function(){for(var h in{toString:1})if("toString"===h)return!1;return!0}(),p=function(h,g,d){for(var v in g)h.prototype[v]=v in h.prototype&&"function"==typeof h.prototype[v]&&(g[v]+"").indexOf("callSuper")>-1?function(w){return function(){var S=this.constructor.superclass;this.constructor.superclass=d;var D=g[w].apply(this,arguments);if(this.constructor.superclass=S,"initialize"!==w)return D}}(v):g[v],_&&(g.toString!==Object.prototype.toString&&(h.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=g.valueOf))};function l(){}function u(h){for(var g=null,d=this;d.constructor.superclass;){var v=d.constructor.superclass.prototype[h];if(d[h]!==v){g=v;break}d=d.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,y.call(arguments,1)):g.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}C.util.createClass=function a(){var h=null,g=y.call(arguments,0);function d(){this.initialize.apply(this,arguments)}"function"==typeof g[0]&&(h=g.shift()),d.superclass=h,d.subclasses=[],h&&(l.prototype=h.prototype,d.prototype=new l,h.subclasses.push(d));for(var v=0,w=g.length;v<w;v++)p(d,g[v],h);return d.prototype.initialize||(d.prototype.initialize=f),d.prototype.constructor=d,d.prototype.callSuper=u,d}}(),function(){var y=!!C.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];C.util.addListener=function(p,l,u,a){p&&p.addEventListener(l,u,!y&&a)},C.util.removeListener=function(p,l,u,a){p&&p.removeEventListener(l,u,!y&&a)},C.util.getPointer=function(p){var u=C.util.getScrollLeftTop(p.target),a=function _(p){var l=p.changedTouches;return l&&l[0]?l[0]:p}(p);return{x:a.clientX+u.left,y:a.clientY+u.top}},C.util.isTouchEvent=function(p){return f.indexOf(p.type)>-1||"touch"===p.pointerType}}(),function(){var f=C.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(a){return a};"string"==typeof f.style.opacity?u=function(a,h){return a.style.opacity=h,a}:"string"==typeof f.style.filter&&(u=function(a,h){var g=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(g.zoom=1),l.test(g.filter)?g.filter=g.filter.replace(l,h=h>=.9999?"":"alpha(opacity="+100*h+")"):g.filter+=" alpha(opacity="+100*h+")",a}),C.util.setStyle=function y(a,h){var g=a.style;if(!g)return a;if("string"==typeof h)return a.style.cssText+=";"+h,h.indexOf("opacity")>-1?u(a,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var d in h)"opacity"===d?u(a,h[d]):g.setProperty("float"===d||"cssFloat"===d?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":d,h[d]);return a}}(),function(){var _,d,D,M,y=Array.prototype.slice,p=function(D){return y.call(D,0)};try{_=p(C.document.childNodes)instanceof Array}catch{}function l(D,M){var T=C.document.createElement(D);for(var R in M)"class"===R?T.className=M[R]:"for"===R?T.htmlFor=M[R]:T.setAttribute(R,M[R]);return T}function h(D){for(var M=0,T=0,R=C.document.documentElement,j=C.document.body||{scrollLeft:0,scrollTop:0};D&&(D.parentNode||D.host)&&((D=D.parentNode||D.host)===C.document?(M=j.scrollLeft||R.scrollLeft||0,T=j.scrollTop||R.scrollTop||0):(M+=D.scrollLeft||0,T+=D.scrollTop||0),1!==D.nodeType||"fixed"!==D.style.position););return{left:M,top:T}}_||(p=function(D){for(var M=new Array(D.length),T=D.length;T--;)M[T]=D[T];return M}),d=C.document.defaultView&&C.document.defaultView.getComputedStyle?function(D,M){var T=C.document.defaultView.getComputedStyle(D,null);return T?T[M]:void 0}:function(D,M){var T=D.style[M];return!T&&D.currentStyle&&(T=D.currentStyle[M]),T},M="userSelect"in(D=C.document.documentElement.style)?"userSelect":"MozUserSelect"in D?"MozUserSelect":"WebkitUserSelect"in D?"WebkitUserSelect":"KhtmlUserSelect"in D?"KhtmlUserSelect":"",C.util.makeElementUnselectable=function T(j){return typeof j.onselectstart<"u"&&(j.onselectstart=C.util.falseFunction),M?j.style[M]="none":"string"==typeof j.unselectable&&(j.unselectable="on"),j},C.util.makeElementSelectable=function R(j){return typeof j.onselectstart<"u"&&(j.onselectstart=null),M?j.style[M]="":"string"==typeof j.unselectable&&(j.unselectable=""),j},C.util.setImageSmoothing=function S(D,M){D.imageSmoothingEnabled=D.imageSmoothingEnabled||D.webkitImageSmoothingEnabled||D.mozImageSmoothingEnabled||D.msImageSmoothingEnabled||D.oImageSmoothingEnabled,D.imageSmoothingEnabled=M},C.util.getById=function f(D){return"string"==typeof D?C.document.getElementById(D):D},C.util.toArray=p,C.util.addClass=function u(D,M){D&&-1===(" "+D.className+" ").indexOf(" "+M+" ")&&(D.className+=(D.className?" ":"")+M)},C.util.makeElement=l,C.util.wrapElement=function a(D,M,T){return"string"==typeof M&&(M=l(M,T)),D.parentNode&&D.parentNode.replaceChild(M,D),M.appendChild(D),M},C.util.getScrollLeftTop=h,C.util.getElementOffset=function g(D){var M,q,T=D&&D.ownerDocument,R={left:0,top:0},j={left:0,top:0},ae={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!T)return j;for(var de in ae)j[ae[de]]+=parseInt(d(D,de),10)||0;return M=T.documentElement,typeof D.getBoundingClientRect<"u"&&(R=D.getBoundingClientRect()),q=h(D),{left:R.left+q.left-(M.clientLeft||0)+j.left,top:R.top+q.top-(M.clientTop||0)+j.top}},C.util.getNodeCanvas=function v(D){var M=C.jsdomImplForWrapper(D);return M._canvas||M._image},C.util.cleanUpJsdomNode=function w(D){if(C.isLikelyNode){var M=C.jsdomImplForWrapper(D);M&&(M._image=null,M._canvas=null,M._currentSrc=null,M._attributes=null,M._classList=null)}}}(),function(){function f(){}C.util.request=function _(p,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",a=l.onComplete||function(){},h=new C.window.XMLHttpRequest,g=l.body||l.parameters;return h.onreadystatechange=function(){4===h.readyState&&(a(h),h.onreadystatechange=f)},"GET"===u&&(g=null,"string"==typeof l.parameters&&(p=function y(p,l){return p+(/\?/.test(p)?"&":"?")+l}(p,l.parameters))),h.open(u,p,!0),("POST"===u||"PUT"===u)&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g),h}}(),C.log=console.log,C.warn=console.warn,function(){var y=C.util.object.extend,f=C.util.object.clone,_=[];function p(){return!1}function l(v,w,S,D){return-S*Math.cos(v/D*(Math.PI/2))+S+w}C.util.object.extend(_,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(w){w.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var w=this.filter(function(S){return"object"==typeof S.target&&S.target.canvas===v});return w.forEach(function(S){S.cancel()}),w},cancelByTarget:function(v){var w=this.findAnimationsByTarget(v);return w.forEach(function(S){S.cancel()}),w},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(w){return w.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(w){return w.target===v}):[]}});var a=C.window.requestAnimationFrame||C.window.webkitRequestAnimationFrame||C.window.mozRequestAnimationFrame||C.window.oRequestAnimationFrame||C.window.msRequestAnimationFrame||function(v){return C.window.setTimeout(v,1e3/60)},h=C.window.cancelAnimationFrame||C.window.clearTimeout;function g(){return a.apply(C.window,arguments)}C.util.animate=function u(v){v||(v={});var S,w=!1,D=function(){var M=C.runningAnimations.indexOf(S);return M>-1&&C.runningAnimations.splice(M,1)[0]};return S=y(f(v),{cancel:function(){return w=!0,D()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),C.runningAnimations.push(S),g(function(M){var q,T=M||+new Date,R=v.duration||500,j=T+R,ae=v.onChange||p,de=v.abort||p,_e=v.onComplete||p,be=v.easing||l,he="startValue"in v&&v.startValue.length>0,pe="startValue"in v?v.startValue:0,De="endValue"in v?v.endValue:100,me=v.byValue||(he?pe.map(function(Ee,A){return De[A]-pe[A]}):De-pe);v.onStart&&v.onStart(),function Ee(A){var N=(q=A||+new Date)>j?R:q-T,B=N/R,P=he?pe.map(function(F,I){return be(N,pe[I],me[I],R)}):be(N,pe,me,R),X=Math.abs(he?(P[0]-pe[0])/me[0]:(P-pe)/me);if(S.currentValue=he?P.slice():P,S.completionRate=X,S.durationRate=B,!w){if(de(P,X,B))return void D();if(q>j)return S.currentValue=he?De.slice():De,S.completionRate=1,S.durationRate=1,ae(he?De.slice():De,1,1),_e(De,1,1),void D();ae(P,X,B),g(Ee)}}(T)}),S.cancel},C.util.requestAnimFrame=g,C.util.cancelAnimFrame=function d(){return h.apply(C.window,arguments)},C.runningAnimations=_}(),function(){function y(_,p,l){var u="rgba("+parseInt(_[0]+l*(p[0]-_[0]),10)+","+parseInt(_[1]+l*(p[1]-_[1]),10)+","+parseInt(_[2]+l*(p[2]-_[2]),10);return(u+=","+(_&&p?parseFloat(_[3]+l*(p[3]-_[3])):1))+")"}C.util.animateColor=function f(_,p,l,u){var a=new C.Color(_).getSource(),h=new C.Color(p).getSource(),g=u.onComplete,d=u.onChange;return C.util.animate(C.util.object.extend(u=u||{},{duration:l||500,startValue:a,endValue:h,byValue:h,easing:function(v,w,S,D){return y(w,S,u.colorEasing?u.colorEasing(v,D):1-Math.cos(v/D*(Math.PI/2)))},onComplete:function(v,w,S){if(g)return g(y(h,h,0),w,S)},onChange:function(v,w,S){if(d){if(Array.isArray(v))return d(y(v,v,0),w,S);d(v,w,S)}}}))}}(),function(){function y(A,N,B,P){return A<Math.abs(N)?(A=N,P=B/4):P=0===N&&0===A?B/(2*Math.PI)*Math.asin(1):B/(2*Math.PI)*Math.asin(N/A),{a:A,c:N,p:B,s:P}}function f(A,N,B){return A.a*Math.pow(2,10*(N-=1))*Math.sin((N*B-A.s)*(2*Math.PI)/A.p)}function De(A,N,B,P){return B-me(P-A,0,B,P)+N}function me(A,N,B,P){return(A/=P)<1/2.75?B*(7.5625*A*A)+N:A<2/2.75?B*(7.5625*(A-=1.5/2.75)*A+.75)+N:A<2.5/2.75?B*(7.5625*(A-=2.25/2.75)*A+.9375)+N:B*(7.5625*(A-=2.625/2.75)*A+.984375)+N}C.util.ease={easeInQuad:function(A,N,B,P){return B*(A/=P)*A+N},easeOutQuad:function(A,N,B,P){return-B*(A/=P)*(A-2)+N},easeInOutQuad:function(A,N,B,P){return(A/=P/2)<1?B/2*A*A+N:-B/2*(--A*(A-2)-1)+N},easeInCubic:function(A,N,B,P){return B*(A/=P)*A*A+N},easeOutCubic:function _(A,N,B,P){return B*((A=A/P-1)*A*A+1)+N},easeInOutCubic:function p(A,N,B,P){return(A/=P/2)<1?B/2*A*A*A+N:B/2*((A-=2)*A*A+2)+N},easeInQuart:function l(A,N,B,P){return B*(A/=P)*A*A*A+N},easeOutQuart:function u(A,N,B,P){return-B*((A=A/P-1)*A*A*A-1)+N},easeInOutQuart:function a(A,N,B,P){return(A/=P/2)<1?B/2*A*A*A*A+N:-B/2*((A-=2)*A*A*A-2)+N},easeInQuint:function h(A,N,B,P){return B*(A/=P)*A*A*A*A+N},easeOutQuint:function g(A,N,B,P){return B*((A=A/P-1)*A*A*A*A+1)+N},easeInOutQuint:function d(A,N,B,P){return(A/=P/2)<1?B/2*A*A*A*A*A+N:B/2*((A-=2)*A*A*A*A+2)+N},easeInSine:function v(A,N,B,P){return-B*Math.cos(A/P*(Math.PI/2))+B+N},easeOutSine:function w(A,N,B,P){return B*Math.sin(A/P*(Math.PI/2))+N},easeInOutSine:function S(A,N,B,P){return-B/2*(Math.cos(Math.PI*A/P)-1)+N},easeInExpo:function D(A,N,B,P){return 0===A?N:B*Math.pow(2,10*(A/P-1))+N},easeOutExpo:function M(A,N,B,P){return A===P?N+B:B*(1-Math.pow(2,-10*A/P))+N},easeInOutExpo:function T(A,N,B,P){return 0===A?N:A===P?N+B:(A/=P/2)<1?B/2*Math.pow(2,10*(A-1))+N:B/2*(2-Math.pow(2,-10*--A))+N},easeInCirc:function R(A,N,B,P){return-B*(Math.sqrt(1-(A/=P)*A)-1)+N},easeOutCirc:function j(A,N,B,P){return B*Math.sqrt(1-(A=A/P-1)*A)+N},easeInOutCirc:function q(A,N,B,P){return(A/=P/2)<1?-B/2*(Math.sqrt(1-A*A)-1)+N:B/2*(Math.sqrt(1-(A-=2)*A)+1)+N},easeInElastic:function ae(A,N,B,P){var F=0;return 0===A?N:1==(A/=P)?N+B:(F||(F=.3*P),-f(y(B,B,F,1.70158),A,P)+N)},easeOutElastic:function de(A,N,B,P){var F=0;if(0===A)return N;if(1==(A/=P))return N+B;F||(F=.3*P);var V=y(B,B,F,1.70158);return V.a*Math.pow(2,-10*A)*Math.sin((A*P-V.s)*(2*Math.PI)/V.p)+V.c+N},easeInOutElastic:function _e(A,N,B,P){var F=0;if(0===A)return N;if(2==(A/=P/2))return N+B;F||(F=P*(.3*1.5));var V=y(B,B,F,1.70158);return A<1?-.5*f(V,A,P)+N:V.a*Math.pow(2,-10*(A-=1))*Math.sin((A*P-V.s)*(2*Math.PI)/V.p)*.5+V.c+N},easeInBack:function be(A,N,B,P,X){return void 0===X&&(X=1.70158),B*(A/=P)*A*((X+1)*A-X)+N},easeOutBack:function he(A,N,B,P,X){return void 0===X&&(X=1.70158),B*((A=A/P-1)*A*((X+1)*A+X)+1)+N},easeInOutBack:function pe(A,N,B,P,X){return void 0===X&&(X=1.70158),(A/=P/2)<1?B/2*(A*A*((1+(X*=1.525))*A-X))+N:B/2*((A-=2)*A*((1+(X*=1.525))*A+X)+2)+N},easeInBounce:De,easeOutBounce:me,easeInOutBounce:function Ee(A,N,B,P){return A<P/2?.5*De(2*A,0,B,P)+N:.5*me(2*A-P,0,B,P)+.5*B+N}}}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.util.object.clone,l=f.util.toFixed,u=f.util.parseUnit,a=f.util.multiplyTransformMatrices,w={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},S={stroke:"strokeOpacity",fill:"fillOpacity"},D="font-size",M="clip-path";function T(F){return F in w?w[F]:F}function R(F,I,V,$){var Y,H=Array.isArray(I);if("fill"!==F&&"stroke"!==F||"none"!==I){if("strokeUniform"===F)return"non-scaling-stroke"===I;if("strokeDashArray"===F)I="none"===I?null:I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===F)I=V&&V.transformMatrix?a(V.transformMatrix,f.parseTransformAttribute(I)):f.parseTransformAttribute(I);else if("visible"===F)I="none"!==I&&"hidden"!==I,V&&!1===V.visible&&(I=!1);else if("opacity"===F)I=parseFloat(I),V&&typeof V.opacity<"u"&&(I*=V.opacity);else if("textAnchor"===F)I="start"===I?"left":"end"===I?"right":"center";else if("charSpacing"===F)Y=u(I,$)/$*1e3;else if("paintFirst"===F){var oe=I.indexOf("fill"),ce=I.indexOf("stroke");I="fill",(oe>-1&&ce>-1&&ce<oe||-1===oe&&ce>-1)&&(I="stroke")}else{if("href"===F||"xlink:href"===F||"font"===F)return I;if("imageSmoothing"===F)return"optimizeQuality"===I;Y=H?I.map(u):u(I,$)}}else I="";return!H&&isNaN(Y)?I:Y}function j(F){return new RegExp("^("+F.join("|")+")\\b","i")}function ae(F,I){var H,Y,oe,$=[];for(Y=0,oe=I.length;Y<oe;Y++)H=F.getElementsByTagName(I[Y]),$=$.concat(Array.prototype.slice.call(H));return $}function he(F,I){var V,$=!0;return(V=De(F,I.pop()))&&I.length&&($=function pe(F,I){for(var V,$=!0;F.parentNode&&1===F.parentNode.nodeType&&I.length;)$&&(V=I.pop()),$=De(F=F.parentNode,V);return 0===I.length}(F,I)),V&&$&&0===I.length}function De(F,I){var Y,oe,V=F.nodeName,$=F.getAttribute("class"),H=F.getAttribute("id");if(Y=new RegExp("^"+V,"i"),I=I.replace(Y,""),H&&I.length&&(Y=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),I=I.replace(Y,"")),$&&I.length)for(oe=($=$.split(" ")).length;oe--;)Y=new RegExp("\\."+$[oe]+"(?![a-zA-Z\\-]+)","i"),I=I.replace(Y,"");return 0===I.length}function me(F,I){var V;if(F.getElementById&&(V=F.getElementById(I)),V)return V;var $,H,Y,oe=F.getElementsByTagName("*");for(H=0,Y=oe.length;H<Y;H++)if(I===($=oe[H]).getAttribute("id"))return $}f.svgValidTagNamesRegEx=j(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),f.svgViewBoxElementsRegEx=j(["symbol","image","marker","pattern","view","svg"]),f.svgInvalidAncestorsRegEx=j(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),f.svgValidParentsRegEx=j(["symbol","g","a","svg","clipPath","defs"]),f.cssRules={},f.gradientDefs={},f.clipPaths={},f.parseTransformAttribute=function(){function V(ee,Ie,He){ee[He]=Math.tan(f.util.degreesToRadians(Ie[0]))}var H=f.iMatrix,Y=f.reNum,oe=f.commaWsp,Z="(?:(?:(matrix)\\s*\\(\\s*("+Y+")"+oe+"("+Y+")"+oe+"("+Y+")"+oe+"("+Y+")"+oe+"("+Y+")"+oe+"("+Y+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+Y+")(?:"+oe+"("+Y+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+Y+")(?:"+oe+"("+Y+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+Y+")(?:"+oe+"("+Y+")"+oe+"("+Y+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+Y+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+Y+")\\s*\\)))",Ne=new RegExp("^\\s*(?:(?:"+Z+"(?:"+oe+"*"+Z+")*)?)\\s*$"),Te=new RegExp(Z,"g");return function(ee){var Ie=H.concat(),He=[];if(!ee||ee&&!Ne.test(ee))return Ie;ee.replace(Te,function(_t){var at=new RegExp(Z).exec(_t).filter(function(Vn){return!!Vn}),qt=at[1],Ot=at.slice(2).map(parseFloat);switch(qt){case"translate":!function $(ee,Ie){ee[4]=Ie[0],2===Ie.length&&(ee[5]=Ie[1])}(Ie,Ot);break;case"rotate":Ot[0]=f.util.degreesToRadians(Ot[0]),function F(ee,Ie){var He=f.util.cos(Ie[0]),ze=f.util.sin(Ie[0]),_t=0,at=0;3===Ie.length&&(_t=Ie[1],at=Ie[2]),ee[0]=He,ee[1]=ze,ee[2]=-ze,ee[3]=He,ee[4]=_t-(He*_t-ze*at),ee[5]=at-(ze*_t+He*at)}(Ie,Ot);break;case"scale":!function I(ee,Ie){var ze=2===Ie.length?Ie[1]:Ie[0];ee[0]=Ie[0],ee[3]=ze}(Ie,Ot);break;case"skewX":V(Ie,Ot,2);break;case"skewY":V(Ie,Ot,1);break;case"matrix":Ie=Ot}He.push(Ie.concat()),Ie=H.concat()});for(var ze=He[0];He.length>1;)He.shift(),ze=f.util.multiplyTransformMatrices(ze,He[0]);return ze}}();var A=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function N(F){if(!f.svgViewBoxElementsRegEx.test(F.nodeName))return{};var H,Y,oe,ce,ge,K,I=F.getAttribute("viewBox"),V=1,$=1,z=F.getAttribute("width"),ie=F.getAttribute("height"),ne=F.getAttribute("x")||0,Z=F.getAttribute("y")||0,se=F.getAttribute("preserveAspectRatio")||"",ve=!I||!(I=I.match(A)),Ne=!z||!ie||"100%"===z||"100%"===ie,Te=ve&&Ne,ee={},Ie="",He=0,ze=0;if(ee.width=0,ee.height=0,ee.toBeParsed=Te,ve&&(ne||Z)&&F.parentNode&&"#document"!==F.parentNode.nodeName&&(Ie=" translate("+u(ne)+" "+u(Z)+") ",ge=(F.getAttribute("transform")||"")+Ie,F.setAttribute("transform",ge),F.removeAttribute("x"),F.removeAttribute("y")),Te)return ee;if(ve)return ee.width=u(z),ee.height=u(ie),ee;if(H=-parseFloat(I[1]),Y=-parseFloat(I[2]),oe=parseFloat(I[3]),ce=parseFloat(I[4]),ee.minX=H,ee.minY=Y,ee.viewBoxWidth=oe,ee.viewBoxHeight=ce,Ne?(ee.width=oe,ee.height=ce):(ee.width=u(z),ee.height=u(ie),V=ee.width/oe,$=ee.height/ce),"none"!==(se=f.util.parsePreserveAspectRatioAttribute(se)).alignX&&("meet"===se.meetOrSlice&&($=V=V>$?$:V),"slice"===se.meetOrSlice&&($=V=V>$?V:$),He=ee.width-oe*V,ze=ee.height-ce*V,"Mid"===se.alignX&&(He/=2),"Mid"===se.alignY&&(ze/=2),"Min"===se.alignX&&(He=0),"Min"===se.alignY&&(ze=0)),1===V&&1===$&&0===H&&0===Y&&0===ne&&0===Z)return ee;if((ne||Z)&&"#document"!==F.parentNode.nodeName&&(Ie=" translate("+u(ne)+" "+u(Z)+") "),ge=Ie+" matrix("+V+" 0 0 "+$+" "+(H*V+He)+" "+(Y*$+ze)+") ","svg"===F.nodeName){for(K=F.ownerDocument.createElementNS(f.svgNS,"g");F.firstChild;)K.appendChild(F.firstChild);F.appendChild(K)}else(K=F).removeAttribute("x"),K.removeAttribute("y"),ge=K.getAttribute("transform")+ge;return K.setAttribute("transform",ge),ee}function P(F,I){var $="xlink:href",Y=me(F,I.getAttribute($).slice(1));if(Y&&Y.getAttribute($)&&P(F,Y),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(ce){Y&&!I.hasAttribute(ce)&&Y.hasAttribute(ce)&&I.setAttribute(ce,Y.getAttribute(ce))}),!I.children.length)for(var oe=Y.cloneNode(!0);oe.firstChild;)I.appendChild(oe.firstChild);I.removeAttribute($)}f.parseSVGDocument=function(F,I,V,$){if(F){!function Ee(F){for(var I=ae(F,["use","svg:use"]),V=0;I.length&&V<I.length;){var $=I[V],H=$.getAttribute("xlink:href")||$.getAttribute("href");if(null===H)return;var ne,Z,se,ve,Y=H.slice(1),oe=$.getAttribute("x")||0,ce=$.getAttribute("y")||0,ge=me(F,Y).cloneNode(!0),K=(ge.getAttribute("transform")||"")+" translate("+oe+", "+ce+")",ie=I.length,Ne=f.svgNS;if(N(ge),/^svg$/i.test(ge.nodeName)){var Te=ge.ownerDocument.createElementNS(Ne,"g");for(Z=0,ve=(se=ge.attributes).length;Z<ve;Z++)ne=se.item(Z),Te.setAttributeNS(Ne,ne.nodeName,ne.nodeValue);for(;ge.firstChild;)Te.appendChild(ge.firstChild);ge=Te}for(Z=0,ve=(se=$.attributes).length;Z<ve;Z++)"x"!==(ne=se.item(Z)).nodeName&&"y"!==ne.nodeName&&"xlink:href"!==ne.nodeName&&"href"!==ne.nodeName&&("transform"===ne.nodeName?K=ne.nodeValue+" "+K:ge.setAttribute(ne.nodeName,ne.nodeValue));ge.setAttribute("transform",K),ge.setAttribute("instantiated_by_use","1"),ge.removeAttribute("id"),$.parentNode.replaceChild(ge,$),I.length===ie&&V++}}(F);var Y,oe,H=f.Object.__uid++,ce=N(F),ge=f.util.toArray(F.getElementsByTagName("*"));if(ce.crossOrigin=$&&$.crossOrigin,ce.svgUid=H,0===ge.length&&f.isLikelyNode){var K=[];for(Y=0,oe=(ge=F.selectNodes('//*[name(.)!="svg"]')).length;Y<oe;Y++)K[Y]=ge[Y];ge=K}var z=ge.filter(function(ne){return N(ne),f.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:",""))&&!function B(F,I){for(;F&&(F=F.parentNode);)if(F.nodeName&&I.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}(ne,f.svgInvalidAncestorsRegEx)});if(!z||z&&!z.length)return void(I&&I([],{}));var ie={};ge.filter(function(ne){return"clipPath"===ne.nodeName.replace("svg:","")}).forEach(function(ne){var Z=ne.getAttribute("id");ie[Z]=f.util.toArray(ne.getElementsByTagName("*")).filter(function(se){return f.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))})}),f.gradientDefs[H]=f.getGradientDefs(F),f.cssRules[H]=f.getCSSRules(F),f.clipPaths[H]=ie,f.parseElements(z,function(ne,Z){I&&(I(ne,ce,Z,ge),delete f.gradientDefs[H],delete f.cssRules[H],delete f.clipPaths[H])},p(ce),V,$)}};var X=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");_(f,{parseFontDeclaration:function(F,I){var V=F.match(X);if(V){var $=V[1],H=V[3],Y=V[4],oe=V[5],ce=V[6];$&&(I.fontStyle=$),H&&(I.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),Y&&(I.fontSize=u(Y)),ce&&(I.fontFamily=ce),oe&&(I.lineHeight="normal"===oe?1:oe)}},getGradientDefs:function(F){var $,V=ae(F,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),H=0,Y={};for(H=V.length;H--;)($=V[H]).getAttribute("xlink:href")&&P(F,$),Y[$.getAttribute("id")]=$;return Y},parseAttributes:function(F,I,V){if(F){var $,Y,oe,H={};typeof V>"u"&&(V=F.getAttribute("svgUid")),F.parentNode&&f.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(H=f.parseAttributes(F.parentNode,I,V));var ce=I.reduce(function(se,ve){return($=F.getAttribute(ve))&&(se[ve]=$),se},{}),ge=_(function be(F,I){var V={};for(var $ in f.cssRules[I])if(he(F,$.split(" ")))for(var H in f.cssRules[I][$])V[H]=f.cssRules[I][$][H];return V}(F,V),f.parseStyleAttribute(F));ce=_(ce,ge),ge[M]&&F.setAttribute(M,ge[M]),Y=oe=H.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,ce[D]&&(ce[D]=Y=u(ce[D],oe));var K,z,ie={};for(var ne in ce)z=R(K=T(ne),ce[ne],H,Y),ie[K]=z;ie&&ie.font&&f.parseFontDeclaration(ie.font,ie);var Z=_(H,ie);return f.svgValidParentsRegEx.test(F.nodeName)?Z:function q(F){for(var I in S)if(!(typeof F[S[I]]>"u"||""===F[I])){if(typeof F[I]>"u"){if(!f.Object.prototype[I])continue;F[I]=f.Object.prototype[I]}if(0!==F[I].indexOf("url(")){var V=new f.Color(F[I]);F[I]=V.setAlpha(l(V.getAlpha()*F[S[I]],2)).toRgba()}}return F}(Z)}},parseElements:function(F,I,V,$,H){new f.ElementsParser(F,I,V,$,H).parse()},parseStyleAttribute:function(F){var I={},V=F.getAttribute("style");return V&&("string"==typeof V?function de(F,I){var V,$;F.replace(/;\s*$/,"").split(";").forEach(function(H){var Y=H.split(":");V=Y[0].trim().toLowerCase(),$=Y[1].trim(),I[V]=$})}(V,I):function _e(F,I){for(var H in F)typeof F[H]>"u"||(I[H.toLowerCase()]=F[H])}(V,I)),I},parsePointsAttribute:function(F){if(!F)return null;var V,$,I=[];for(V=0,$=(F=(F=F.replace(/,/g," ").trim()).split(/\s+/)).length;V<$;V+=2)I.push({x:parseFloat(F[V]),y:parseFloat(F[V+1])});return I},getCSSRules:function(F){var V,$,I=F.getElementsByTagName("style"),H={};for(V=0,$=I.length;V<$;V++){var oe=I[V].textContent;""!==(oe=oe.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&oe.split("}").filter(function(ce){return ce.trim()}).forEach(function(ce){var ge=ce.split("{"),K={},ie=ge[1].trim().split(";").filter(function(ve){return ve.trim()});for(V=0,$=ie.length;V<$;V++){var ne=ie[V].split(":"),Z=ne[0].trim(),se=ne[1].trim();K[Z]=se}(ce=ge[0].trim()).split(",").forEach(function(ve){""!==(ve=ve.replace(/^svg/i,"").trim())&&(H[ve]?f.util.object.extend(H[ve],K):H[ve]=f.util.object.clone(K))})})}return H},loadSVGFromURL:function(F,I,V,$){F=F.replace(/^\n\s*/,"").trim(),new f.util.request(F,{method:"get",onComplete:function H(Y){var oe=Y.responseXML;if(!oe||!oe.documentElement)return I&&I(null),!1;f.parseSVGDocument(oe.documentElement,function(ce,ge,K,z){I&&I(ce,ge,K,z)},V,$)}})},loadSVGFromString:function(F,I,V,$){var Y=(new f.window.DOMParser).parseFromString(F.trim(),"text/xml");f.parseSVGDocument(Y.documentElement,function(oe,ce,ge,K){I(oe,ce,ge,K)},V,$)}})}(Be),C.ElementsParser=function(y,f,_,p,l,u){this.elements=y,this.callback=f,this.options=_,this.reviver=p,this.svgUid=_&&_.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(y){y.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},y.createObjects=function(){var f=this;this.elements.forEach(function(_,p){_.setAttribute("svgUid",f.svgUid),f.createObject(_,p)})},y.findTag=function(f){return C[C.util.string.capitalize(f.tagName.replace("svg:",""))]},y.createObject=function(f,_){var p=this.findTag(f);if(p&&p.fromElement)try{p.fromElement(f,this.createCallback(_,f),this.options)}catch(l){C.log(l)}else this.checkIfDone()},y.createCallback=function(f,_){var p=this;return function(l){var u;p.resolveGradient(l,_,"fill"),p.resolveGradient(l,_,"stroke"),l instanceof C.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(_)),l._removeTransformMatrix(u),p.resolveClipPath(l,_),p.reviver&&p.reviver(_,l),p.instances[f]=l,p.checkIfDone()}},y.extractPropertyDefinition=function(f,_,p){var l=f[_],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var a=u.exec(l)[1];return u.lastIndex=0,C[p][this.svgUid][a]}},y.resolveGradient=function(f,_,p){var l=this.extractPropertyDefinition(f,p,"gradientDefs");if(l){var u=_.getAttribute(p+"-opacity"),a=C.Gradient.fromElement(l,f,u,this.options);f.set(p,a)}},y.createClipPathCallback=function(f,_){return function(p){p._removeTransformMatrix(),p.fillRule=p.clipRule,_.push(p)}},y.resolveClipPath=function(f,_){var l,a,h,g,p=this.extractPropertyDefinition(f,"clipPath","clipPaths");if(p){h=[],a=C.util.invertTransform(f.calcTransformMatrix());for(var v=p[0].parentNode,w=_;w.parentNode&&w.getAttribute("clip-path")!==f.clipPath;)w=w.parentNode;w.parentNode.appendChild(v);for(var S=0;S<p.length;S++)this.findTag(l=p[S]).fromElement(l,this.createClipPathCallback(f,h),this.options);p=1===h.length?h[0]:new C.Group(h),g=C.util.multiplyTransformMatrices(a,p.calcTransformMatrix()),p.clipPath&&this.resolveClipPath(p,w);var d=C.util.qrDecompose(g);p.flipX=!1,p.flipY=!1,p.set("scaleX",d.scaleX),p.set("scaleY",d.scaleY),p.angle=d.angle,p.skewX=d.skewX,p.skewY=0,p.setPositionByOrigin({x:d.translateX,y:d.translateY},"center","center"),f.clipPath=p}else delete f.clipPath},y.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(f){return null!=f}),this.callback(this.instances,this.elements))}}(C.ElementsParser.prototype),function(y){"use strict";var f=y.fabric||(y.fabric={});function _(p,l){this.x=p,this.y=l}f.Point?f.warn("fabric.Point is already defined"):(f.Point=_,_.prototype={type:"point",constructor:_,add:function(p){return new _(this.x+p.x,this.y+p.y)},addEquals:function(p){return this.x+=p.x,this.y+=p.y,this},scalarAdd:function(p){return new _(this.x+p,this.y+p)},scalarAddEquals:function(p){return this.x+=p,this.y+=p,this},subtract:function(p){return new _(this.x-p.x,this.y-p.y)},subtractEquals:function(p){return this.x-=p.x,this.y-=p.y,this},scalarSubtract:function(p){return new _(this.x-p,this.y-p)},scalarSubtractEquals:function(p){return this.x-=p,this.y-=p,this},multiply:function(p){return new _(this.x*p,this.y*p)},multiplyEquals:function(p){return this.x*=p,this.y*=p,this},divide:function(p){return new _(this.x/p,this.y/p)},divideEquals:function(p){return this.x/=p,this.y/=p,this},eq:function(p){return this.x===p.x&&this.y===p.y},lt:function(p){return this.x<p.x&&this.y<p.y},lte:function(p){return this.x<=p.x&&this.y<=p.y},gt:function(p){return this.x>p.x&&this.y>p.y},gte:function(p){return this.x>=p.x&&this.y>=p.y},lerp:function(p,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new _(this.x+(p.x-this.x)*l,this.y+(p.y-this.y)*l)},distanceFrom:function(p){var l=this.x-p.x,u=this.y-p.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(p){return this.lerp(p)},min:function(p){return new _(Math.min(this.x,p.x),Math.min(this.y,p.y))},max:function(p){return new _(Math.max(this.x,p.x),Math.max(this.y,p.y))},toString:function(){return this.x+","+this.y},setXY:function(p,l){return this.x=p,this.y=l,this},setX:function(p){return this.x=p,this},setY:function(p){return this.y=p,this},setFromPoint:function(p){return this.x=p.x,this.y=p.y,this},swap:function(p){var l=this.x,u=this.y;this.x=p.x,this.y=p.y,p.x=l,p.y=u},clone:function(){return new _(this.x,this.y)}})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={});function _(p){this.status=p,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=_,f.Intersection.prototype={constructor:_,appendPoint:function(p){return this.points.push(p),this},appendPoints:function(p){return this.points=this.points.concat(p),this}},f.Intersection.intersectLineLine=function(p,l,u,a){var h,g=(a.x-u.x)*(p.y-u.y)-(a.y-u.y)*(p.x-u.x),d=(l.x-p.x)*(p.y-u.y)-(l.y-p.y)*(p.x-u.x),v=(a.y-u.y)*(l.x-p.x)-(a.x-u.x)*(l.y-p.y);if(0!==v){var w=g/v,S=d/v;0<=w&&w<=1&&0<=S&&S<=1?(h=new _("Intersection")).appendPoint(new f.Point(p.x+w*(l.x-p.x),p.y+w*(l.y-p.y))):h=new _}else h=new _(0===g||0===d?"Coincident":"Parallel");return h},f.Intersection.intersectLinePolygon=function(p,l,u){var v,w,a=new _,h=u.length;for(w=0;w<h;w++)v=_.intersectLineLine(p,l,u[w],u[(w+1)%h]),a.appendPoints(v.points);return a.points.length>0&&(a.status="Intersection"),a},f.Intersection.intersectPolygonPolygon=function(p,l){var h,u=new _,a=p.length;for(h=0;h<a;h++){var v=_.intersectLinePolygon(p[h],p[(h+1)%a],l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},f.Intersection.intersectPolygonRectangle=function(p,l,u){var a=l.min(u),h=l.max(u),g=new f.Point(h.x,a.y),d=new f.Point(a.x,h.y),v=_.intersectLinePolygon(a,g,p),w=_.intersectLinePolygon(g,h,p),S=_.intersectLinePolygon(h,d,p),D=_.intersectLinePolygon(d,a,p),M=new _;return M.appendPoints(v.points),M.appendPoints(w.points),M.appendPoints(S.points),M.appendPoints(D.points),M.points.length>0&&(M.status="Intersection"),M})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={});function _(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}function p(l,u,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?l+6*(u-l)*a:a<.5?u:a<2/3?l+(u-l)*(2/3-a)*6:l}f.Color?f.warn("fabric.Color is already defined."):(f.Color=_,f.Color.prototype={_tryParsingColor:function(l){var u;l in _.colorNameMap&&(l=_.colorNameMap[l]),"transparent"===l&&(u=[255,255,255,0]),u||(u=_.sourceFromHex(l)),u||(u=_.sourceFromRgb(l)),u||(u=_.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,a){var h,g,d,v=f.util.array.max([l/=255,u/=255,a/=255]),w=f.util.array.min([l,u,a]);if(d=(v+w)/2,v===w)h=g=0;else{var S=v-w;switch(g=d>.5?S/(2-v-w):S/(v+w),v){case l:h=(u-a)/S+(u<a?6:0);break;case u:h=(a-l)/S+2;break;case a:h=(l-u)/S+4}h/=6}return[Math.round(360*h),Math.round(100*g),Math.round(100*d)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var u,a,h,l=this.getSource();return u=1===(u=l[0].toString(16)).length?"0"+u:u,a=1===(a=l[1].toString(16)).length?"0"+a:a,h=1===(h=l[2].toString(16)).length?"0"+h:h,u.toUpperCase()+a.toUpperCase()+h.toUpperCase()},toHexa:function(){var u,l=this.getSource();return u=1===(u=(u=Math.round(255*l[3])).toString(16)).length?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((.3*l[0]+.59*l[1]+.11*l[2]).toFixed(0),10);return this.setSource([u,u,u,l[3]]),this},toBlackWhite:function(l){var u=this.getSource(),a=(.3*u[0]+.59*u[1]+.11*u[2]).toFixed(0),h=u[3];return l=l||127,a=Number(a)<Number(l)?0:255,this.setSource([a,a,a,h]),this},overlayWith:function(l){l instanceof _||(l=new _(l));var v,u=[],a=this.getAlpha(),g=this.getSource(),d=l.getSource();for(v=0;v<3;v++)u.push(Math.round(.5*g[v]+.5*d[v]));return u[3]=a,this.setSource(u),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},f.Color.fromRgb=function(l){return _.fromSource(_.sourceFromRgb(l))},f.Color.sourceFromRgb=function(l){var u=l.match(_.reRGBa);if(u){var a=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),h=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),g=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(a,10),parseInt(h,10),parseInt(g,10),u[4]?parseFloat(u[4]):1]}},f.Color.fromRgba=_.fromRgb,f.Color.fromHsl=function(l){return _.fromSource(_.sourceFromHsl(l))},f.Color.sourceFromHsl=function(l){var u=l.match(_.reHSLa);if(u){var d,v,w,a=(parseFloat(u[1])%360+360)%360/360,h=parseFloat(u[2])/(/%$/.test(u[2])?100:1),g=parseFloat(u[3])/(/%$/.test(u[3])?100:1);if(0===h)d=v=w=g;else{var S=g<=.5?g*(h+1):g+h-g*h,D=2*g-S;d=p(D,S,a+1/3),v=p(D,S,a),w=p(D,S,a-1/3)}return[Math.round(255*d),Math.round(255*v),Math.round(255*w),u[4]?parseFloat(u[4]):1]}},f.Color.fromHsla=_.fromHsl,f.Color.fromHex=function(l){return _.fromSource(_.sourceFromHex(l))},f.Color.sourceFromHex=function(l){if(l.match(_.reHex)){var u=l.slice(l.indexOf("#")+1),a=3===u.length||4===u.length,h=8===u.length||4===u.length,g=a?u.charAt(0)+u.charAt(0):u.substring(0,2),d=a?u.charAt(1)+u.charAt(1):u.substring(2,4),v=a?u.charAt(2)+u.charAt(2):u.substring(4,6),w=h?a?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(g,16),parseInt(d,16),parseInt(v,16),parseFloat((parseInt(w,16)/255).toFixed(2))]}},f.Color.fromSource=function(l){var u=new _;return u.setSource(l),u})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=["e","se","s","sw","w","nw","n","ne","e"],p=["ns","nesw","ew","nwse"],l={},u="left",a="top",h="right",g="bottom",d="center",v={top:g,bottom:a,left:h,right:u,center:d},w=f.util.radiansToDegrees,S=Math.sign||function(K){return(K>0)-(K<0)||+K};function D(K,z){var ie=K.angle+w(Math.atan2(z.y,z.x))+360;return Math.round(ie%360/45)}function M(K,z){var ie=z.transform.target,ne=ie.canvas,Z=f.util.object.clone(z);Z.target=ie,ne&&ne.fire("object:"+K,Z),ie.fire(K,z)}function T(K,z){var ie=z.canvas,Z=K[ie.uniScaleKey];return ie.uniformScaling&&!Z||!ie.uniformScaling&&Z}function R(K){return K.originX===d&&K.originY===d}function j(K,z,ie){var ne=K.lockScalingX,Z=K.lockScalingY;return!!(ne&&Z||!z&&(ne||Z)&&ie||ne&&"x"===z||Z&&"y"===z)}function he(K,z,ie,ne){return{e:K,transform:z,pointer:{x:ie,y:ne}}}function pe(K){return function(z,ie,ne,Z){var se=ie.target,ve=se.getCenterPoint(),Ne=se.translateToOriginPoint(ve,ie.originX,ie.originY),Te=K(z,ie,ne,Z);return se.setPositionByOrigin(Ne,ie.originX,ie.originY),Te}}function De(K,z){return function(ie,ne,Z,se){var ve=z(ie,ne,Z,se);return ve&&M(K,he(ie,ne,Z,se)),ve}}function me(K,z,ie,ne,Z){var se=K.target,ve=se.controls[K.corner],Ne=se.canvas.getZoom(),Te=se.padding/Ne,ee=se.toLocalPoint(new f.Point(ne,Z),z,ie);return ee.x>=Te&&(ee.x-=Te),ee.x<=-Te&&(ee.x+=Te),ee.y>=Te&&(ee.y-=Te),ee.y<=Te&&(ee.y+=Te),ee.x-=ve.offsetX,ee.y-=ve.offsetY,ee}function Ee(K){return K.flipX!==K.flipY}function A(K,z,ie,ne,Z){if(0!==K[z]){var se=K._getTransformedDimensions()[ne];K.set(ie,Z/se*K[ie])}}function N(K,z,ie,ne){var ee,Z=z.target,se=Z._getTransformedDimensions(0,Z.skewY),ve=me(z,z.originX,z.originY,ie,ne),Ne=Math.abs(2*ve.x)-se.x,Te=Z.skewX;Ne<2?ee=0:(ee=w(Math.atan2(Ne/Z.scaleX,se.y/Z.scaleY)),z.originX===u&&z.originY===g&&(ee=-ee),z.originX===h&&z.originY===a&&(ee=-ee),Ee(Z)&&(ee=-ee));var Ie=Te!==ee;if(Ie){var He=Z._getTransformedDimensions().y;Z.set("skewX",ee),A(Z,"skewY","scaleY","y",He)}return Ie}function B(K,z,ie,ne){var ee,Z=z.target,se=Z._getTransformedDimensions(Z.skewX,0),ve=me(z,z.originX,z.originY,ie,ne),Ne=Math.abs(2*ve.y)-se.y,Te=Z.skewY;Ne<2?ee=0:(ee=w(Math.atan2(Ne/Z.scaleY,se.x/Z.scaleX)),z.originX===u&&z.originY===g&&(ee=-ee),z.originX===h&&z.originY===a&&(ee=-ee),Ee(Z)&&(ee=-ee));var Ie=Te!==ee;if(Ie){var He=Z._getTransformedDimensions().x;Z.set("skewY",ee),A(Z,"skewX","scaleX","x",He)}return Ie}function I(K,z,ie,ne,Z){var ee,Ie,He,ze,qt,Ot,se=z.target,ve=se.lockScalingX,Ne=se.lockScalingY,Te=(Z=Z||{}).by,_t=T(K,se),at=j(se,Te,_t),Vn=z.gestureScale;if(at)return!1;if(Vn)Ie=z.scaleX*Vn,He=z.scaleY*Vn;else{if(ee=me(z,z.originX,z.originY,ie,ne),qt="y"!==Te?S(ee.x):1,Ot="x"!==Te?S(ee.y):1,z.signX||(z.signX=qt),z.signY||(z.signY=Ot),se.lockScalingFlip&&(z.signX!==qt||z.signY!==Ot))return!1;if(ze=se._getTransformedDimensions(),_t&&!Te){var gs=Math.abs(ee.x)+Math.abs(ee.y),cn=z.original,Wd=gs/(Math.abs(ze.x*cn.scaleX/se.scaleX)+Math.abs(ze.y*cn.scaleY/se.scaleY));Ie=cn.scaleX*Wd,He=cn.scaleY*Wd}else Ie=Math.abs(ee.x*se.scaleX/ze.x),He=Math.abs(ee.y*se.scaleY/ze.y);R(z)&&(Ie*=2,He*=2),z.signX!==qt&&"y"!==Te&&(z.originX=v[z.originX],Ie*=-1,z.signX=qt),z.signY!==Ot&&"x"!==Te&&(z.originY=v[z.originY],He*=-1,z.signY=Ot)}var Wp=se.scaleX,Do=se.scaleY;return Te?("x"===Te&&se.set("scaleX",Ie),"y"===Te&&se.set("scaleY",He)):(!ve&&se.set("scaleX",Ie),!Ne&&se.set("scaleY",He)),Wp!==se.scaleX||Do!==se.scaleY}l.scaleCursorStyleHandler=function q(K,z,ie){var Z=T(K,ie),se="";if(0!==z.x&&0===z.y?se="x":0===z.x&&0!==z.y&&(se="y"),j(ie,se,Z))return"not-allowed";var ve=D(ie,z);return _[ve]+"-resize"},l.skewCursorStyleHandler=function ae(K,z,ie){if(0!==z.x&&ie.lockSkewingY||0!==z.y&&ie.lockSkewingX)return"not-allowed";var Z=D(ie,z)%4;return p[Z]+"-resize"},l.scaleSkewCursorStyleHandler=function de(K,z,ie){return K[ie.canvas.altActionKey]?l.skewCursorStyleHandler(K,z,ie):l.scaleCursorStyleHandler(K,z,ie)},l.rotationWithSnapping=De("rotating",pe(function F(K,z,ie,ne){var Z=z,se=Z.target,ve=se.translateToOriginPoint(se.getCenterPoint(),Z.originX,Z.originY);if(se.lockRotation)return!1;var Ie,Ne=Math.atan2(Z.ey-ve.y,Z.ex-ve.x),Te=Math.atan2(ne-ve.y,ie-ve.x),ee=w(Te-Ne+Z.theta);if(se.snapAngle>0){var He=se.snapAngle,ze=se.snapThreshold||He,_t=Math.ceil(ee/He)*He,at=Math.floor(ee/He)*He;Math.abs(ee-at)<ze?ee=at:Math.abs(ee-_t)<ze&&(ee=_t)}return ee<0&&(ee=360+ee),Ie=se.angle!==(ee%=360),se.angle=ee,Ie})),l.scalingEqually=De("scaling",pe(function V(K,z,ie,ne){return I(K,z,ie,ne)})),l.scalingX=De("scaling",pe(function $(K,z,ie,ne){return I(K,z,ie,ne,{by:"x"})})),l.scalingY=De("scaling",pe(function H(K,z,ie,ne){return I(K,z,ie,ne,{by:"y"})})),l.scalingYOrSkewingX=function Y(K,z,ie,ne){return K[z.target.canvas.altActionKey]?l.skewHandlerX(K,z,ie,ne):l.scalingY(K,z,ie,ne)},l.scalingXOrSkewingY=function oe(K,z,ie,ne){return K[z.target.canvas.altActionKey]?l.skewHandlerY(K,z,ie,ne):l.scalingX(K,z,ie,ne)},l.changeWidth=De("resizing",pe(function ce(K,z,ie,ne){var Z=z.target,se=me(z,z.originX,z.originY,ie,ne),ve=Z.strokeWidth/(Z.strokeUniform?Z.scaleX:1),Ne=R(z)?2:1,Te=Z.width,ee=Math.abs(se.x*Ne/Z.scaleX)-ve;return Z.set("width",Math.max(ee,0)),Te!==ee})),l.skewHandlerX=function P(K,z,ie,ne){var ve,Z=z.target,se=Z.skewX,Ne=z.originY;return!Z.lockSkewingX&&(0===se?ve=me(z,d,d,ie,ne).x>0?u:h:(se>0&&(ve=Ne===a?u:h),se<0&&(ve=Ne===a?h:u),Ee(Z)&&(ve=ve===u?h:u)),z.originX=ve,De("skewing",pe(N))(K,z,ie,ne))},l.skewHandlerY=function X(K,z,ie,ne){var ve,Z=z.target,se=Z.skewY,Ne=z.originX;return!Z.lockSkewingY&&(0===se?ve=me(z,d,d,ie,ne).y>0?a:g:(se>0&&(ve=Ne===u?a:g),se<0&&(ve=Ne===u?g:a),Ee(Z)&&(ve=ve===a?g:a)),z.originY=ve,De("skewing",pe(B))(K,z,ie,ne))},l.dragHandler=function ge(K,z,ie,ne){var Z=z.target,se=ie-z.offsetX,ve=ne-z.offsetY,Ne=!Z.get("lockMovementX")&&Z.left!==se,Te=!Z.get("lockMovementY")&&Z.top!==ve;return Ne&&Z.set("left",se),Te&&Z.set("top",ve),(Ne||Te)&&M("moving",he(K,z,ie,ne)),Ne||Te},l.scaleOrSkewActionName=function _e(K,z,ie){var ne=K[ie.canvas.altActionKey];return 0===z.x?ne?"skewX":"scaleY":0===z.y?ne?"skewY":"scaleX":void 0},l.rotationStyleHandler=function be(K,z,ie){return ie.lockRotation?"not-allowed":z.cursorStyle},l.fireEvent=M,l.wrapWithFixedAnchor=pe,l.wrapWithFireEvent=De,l.getLocalPoint=me,f.controlsUtils=l}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.degreesToRadians,p=f.controlsUtils;p.renderCircleControl=function l(a,h,g,d,v){d=d||{};var q,w=this.sizeX||d.cornerSize||v.cornerSize,S=this.sizeY||d.cornerSize||v.cornerSize,D=typeof d.transparentCorners<"u"?d.transparentCorners:v.transparentCorners,M=D?"stroke":"fill",T=!D&&(d.cornerStrokeColor||v.cornerStrokeColor),R=h,j=g;a.save(),a.fillStyle=d.cornerColor||v.cornerColor,a.strokeStyle=d.cornerStrokeColor||v.cornerStrokeColor,w>S?(q=w,a.scale(1,S/w),j=g*w/S):S>w?(q=S,a.scale(w/S,1),R=h*S/w):q=w,a.lineWidth=1,a.beginPath(),a.arc(R,j,q/2,0,2*Math.PI,!1),a[M](),T&&a.stroke(),a.restore()},p.renderSquareControl=function u(a,h,g,d,v){d=d||{};var w=this.sizeX||d.cornerSize||v.cornerSize,S=this.sizeY||d.cornerSize||v.cornerSize,D=typeof d.transparentCorners<"u"?d.transparentCorners:v.transparentCorners,M=D?"stroke":"fill",T=!D&&(d.cornerStrokeColor||v.cornerStrokeColor),R=w/2,j=S/2;a.save(),a.fillStyle=d.cornerColor||v.cornerColor,a.strokeStyle=d.cornerStrokeColor||v.cornerStrokeColor,a.lineWidth=1,a.translate(h,g),a.rotate(_(v.angle)),a[M+"Rect"](-R,-j,w,S),T&&a.strokeRect(-R,-j,w,S),a.restore()}}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Control=function _(p){for(var l in p)this[l]=p[l]},f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(p,l){return l.cursorStyle},getActionName:function(p,l){return l.actionName},getVisibility:function(p,l){var u=p._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(p){this.visible=p},positionHandler:function(p,l){return f.util.transformPoint({x:this.x*p.x+this.offsetX,y:this.y*p.y+this.offsetY},l)},calcCornerCoords:function(p,l,u,a,h){var g,d,v,w,S=h?this.touchSizeX:this.sizeX,D=h?this.touchSizeY:this.sizeY;if(S&&D&&S!==D){var M=Math.atan2(D,S),T=Math.sqrt(S*S+D*D)/2,R=M-f.util.degreesToRadians(p),j=Math.PI/2-M-f.util.degreesToRadians(p);g=T*f.util.cos(R),d=T*f.util.sin(R),v=T*f.util.cos(j),w=T*f.util.sin(j)}else T=.7071067812*(S&&D?S:l),R=f.util.degreesToRadians(45-p),g=v=T*f.util.cos(R),d=w=T*f.util.sin(R);return{tl:{x:u-w,y:a-v},tr:{x:u+g,y:a-d},bl:{x:u-g,y:a+d},br:{x:u+w,y:a+v}}},render:function(p,l,u,a,h){"circle"===((a=a||{}).cornerStyle||h.cornerStyle)?f.controlsUtils.renderCircleControl.call(this,p,l,u,a,h):f.controlsUtils.renderSquareControl.call(this,p,l,u,a,h)}}}(Be),function(){function y(u,a){var d,v,w,S,h=u.getAttribute("style"),g=u.getAttribute("offset")||0;if(g=(g=parseFloat(g)/(/%$/.test(g)?100:1))<0?0:g>1?1:g,h){var D=h.split(/\s*;\s*/);for(""===D[D.length-1]&&D.pop(),S=D.length;S--;){var M=D[S].split(/\s*:\s*/),T=M[0].trim(),R=M[1].trim();"stop-color"===T?d=R:"stop-opacity"===T&&(w=R)}}return d||(d=u.getAttribute("stop-color")||"rgb(0,0,0)"),w||(w=u.getAttribute("stop-opacity")),v=(d=new C.Color(d)).getAlpha(),w=isNaN(parseFloat(w))?1:parseFloat(w),w*=v*a,{offset:g,color:d.toRgb(),opacity:w}}var p=C.util.object.clone;C.Gradient=C.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var a,h=this;Object.keys(u).forEach(function(g){h[g]=u[g]}),this.id?this.id+="_"+C.Object.__uid++:this.id=C.Object.__uid++,a={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},"radial"===this.type&&(a.r1=u.coords.r1||0,a.r2=u.coords.r2||0),this.coords=a,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var a in u){var h=new C.Color(u[a]);this.colorStops.push({offset:parseFloat(a),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(u){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return C.util.populateWithProperties(this,a,u),a},toSVG:function(u,v){var g,d,w,S,h=p(this.coords,!0),D=(v=v||{},p(this.colorStops,!0)),M=h.r1>h.r2,T=this.gradientTransform?this.gradientTransform.concat():C.iMatrix.concat(),R=-this.offsetX,j=-this.offsetY,q=!!v.additionalTransform,ae="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(D.sort(function(pe,De){return pe.offset-De.offset}),"objectBoundingBox"===ae?(R/=u.width,j/=u.height):(R+=u.width/2,j+=u.height/2),"path"===u.type&&"percentage"!==this.gradientUnits&&(R-=u.pathOffset.x,j-=u.pathOffset.y),T[4]-=R,T[5]-=j,S='id="SVGID_'+this.id+'" gradientUnits="'+ae+'"',S+=' gradientTransform="'+(q?v.additionalTransform+" ":"")+C.util.matrixToSVG(T)+'" ',"linear"===this.type?w=["<linearGradient ",S,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,'">\n']:"radial"===this.type&&(w=["<radialGradient ",S,' cx="',M?h.x1:h.x2,'" cy="',M?h.y1:h.y2,'" r="',M?h.r1:h.r2,'" fx="',M?h.x2:h.x1,'" fy="',M?h.y2:h.y1,'">\n']),"radial"===this.type){if(M)for((D=D.concat()).reverse(),g=0,d=D.length;g<d;g++)D[g].offset=1-D[g].offset;var de=Math.min(h.r1,h.r2);if(de>0){var be=de/Math.max(h.r1,h.r2);for(g=0,d=D.length;g<d;g++)D[g].offset+=be*(1-D[g].offset)}}for(g=0,d=D.length;g<d;g++){var he=D[g];w.push("<stop ",'offset="',100*he.offset+"%",'" style="stop-color:',he.color,typeof he.opacity<"u"?";stop-opacity: "+he.opacity:";",'"/>\n')}return w.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),w.join("")},toLive:function(u){var a,g,d,h=C.util.object.clone(this.coords);if(this.type){for("linear"===this.type?a=u.createLinearGradient(h.x1,h.y1,h.x2,h.y2):"radial"===this.type&&(a=u.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),g=0,d=this.colorStops.length;g<d;g++){var v=this.colorStops[g].color,w=this.colorStops[g].opacity,S=this.colorStops[g].offset;typeof w<"u"&&(v=new C.Color(v).setAlpha(w).toRgba()),a.addColorStop(S,v)}return a}}}),C.util.object.extend(C.Gradient,{fromElement:function(u,a,h,g){var d=parseFloat(h)/(/%$/.test(h)?100:1);d=d<0?0:d>1?1:d,isNaN(d)&&(d=1);var w,T,R,ae,v=u.getElementsByTagName("stop"),S="userSpaceOnUse"===u.getAttribute("gradientUnits")?"pixels":"percentage",D=u.getAttribute("gradientTransform")||"",M=[],j=0,q=0;for("linearGradient"===u.nodeName||"LINEARGRADIENT"===u.nodeName?(w="linear",T=function f(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}(u)):(w="radial",T=function _(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}(u)),R=v.length;R--;)M.push(y(v[R],d));return ae=C.parseTransformAttribute(D),function l(u,a,h,g){var d,v;Object.keys(a).forEach(function(w){"Infinity"===(d=a[w])?v=1:"-Infinity"===d?v=0:(v=parseFloat(a[w],10),"string"==typeof d&&/^(\d+\.\d+)%|(\d+)%$/.test(d)&&(v*=.01,"pixels"===g&&(("x1"===w||"x2"===w||"r2"===w)&&(v*=h.viewBoxWidth||h.width),("y1"===w||"y2"===w)&&(v*=h.viewBoxHeight||h.height)))),a[w]=v})}(0,T,g,S),"pixels"===S&&(j=-a.left,q=-a.top),new C.Gradient({id:u.getAttribute("id"),type:w,coords:T,colorStops:M,gradientUnits:S,gradientTransform:ae,offsetX:j,offsetY:q})}})}(),function(){"use strict";var y=C.util.toFixed;C.Pattern=C.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,_){if(f||(f={}),this.id=C.Object.__uid++,this.setOptions(f),!f.source||f.source&&"string"!=typeof f.source)_&&_(this);else{var p=this;this.source=C.util.createImage(),C.util.loadImage(f.source,function(l,u){p.source=l,_&&_(p,u)},null,this.crossOrigin)}},toObject:function(f){var p,l,_=C.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?p=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(p=this.source.toDataURL()),l={type:"pattern",source:p,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:y(this.offsetX,_),offsetY:y(this.offsetY,_),patternTransform:this.patternTransform?this.patternTransform.concat():null},C.util.populateWithProperties(this,l,f),l},toSVG:function(f){var _="function"==typeof this.source?this.source():this.source,p=_.width/f.width,l=_.height/f.height,u=this.offsetX/f.width,a=this.offsetY/f.height,h="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(l=1,a&&(l+=Math.abs(a))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(p=1,u&&(p+=Math.abs(u))),_.src?h=_.src:_.toDataURL&&(h=_.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+a+'" width="'+p+'" height="'+l+'">\n<image x="0" y="0" width="'+_.width+'" height="'+_.height+'" xlink:href="'+h+'"></image>\n</pattern>\n'},setOptions:function(f){for(var _ in f)this[_]=f[_]},toLive:function(f){var _=this.source;return!_||typeof _.src<"u"&&(!_.complete||0===_.naturalWidth||0===_.naturalHeight)?"":f.createPattern(_,this.repeat)}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.toFixed;f.Shadow?f.warn("fabric.Shadow is already defined."):(f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(p){for(var l in"string"==typeof p&&(p=this._parseShadow(p)),p)this[l]=p[l];this.id=f.Object.__uid++},_parseShadow:function(p){var l=p.trim(),u=f.Shadow.reOffsetsAndBlur.exec(l)||[];return{color:(l.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(p){var l=40,u=40,a=f.Object.NUM_FRACTION_DIGITS,h=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-p.angle)),d=new f.Color(this.color);return p.width&&p.height&&(l=100*_((Math.abs(h.x)+this.blur)/p.width,a)+20,u=100*_((Math.abs(h.y)+this.blur)/p.height,a)+20),p.flipX&&(h.x*=-1),p.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+_(this.blur?this.blur/2:0,a)+'"></feGaussianBlur>\n\t<feOffset dx="'+_(h.x,a)+'" dy="'+_(h.y,a)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+d.toRgb()+'" flood-opacity="'+d.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var p={},l=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(p[u]=this[u])},this),p}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(Be),function(){"use strict";if(C.StaticCanvas)C.warn("fabric.StaticCanvas is already defined.");else{var y=C.util.object.extend,f=C.util.getElementOffset,_=C.util.removeFromArray,p=C.util.toFixed,l=C.util.transformPoint,u=C.util.invertTransform,a=C.util.getNodeCanvas,h=C.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");C.StaticCanvas=C.util.createClass(C.CommonMethods,{initialize:function(d,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(d,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:C.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(d,v){var w=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(d),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,w),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,w),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,w),v.overlayColor&&this.setOverlayColor(v.overlayColor,w),this.calcOffset()},_isRetinaScaling:function(){return C.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,C.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var d=C.devicePixelRatio;this.__initRetinaScaling(d,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(d,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(d,v,w){v.setAttribute("width",this.width*d),v.setAttribute("height",this.height*d),w.scale(d,d)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(d,v,w){return this.__setBgOverlayImage("overlayImage",d,v,w)},setBackgroundImage:function(d,v,w){return this.__setBgOverlayImage("backgroundImage",d,v,w)},setOverlayColor:function(d,v){return this.__setBgOverlayColor("overlayColor",d,v)},setBackgroundColor:function(d,v){return this.__setBgOverlayColor("backgroundColor",d,v)},__setBgOverlayImage:function(d,v,w,S){return"string"==typeof v?C.util.loadImage(v,function(D,M){if(D){var T=new C.Image(D,S);this[d]=T,T.canvas=this}w&&w(D,M)},this,S&&S.crossOrigin):(S&&v.setOptions(S),this[d]=v,v&&(v.canvas=this),w&&w(v,!1)),this},__setBgOverlayColor:function(d,v,w){return this[d]=v,this._initGradient(v,d),this._initPattern(v,d,w),this},_createCanvasElement:function(){var d=h();if(!d||(d.style||(d.style={}),typeof d.getContext>"u"))throw g;return d},_initOptions:function(d){var v=this.lowerCanvasEl;this._setOptions(d),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(d){this.lowerCanvasEl=d&&d.getContext?d:C.util.getById(d)||this._createCanvasElement(),C.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(d,v){return this.setDimensions({width:d},v)},setHeight:function(d,v){return this.setDimensions({height:d},v)},setDimensions:function(d,v){var w;for(var S in v=v||{},d)w=d[S],v.cssOnly||(this._setBackstoreDimension(S,d[S]),w+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(S,w);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(d,v){return this.lowerCanvasEl[d]=v,this.upperCanvasEl&&(this.upperCanvasEl[d]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[d]=v),this[d]=v,this},_setCssDimension:function(d,v){return this.lowerCanvasEl.style[d]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[d]=v),this.wrapperEl&&(this.wrapperEl.style[d]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(d){var D,M,T,v=this._activeObject,w=this.backgroundImage,S=this.overlayImage;for(this.viewportTransform=d,M=0,T=this._objects.length;M<T;M++)(D=this._objects[M]).group||D.setCoords(!0);return v&&v.setCoords(),w&&w.setCoords(!0),S&&S.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(d,v){var w=d,S=this.viewportTransform.slice(0);d=l(d,u(this.viewportTransform)),S[0]=v,S[3]=v;var D=l(d,S);return S[4]+=w.x-D.x,S[5]+=w.y-D.y,this.setViewportTransform(S)},setZoom:function(d){return this.zoomToPoint(new C.Point(0,0),d),this},absolutePan:function(d){var v=this.viewportTransform.slice(0);return v[4]=-d.x,v[5]=-d.y,this.setViewportTransform(v)},relativePan:function(d){return this.absolutePan(new C.Point(-d.x-this.viewportTransform[4],-d.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(d){this.stateful&&d.setupState(),d._set("canvas",this),d.setCoords(),this.fire("object:added",{target:d}),d.fire("added")},_onObjectRemoved:function(d){this.fire("object:removed",{target:d}),d.fire("removed"),delete d.canvas},clearContext:function(d){return d.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=C.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var d={},v=this.width,w=this.height,S=u(this.viewportTransform);return d.tl=l({x:0,y:0},S),d.br=l({x:v,y:w},S),d.tr=new C.Point(d.br.x,d.tl.y),d.bl=new C.Point(d.tl.x,d.br.y),this.vptCoords=d,d},cancelRequestedRender:function(){this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(d,v){var w=this.viewportTransform,S=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(d),C.util.setImageSmoothing(d,this.imageSmoothingEnabled),this.fire("before:render",{ctx:d}),this._renderBackground(d),d.save(),d.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._renderObjects(d,v),d.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),S&&(S.canvas=this,S.shouldCache(),S._transformDone=!0,S.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(d)),this._renderOverlay(d),this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),this.fire("after:render",{ctx:d})},drawClipPathOnCanvas:function(d){var v=this.viewportTransform,w=this.clipPath;d.save(),d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),d.globalCompositeOperation="destination-in",w.transform(d),d.scale(1/w.zoomX,1/w.zoomY),d.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),d.restore()},_renderObjects:function(d,v){var w,S;for(w=0,S=v.length;w<S;++w)v[w]&&v[w].render(d)},_renderBackgroundOrOverlay:function(d,v){var w=this[v+"Color"],S=this[v+"Image"],D=this.viewportTransform,M=this[v+"Vpt"];if(w||S){if(w){d.save(),d.beginPath(),d.moveTo(0,0),d.lineTo(this.width,0),d.lineTo(this.width,this.height),d.lineTo(0,this.height),d.closePath(),d.fillStyle=w.toLive?w.toLive(d,this):w,M&&d.transform(D[0],D[1],D[2],D[3],D[4],D[5]),d.transform(1,0,0,1,w.offsetX||0,w.offsetY||0);var T=w.gradientTransform||w.patternTransform;T&&d.transform(T[0],T[1],T[2],T[3],T[4],T[5]),d.fill(),d.restore()}S&&(d.save(),M&&d.transform(D[0],D[1],D[2],D[3],D[4],D[5]),S.render(d),d.restore())}},_renderBackground:function(d){this._renderBackgroundOrOverlay(d,"background")},_renderOverlay:function(d){this._renderBackgroundOrOverlay(d,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new C.Point(this.width/2,this.height/2)},centerObjectH:function(d){return this._centerObject(d,new C.Point(this.getCenterPoint().x,d.getCenterPoint().y))},centerObjectV:function(d){return this._centerObject(d,new C.Point(d.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(d){var v=this.getCenterPoint();return this._centerObject(d,v)},viewportCenterObject:function(d){var v=this.getVpCenter();return this._centerObject(d,v)},viewportCenterObjectH:function(d){var v=this.getVpCenter();return this._centerObject(d,new C.Point(v.x,d.getCenterPoint().y)),this},viewportCenterObjectV:function(d){var v=this.getVpCenter();return this._centerObject(d,new C.Point(d.getCenterPoint().x,v.y))},getVpCenter:function(){var d=this.getCenterPoint(),v=u(this.viewportTransform);return l(d,v)},_centerObject:function(d,v){return d.setPositionByOrigin(v,"center","center"),d.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(d){return this.toDatalessObject(d)},toObject:function(d){return this._toObjectMethod("toObject",d)},toDatalessObject:function(d){return this._toObjectMethod("toDatalessObject",d)},_toObjectMethod:function(d,v){var w=this.clipPath,S={version:C.version,objects:this._toObjects(d,v)};return w&&!w.excludeFromExport&&(S.clipPath=this._toObject(this.clipPath,d,v)),y(S,this.__serializeBgOverlay(d,v)),C.util.populateWithProperties(this,S,v),S},_toObjects:function(d,v){return this._objects.filter(function(w){return!w.excludeFromExport}).map(function(w){return this._toObject(w,d,v)},this)},_toObject:function(d,v,w){var S;this.includeDefaultValues||(S=d.includeDefaultValues,d.includeDefaultValues=!1);var D=d[v](w);return this.includeDefaultValues||(d.includeDefaultValues=S),D},__serializeBgOverlay:function(d,v){var w={},S=this.backgroundImage,D=this.overlayImage,M=this.backgroundColor,T=this.overlayColor;return M&&M.toObject?M.excludeFromExport||(w.background=M.toObject(v)):M&&(w.background=M),T&&T.toObject?T.excludeFromExport||(w.overlay=T.toObject(v)):T&&(w.overlay=T),S&&!S.excludeFromExport&&(w.backgroundImage=this._toObject(S,d,v)),D&&!D.excludeFromExport&&(w.overlayImage=this._toObject(D,d,v)),w},svgViewportTransformation:!0,toSVG:function(d,v){d||(d={}),d.reviver=v;var w=[];return this._setSVGPreamble(w,d),this._setSVGHeader(w,d),this.clipPath&&w.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(w,"background"),this._setSVGBgOverlayImage(w,"backgroundImage",v),this._setSVGObjects(w,v),this.clipPath&&w.push("</g>\n"),this._setSVGBgOverlayColor(w,"overlay"),this._setSVGBgOverlayImage(w,"overlayImage",v),w.push("</svg>"),w.join("")},_setSVGPreamble:function(d,v){v.suppressPreamble||d.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(d,v){var D,w=v.width||this.width,S=v.height||this.height,M='viewBox="0 0 '+this.width+" "+this.height+'" ',T=C.Object.NUM_FRACTION_DIGITS;v.viewBox?M='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(M='viewBox="'+p(-(D=this.viewportTransform)[4]/D[0],T)+" "+p(-D[5]/D[3],T)+" "+p(this.width/D[0],T)+" "+p(this.height/D[3],T)+'" '),d.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',w,'" ','height="',S,'" ',M,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",C.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),"</defs>\n")},createSVGClipPathMarkup:function(d){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+C.Object.__uid++,'<clipPath id="'+v.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(d.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var d=this;return["background","overlay"].map(function(w){var S=d[w+"Color"];if(S&&S.toLive){var D=d[w+"Vpt"],M=d.viewportTransform;return S.toSVG({width:d.width/(D?M[0]:1),height:d.height/(D?M[3]:1)},{additionalTransform:D?C.util.matrixToSVG(M):""})}}).join("")},createSVGFontFacesMarkup:function(){var w,S,D,M,T,j,q,ae,d="",v={},de=C.fontPaths,_e=[];for(this._objects.forEach(function he(pe){_e.push(pe),pe._objects&&pe._objects.forEach(he)}),q=0,ae=_e.length;q<ae;q++)if(S=(w=_e[q]).fontFamily,-1!==w.type.indexOf("text")&&!v[S]&&de[S]&&(v[S]=!0,w.styles))for(T in D=w.styles)for(j in M=D[T])!v[S=M[j].fontFamily]&&de[S]&&(v[S]=!0);for(var be in v)d+=["\t\t@font-face {\n","\t\t\tfont-family: '",be,"';\n","\t\t\tsrc: url('",de[be],"');\n","\t\t}\n"].join("");return d&&(d=['\t<style type="text/css">',"<![CDATA[\n",d,"]]>","</style>\n"].join("")),d},_setSVGObjects:function(d,v){var w,S,D,M=this._objects;for(S=0,D=M.length;S<D;S++)!(w=M[S]).excludeFromExport&&this._setSVGObject(d,w,v)},_setSVGObject:function(d,v,w){d.push(v.toSVG(w))},_setSVGBgOverlayImage:function(d,v,w){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&d.push(this[v].toSVG(w))},_setSVGBgOverlayColor:function(d,v){var w=this[v+"Color"],D=this.width,M=this.height;if(w)if(w.toLive){var T=w.repeat,R=C.util.invertTransform(this.viewportTransform),q=this[v+"Vpt"]?C.util.matrixToSVG(R):"";d.push('<rect transform="'+q+" translate(",D/2,",",M/2,')"',' x="',w.offsetX-D/2,'" y="',w.offsetY-M/2,'" ','width="',"repeat-y"===T||"no-repeat"===T?w.source.width:D,'" height="',"repeat-x"===T||"no-repeat"===T?w.source.height:M,'" fill="url(#SVGID_'+w.id+')"',"></rect>\n")}else d.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',w,'"',"></rect>\n")},sendToBack:function(d){if(!d)return this;var w,S,D,v=this._activeObject;if(d===v&&"activeSelection"===d.type)for(w=(D=v._objects).length;w--;)_(this._objects,S=D[w]),this._objects.unshift(S);else _(this._objects,d),this._objects.unshift(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(d){if(!d)return this;var w,S,D,v=this._activeObject;if(d===v&&"activeSelection"===d.type)for(D=v._objects,w=0;w<D.length;w++)_(this._objects,S=D[w]),this._objects.push(S);else _(this._objects,d),this._objects.push(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(d,v){if(!d)return this;var S,D,M,T,R,w=this._activeObject,j=0;if(d===w&&"activeSelection"===d.type)for(R=w._objects,S=0;S<R.length;S++)(M=this._objects.indexOf(D=R[S]))>0+j&&(T=M-1,_(this._objects,D),this._objects.splice(T,0,D)),j++;else 0!==(M=this._objects.indexOf(d))&&(T=this._findNewLowerIndex(d,M,v),_(this._objects,d),this._objects.splice(T,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(d,v,w){var S,D;if(w){for(S=v,D=v-1;D>=0;--D)if(d.intersectsWithObject(this._objects[D])||d.isContainedWithinObject(this._objects[D])||this._objects[D].isContainedWithinObject(d)){S=D;break}}else S=v-1;return S},bringForward:function(d,v){if(!d)return this;var S,D,M,T,R,w=this._activeObject,j=0;if(d===w&&"activeSelection"===d.type)for(S=(R=w._objects).length;S--;)(M=this._objects.indexOf(D=R[S]))<this._objects.length-1-j&&(T=M+1,_(this._objects,D),this._objects.splice(T,0,D)),j++;else(M=this._objects.indexOf(d))!==this._objects.length-1&&(T=this._findNewUpperIndex(d,M,v),_(this._objects,d),this._objects.splice(T,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(d,v,w){var S,D,M;if(w){for(S=v,D=v+1,M=this._objects.length;D<M;++D)if(d.intersectsWithObject(this._objects[D])||d.isContainedWithinObject(this._objects[D])||this._objects[D].isContainedWithinObject(d)){S=D;break}}else S=v+1;return S},moveTo:function(d,v){return _(this._objects,d),this._objects.splice(v,0,d),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(d){d.dispose&&d.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),C.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),C.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),y(C.StaticCanvas.prototype,C.Observable),y(C.StaticCanvas.prototype,C.Collection),y(C.StaticCanvas.prototype,C.DataURLExporter),y(C.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(d){var v=h();if(!v||!v.getContext)return null;var w=v.getContext("2d");return w&&"setLineDash"===d?typeof w.setLineDash<"u":null}}),C.StaticCanvas.prototype.toJSON=C.StaticCanvas.prototype.toObject,C.isLikelyNode&&(C.StaticCanvas.prototype.createPNGStream=function(){var d=a(this.lowerCanvasEl);return d&&d.createPNGStream()},C.StaticCanvas.prototype.createJPEGStream=function(d){var v=a(this.lowerCanvasEl);return v&&v.createJPEGStream(d)})}}(),C.BaseBrush=C.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(y){y.strokeStyle=this.color,y.lineWidth=this.width,y.lineCap=this.strokeLineCap,y.miterLimit=this.strokeMiterLimit,y.lineJoin=this.strokeLineJoin,y.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(y){var f=this.canvas.viewportTransform;y.save(),y.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(this.shadow){var y=this.canvas,f=this.shadow,_=y.contextTop,p=y.getZoom();y&&y._isRetinaScaling()&&(p*=C.devicePixelRatio),_.shadowColor=f.color,_.shadowBlur=f.blur*p,_.shadowOffsetX=f.offsetX*p,_.shadowOffsetY=f.offsetY*p}},needsFullRender:function(){return new C.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var y=this.canvas.contextTop;y.shadowColor="",y.shadowBlur=y.shadowOffsetX=y.shadowOffsetY=0},_isOutSideCanvas:function(y){return y.x<0||y.x>this.canvas.getWidth()||y.y<0||y.y>this.canvas.getHeight()}}),C.PencilBrush=C.util.createClass(C.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(y){this.canvas=y,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(y,f,_){var p=f.midPointFrom(_);return y.quadraticCurveTo(f.x,f.y,p.x,p.y),p},onMouseDown:function(y,f){this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(y),this._captureDrawingPath(y),this._render())},onMouseMove:function(y,f){if(this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(y))&&this._captureDrawingPath(y)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var _=this._points,p=_.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,_[p-2],_[p-1],!0),l.stroke(),l.restore()}},onMouseUp:function(y){return!this.canvas._isMainEvent(y.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(y){var f=new C.Point(y.x,y.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(y){return!(this._points.length>1&&y.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(y),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(y){var f=new C.Point(y.x,y.y);return this._addPoint(f)},_render:function(y){var f,_,p=this._points[0],l=this._points[1];if(this._saveAndTransform(y=y||this.canvas.contextTop),y.beginPath(),2===this._points.length&&p.x===l.x&&p.y===l.y){var u=this.width/1e3;p=new C.Point(p.x,p.y),l=new C.Point(l.x,l.y),p.x-=u,l.x+=u}for(y.moveTo(p.x,p.y),f=1,_=this._points.length;f<_;f++)this._drawSegment(y,p,l),p=this._points[f],l=this._points[f+1];y.lineTo(p.x,p.y),y.stroke(),y.restore()},convertPointsToSVGPath:function(y){return C.util.getSmoothPathFromPoints(y,this.width/1e3)},_isEmptySVGPath:function(y){return"M 0 0 Q 0 0 0 0 L 0 0"===C.util.joinPath(y)},createPath:function(y){var f=new C.Path(y,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new C.Shadow(this.shadow)),f},decimatePoints:function(y,f){if(y.length<=2)return y;var l,_=this.canvas.getZoom(),p=Math.pow(f/_,2),u=y.length-1,a=y[0],h=[a];for(l=1;l<u-1;l++)Math.pow(a.x-y[l].x,2)+Math.pow(a.y-y[l].y,2)>=p&&h.push(a=y[l]);return h.push(y[u]),h},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f))this.canvas.requestRenderAll();else{var _=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:_}),this.canvas.add(_),this.canvas.requestRenderAll(),_.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:_})}}}),C.CircleBrush=C.util.createClass(C.BaseBrush,{width:10,initialize:function(y){this.canvas=y,this.points=[]},drawDot:function(y){var f=this.addPoint(y),_=this.canvas.contextTop;this._saveAndTransform(_),this.dot(_,f),_.restore()},dot:function(y,f){y.fillStyle=f.fill,y.beginPath(),y.arc(f.x,f.y,f.radius,0,2*Math.PI,!1),y.closePath(),y.fill()},onMouseDown:function(y){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(y)},_render:function(){var f,_,y=this.canvas.contextTop,p=this.points;for(this._saveAndTransform(y),f=0,_=p.length;f<_;f++)this.dot(y,p[f]);y.restore()},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(y),this._render()):this.drawDot(y))},onMouseUp:function(){var f,_,y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var p=[];for(f=0,_=this.points.length;f<_;f++){var l=this.points[f],u=new C.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new C.Shadow(this.shadow)),p.push(u)}var a=new C.Group(p);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},addPoint:function(y){var f=new C.Point(y.x,y.y),_=C.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,p=new C.Color(this.color).setAlpha(C.util.getRandomInt(0,100)/100).toRgba();return f.radius=_,f.fill=p,this.points.push(f),f}}),C.SprayBrush=C.util.createClass(C.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(y){this.canvas=y,this.sprayChunks=[]},onMouseDown:function(y){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(y),this.render(this.sprayChunkPoints)},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.addSprayChunk(y),this.render(this.sprayChunkPoints))},onMouseUp:function(){var y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],_=0,p=this.sprayChunks.length;_<p;_++)for(var l=this.sprayChunks[_],u=0,a=l.length;u<a;u++){var h=new C.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});f.push(h)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var g=new C.Group(f);this.shadow&&g.set("shadow",new C.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},_getOptimizedRects:function(y){var _,p,l,f={};for(p=0,l=y.length;p<l;p++)f[_=y[p].left+""+y[p].top]||(f[_]=y[p]);var u=[];for(_ in f)u.push(f[_]);return u},render:function(y){var _,p,f=this.canvas.contextTop;for(f.fillStyle=this.color,this._saveAndTransform(f),_=0,p=y.length;_<p;_++){var l=y[_];typeof l.opacity<"u"&&(f.globalAlpha=l.opacity),f.fillRect(l.x,l.y,l.width,l.width)}f.restore()},_render:function(){var f,_,y=this.canvas.contextTop;for(y.fillStyle=this.color,this._saveAndTransform(y),f=0,_=this.sprayChunks.length;f<_;f++)this.render(this.sprayChunks[f]);y.restore()},addSprayChunk:function(y){this.sprayChunkPoints=[];var f,_,p,u,l=this.width/2;for(u=0;u<this.density;u++){f=C.util.getRandomInt(y.x-l,y.x+l),_=C.util.getRandomInt(y.y-l,y.y+l),p=this.dotWidthVariance?C.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new C.Point(f,_);a.width=p,this.randomOpacity&&(a.opacity=C.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),C.PatternBrush=C.util.createClass(C.PencilBrush,{getPatternSrc:function(){var _=C.util.createCanvasElement(),p=_.getContext("2d");return _.width=_.height=25,p.fillStyle=this.color,p.beginPath(),p.arc(10,10,10,0,2*Math.PI,!1),p.closePath(),p.fill(),_},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(y){return y.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(y){this.callSuper("_setBrushStyles",y),y.strokeStyle=this.getPattern(y)},createPath:function(y){var f=this.callSuper("createPath",y),_=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new C.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-_.x,offsetY:-_.y}),f}}),function(){var y=C.util.getPointer,f=C.util.degreesToRadians,_=C.util.isTouchEvent;for(var p in C.Canvas=C.util.createClass(C.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=C.PencilBrush&&new C.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var u,a,h,l=this.getActiveObjects();if(l.length>0&&!this.preserveObjectStacking){a=[],h=[];for(var g=0,d=this._objects.length;g<d;g++)-1===l.indexOf(u=this._objects[g])?a.push(u):h.push(u);l.length>1&&(this._activeObject._objects=h),a.push.apply(a,h)}else a=this._objects;return a},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var a=l.calcTransformMatrix(),h=C.util.invertTransform(a),g=this.restorePointerVpt(u);return C.util.transformPoint(g,h)},isTargetTransparent:function(l,u,a){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var h=this._normalizePointer(l,{x:u,y:a}),g=Math.max(l.cacheTranslationX+h.x*l.zoomX,0),d=Math.max(l.cacheTranslationY+h.y*l.zoomY,0);return C.util.isTransparent(l._cacheContext,Math.round(g),Math.round(d),this.targetFindTolerance)}var v=this.contextCache,w=l.selectionBackgroundColor,S=this.viewportTransform;return l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(S[0],S[1],S[2],S[3],S[4],S[5]),l.render(v),v.restore(),l.selectionBackgroundColor=w,C.util.isTransparent(v,u,a,this.targetFindTolerance)},_isSelectionKeyPressed:function(l){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(a){return!0===l[a]}):l[this.selectionKey]},_shouldClearSelection:function(l,u){var a=this.getActiveObjects(),h=this._activeObject;return!u||u&&h&&a.length>1&&-1===a.indexOf(u)&&h!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&h&&h!==u},_shouldCenterTransform:function(l,u,a){var h;if(l)return"scale"===u||"scaleX"===u||"scaleY"===u||"resizing"===u?h=this.centeredScaling||l.centeredScaling:"rotate"===u&&(h=this.centeredRotation||l.centeredRotation),h?!a:a},_getOriginFromCorner:function(l,u){var a={x:l.originX,y:l.originY};return"ml"===u||"tl"===u||"bl"===u?a.x="right":("mr"===u||"tr"===u||"br"===u)&&(a.x="left"),"tl"===u||"mt"===u||"tr"===u?a.y="bottom":("bl"===u||"mb"===u||"br"===u)&&(a.y="top"),a},_getActionFromCorner:function(l,u,a,h){if(!u||!l)return"drag";var g=h.controls[u];return g.getActionName(a,g,h)},_setupCurrentTransform:function(l,u,a){if(u){var h=this.getPointer(l),g=u.__corner,d=u.controls[g],v=a&&g?d.getActionHandler(l,u,d):C.controlsUtils.dragHandler,w=this._getActionFromCorner(a,g,l,u),S=this._getOriginFromCorner(u,g),D=l[this.centeredKey],M={target:u,action:w,actionHandler:v,corner:g,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:h.x-u.left,offsetY:h.y-u.top,originX:S.x,originY:S.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:f(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:D,original:C.util.saveObjectTransform(u)};this._shouldCenterTransform(u,w,D)&&(M.originX="center",M.originY="center"),M.original.originX=S.x,M.original.originY=S.y,this._currentTransform=M,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,a=new C.Point(u.ex,u.ey),h=C.util.transformPoint(a,this.viewportTransform),g=new C.Point(u.ex+u.left,u.ey+u.top),d=C.util.transformPoint(g,this.viewportTransform),v=Math.min(h.x,d.x),w=Math.min(h.y,d.y),S=Math.max(h.x,d.x),D=Math.max(h.y,d.y),M=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,w,S-v,D-w)),this.selectionLineWidth&&this.selectionBorderColor&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=M,w+=M,S-=M,D-=M,C.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,w,S-v,D-w))},findTarget:function(l,u){if(!this.skipTargetFind){var v,w,h=this.getPointer(l,!0),g=this._activeObject,d=this.getActiveObjects(),S=_(l),D=d.length>1&&!u||1===d.length;if(this.targets=[],D&&g._findTargetCorner(h,S)||d.length>1&&!u&&g===this._searchPossibleTargets([g],h))return g;if(1===d.length&&g===this._searchPossibleTargets([g],h)){if(!this.preserveObjectStacking)return g;v=g,w=this.targets,this.targets=[]}var M=this._searchPossibleTargets(this._objects,h);return l[this.altSelectionKey]&&M&&v&&M!==v&&(M=v,this.targets=w),M}},_checkTarget:function(l,u,a){if(u&&u.visible&&u.evented&&u.containsPoint(l)){if(!this.perPixelTargetFind&&!u.perPixelTargetFind||u.isEditing)return!0;if(!this.isTargetTransparent(u,a.x,a.y))return!0}},_searchPossibleTargets:function(l,u){for(var a,g,h=l.length;h--;){var d=l[h],v=d.group?this._normalizePointer(d.group,u):u;if(this._checkTarget(v,d,u)){(a=l[h]).subTargetCheck&&a instanceof C.Group&&(g=this._searchPossibleTargets(a._objects,u))&&this.targets.push(g);break}}return a},restorePointerVpt:function(l){return C.util.transformPoint(l,C.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var w,a=y(l),h=this.upperCanvasEl,g=h.getBoundingClientRect(),d=g.width||0,v=g.height||0;(!d||!v)&&("top"in g&&"bottom"in g&&(v=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(d=Math.abs(g.right-g.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,u||(a=this.restorePointerVpt(a));var S=this.getRetinaScaling();return 1!==S&&(a.x/=S,a.y/=S),{x:a.x*(w=0===d||0===v?{width:1,height:1}:{width:h.width/d,height:h.height/v}).width,y:a.y*w.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,a=this.upperCanvasEl;a?a.className="":(a=this._createCanvasElement(),this.upperCanvasEl=a),C.util.addClass(a,"upper-canvas "+l),this.wrapperEl.appendChild(a),this._copyCanvasStyle(u,a),this._applyCanvasStyle(a),this.contextTop=a.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=C.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),C.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),C.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,a=this.height||l.height;C.util.setStyle(l,{position:"absolute",width:u+"px",height:a+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=a,C.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?"activeSelection"===l.type&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var a=!1,h=this.getActiveObjects(),g=[],d=[];l.forEach(function(v){-1===h.indexOf(v)&&(a=!0,v.fire("deselected",{e:u,target:v}),d.push(v))}),h.forEach(function(v){-1===l.indexOf(v)&&(a=!0,v.fire("selected",{e:u,target:v}),g.push(v))}),l.length>0&&h.length>0?a&&this.fire("selection:updated",{e:u,selected:g,deselected:d}):h.length>0?this.fire("selection:created",{e:u,selected:g}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:d})},setActiveObject:function(l,u){var a=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(a,u),this},_setActiveObject:function(l,u){return!(this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})||(this._activeObject=l,0))},_discardActiveObject:function(l,u){var a=this._activeObject;if(a){if(a.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),a=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:a,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){C.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,C.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,a){var h=this._realizeGroupTransformOnObject(l),g=this.callSuper("_toObject",l,u,a);return this._unwindGroupTransformOnObject(l,h),g},_realizeGroupTransformOnObject:function(l){if(l.group&&"activeSelection"===l.group.type&&this._activeObject===l.group){var a={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(h){a[h]=l[h]}),C.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),a}return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,a){var h=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,a),this._unwindGroupTransformOnObject(u,h)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),C.StaticCanvas.prototype.setViewportTransform.call(this,l)}}),C.StaticCanvas)"prototype"!==p&&(C.Canvas[p]=C.StaticCanvas[p])}(),function(){var y=C.util.addListener,f=C.util.removeListener,u={passive:!1};function a(h,g){return h.button&&h.button===g-1}C.util.object.extend(C.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(y,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,g){var d=this.upperCanvasEl,v=this._getEventPrefix();h(C.window,"resize",this._onResize),h(d,v+"down",this._onMouseDown),h(d,v+"move",this._onMouseMove,u),h(d,v+"out",this._onMouseOut),h(d,v+"enter",this._onMouseEnter),h(d,"wheel",this._onMouseWheel),h(d,"contextmenu",this._onContextMenu),h(d,"dblclick",this._onDoubleClick),h(d,"dragover",this._onDragOver),h(d,"dragenter",this._onDragEnter),h(d,"dragleave",this._onDragLeave),h(d,"drop",this._onDrop),this.enablePointerEvents||h(d,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](d,"gesture",this._onGesture),eventjs[g](d,"drag",this._onDrag),eventjs[g](d,"orientation",this._onOrientationChange),eventjs[g](d,"shake",this._onShake),eventjs[g](d,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var h=this._getEventPrefix();f(C.document,h+"up",this._onMouseUp),f(C.document,"touchend",this._onTouchEnd,u),f(C.document,h+"move",this._onMouseMove,u),f(C.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(h,g){this.__onTransformGesture&&this.__onTransformGesture(h,g)},_onDrag:function(h,g){this.__onDrag&&this.__onDrag(h,g)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:h}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:h});var d=this;this._hoveredTargets.forEach(function(v){d.fire("mouse:out",{target:g,e:h}),v&&g.fire("mouseout",{e:h})}),this._hoveredTargets=[]},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,g){this.__onOrientationChange&&this.__onOrientationChange(h,g)},_onShake:function(h,g){this.__onShake&&this.__onShake(h,g)},_onLongPress:function(h,g){this.__onLongPress&&this.__onLongPress(h,g)},_onDragOver:function(h){h.preventDefault();var g=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(g,h)},_onDrop:function(h){return this._simpleEventHandler("drop:before",h),this._simpleEventHandler("drop",h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var g=h.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return!0===h.isPrimary||!1!==h.isPrimary&&("touchend"===h.type&&0===h.touches.length||!h.changedTouches||h.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(h){h.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,d=this._getEventPrefix();y(C.document,"touchend",this._onTouchEnd,u),y(C.document,"touchmove",this._onMouseMove,u),f(g,d+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,d=this._getEventPrefix();f(g,d+"move",this._onMouseMove,u),y(C.document,d+"up",this._onMouseUp),y(C.document,d+"move",this._onMouseMove,u)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();f(C.document,"touchend",this._onTouchEnd,u),f(C.document,"touchmove",this._onMouseMove,u);var d=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){y(d.upperCanvasEl,g+"down",d._onMouseDown),d._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var g=this.upperCanvasEl,d=this._getEventPrefix();this._isMainEvent(h)&&(f(C.document,d+"up",this._onMouseUp),f(C.document,d+"move",this._onMouseMove,u),y(g,d+"move",this._onMouseMove,u))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var g=this._activeObject;return!!(!!g!=!!h||g&&h&&g!==h)},__onMouseUp:function(h){var g,d=this._currentTransform,v=this._groupSelector,w=!1,S=!v||0===v.left&&0===v.top;if(this._cacheTransformEventData(h),g=this._target,this._handleEvent(h,"up:before"),a(h,3))this.fireRightClick&&this._handleEvent(h,"up",3,S);else{if(a(h,2))return this.fireMiddleClick&&this._handleEvent(h,"up",2,S),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(h);else if(this._isMainEvent(h)){if(d&&(this._finalizeCurrentTransform(h),w=d.actionPerformed),!S){var D=g===this._activeObject;this._maybeGroupObjects(h),w||(w=this._shouldRender(g)||!D&&g===this._activeObject)}var M,T;if(g){if(M=g._findTargetCorner(this.getPointer(h,!0),C.util.isTouchEvent(h)),g.selectable&&g!==this._activeObject&&"up"===g.activeOn)this.setActiveObject(g,h),w=!0;else{var R=g.controls[M],j=R&&R.getMouseUpHandler(h,g,R);j&&j(h,d,(T=this.getPointer(h)).x,T.y)}g.isMoving=!1}if(d&&(d.target!==g||d.corner!==M)){var q=d.target&&d.target.controls[d.corner],ae=q&&q.getMouseUpHandler(h,g,R);T=T||this.getPointer(h),ae&&ae(h,d,T.x,T.y)}this._setCursorFromEvent(h,g),this._handleEvent(h,"up",1,S),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),w?this.requestRenderAll():S||this.renderTop()}}},_simpleEventHandler:function(h,g){var d=this.findTarget(g),v=this.targets,w={e:g,target:d,subTargets:v};if(this.fire(h,w),d&&d.fire(h,w),!v)return d;for(var S=0;S<v.length;S++)v[S].fire(h,w);return d},_handleEvent:function(h,g,d,v){var w=this._target,S=this.targets||[],D={e:h,target:w,subTargets:S,button:d||1,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===g&&(D.currentTarget=this.findTarget(h),D.currentSubTargets=this.targets),this.fire("mouse:"+g,D),w&&w.fire("mouse"+g,D);for(var M=0;M<S.length;M++)S[M].fire("mouse"+g,D)},_finalizeCurrentTransform:function(h){var g=this._currentTransform,d=g.target,v={e:h,target:d,transform:g,action:g.action};d._scaling&&(d._scaling=!1),d.setCoords(),(g.actionPerformed||this.stateful&&d.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var g=this.getPointer(h);this.freeDrawingBrush.onMouseDown(g,{e:h,pointer:g}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var g=this.getPointer(h);this.freeDrawingBrush.onMouseMove(g,{e:h,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var g=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:g}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var g=this._target;if(a(h,3))this.fireRightClick&&this._handleEvent(h,"down",3);else if(a(h,2))this.fireMiddleClick&&this._handleEvent(h,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(h);else if(this._isMainEvent(h)&&!this._currentTransform){this._previousPointer=d=this._pointer;var v=this._shouldRender(g),w=this._shouldGroup(h,g);if(this._shouldClearSelection(h,g)?this.discardActiveObject(h):w&&(this._handleGrouping(h,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var S=g===this._activeObject;g.selectable&&"down"===g.activeOn&&this.setActiveObject(g,h);var D=g._findTargetCorner(this.getPointer(h,!0),C.util.isTouchEvent(h));if(g.__corner=D,g===this._activeObject&&(D||!w)){this._setupCurrentTransform(h,g,S);var M=g.controls[D],d=this.getPointer(h),T=M&&M.getMouseDownHandler(h,g,M);T&&T(h,this._currentTransform,d.x,d.y)}}this._handleEvent(h,"down"),(v||w)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:h,transform:g})},__onMouseMove:function(h){var g,d;if(this._handleEvent(h,"move:before"),this._cacheTransformEventData(h),this.isDrawingMode)this._onMouseMoveInDrawingMode(h);else if(this._isMainEvent(h)){var v=this._groupSelector;v?(v.left=(d=this._absolutePointer).x-v.ex,v.top=d.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(g=this.findTarget(h)||null,this._setCursorFromEvent(h,g),this._fireOverOutEvents(g,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,g){var d=this._hoveredTarget,v=this._hoveredTargets,w=this.targets,S=Math.max(v.length,w.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:d,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var D=0;D<S;D++)this.fireSyntheticInOutEvents(w[D],g,{oldTarget:v[D],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,g){var d=this._draggedoverTarget,v=this._hoveredTargets,w=this.targets,S=Math.max(v.length,w.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:d,evtOut:"dragleave",evtIn:"dragenter"});for(var D=0;D<S;D++)this.fireSyntheticInOutEvents(w[D],g,{oldTarget:v[D],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,g,d){var v,w,M,S=d.oldTarget,T=S!==h,R=d.canvasEvtIn,j=d.canvasEvtOut;T&&(v={e:g,target:h,previousTarget:S},w={e:g,target:S,nextTarget:h}),M=h&&T,S&&T&&(j&&this.fire(j,w),S.fire(d.evtOut,w)),M&&(R&&this.fire(R,v),h.fire(d.evtIn,v))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var g=this.getPointer(h),d=this._currentTransform;d.reset=!1,d.shiftKey=h.shiftKey,d.altKey=h[this.centeredKey],this._performTransformAction(h,d,g),d.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,g,d){var S=g.action,D=!1,M=g.actionHandler;M&&(D=M(h,g,d.x,d.y)),"drag"===S&&D&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||D},_fire:C.controlsUtils.fireEvent,_setCursorFromEvent:function(h,g){if(!g)return this.setCursor(this.defaultCursor),!1;var d=g.hoverCursor||this.hoverCursor,v=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,w=(!v||!v.contains(g))&&g._findTargetCorner(this.getPointer(h,!0));w?this.setCursor(this.getCornerCursor(w,g,h)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(S){d=S.hoverCursor||d}),this.setCursor(d))},getCornerCursor:function(h,g,d){var v=g.controls[h];return v.cursorStyleHandler(d,v,g)}})}(),function(){var y=Math.min,f=Math.max;C.util.object.extend(C.Canvas.prototype,{_shouldGroup:function(_,p){var l=this._activeObject;return l&&this._isSelectionKeyPressed(_)&&p&&p.selectable&&this.selection&&(l!==p||"activeSelection"===l.type)&&!p.onSelect({e:_})},_handleGrouping:function(_,p){var l=this._activeObject;l.__corner||p===l&&(!(p=this.findTarget(_,!0))||!p.selectable)||(l&&"activeSelection"===l.type?this._updateActiveSelection(p,_):this._createActiveSelection(p,_))},_updateActiveSelection:function(_,p){var l=this._activeObject,u=l._objects.slice(0);l.contains(_)?(l.removeWithUpdate(_),this._hoveredTarget=_,this._hoveredTargets=this.targets.concat(),1===l.size()&&this._setActiveObject(l.item(0),p)):(l.addWithUpdate(_),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,p)},_createActiveSelection:function(_,p){var l=this.getActiveObjects(),u=this._createGroup(_);this._hoveredTarget=u,this._setActiveObject(u,p),this._fireSelectionEvents(l,p)},_createGroup:function(_){var p=this._objects,u=p.indexOf(this._activeObject)<p.indexOf(_)?[this._activeObject,_]:[_,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new C.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(_){var l,p=this._collectObjects(_);1===p.length?this.setActiveObject(p[0],_):p.length>1&&(l=new C.ActiveSelection(p.reverse(),{canvas:this}),this.setActiveObject(l,_))},_collectObjects:function(_){for(var l,p=[],u=this._groupSelector.ex,a=this._groupSelector.ey,h=u+this._groupSelector.left,g=a+this._groupSelector.top,d=new C.Point(y(u,h),y(a,g)),v=new C.Point(f(u,h),f(a,g)),w=!this.selectionFullyContained,S=u===h&&a===g,D=this._objects.length;D--&&!((l=this._objects[D])&&l.selectable&&l.visible&&(w&&l.intersectsWithRect(d,v,!0)||l.isContainedWithinRect(d,v,!0)||w&&l.containsPoint(d,null,!0)||w&&l.containsPoint(v,null,!0))&&(p.push(l),S)););return p.length>1&&(p=p.filter(function(M){return!M.onSelect({e:_})})),p},_maybeGroupObjects:function(_){this.selection&&this._groupSelector&&this._groupSelectedObjects(_),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),C.util.object.extend(C.StaticCanvas.prototype,{toDataURL:function(y){y||(y={});var f=y.format||"png",_=y.quality||1,p=(y.multiplier||1)*(y.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(p,y);return C.util.toDataURL(l,f,_)},toCanvasElement:function(y,f){var _=((f=f||{}).width||this.width)*(y=y||1),p=(f.height||this.height)*y,l=this.getZoom(),u=this.width,a=this.height,h=l*y,g=this.viewportTransform,w=this.interactive,S=[h,0,0,h,(g[4]-(f.left||0))*y,(g[5]-(f.top||0))*y],D=this.enableRetinaScaling,M=C.util.createCanvasElement(),T=this.contextTop;return M.width=_,M.height=p,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=S,this.width=_,this.height=p,this.calcViewportBoundaries(),this.renderCanvas(M.getContext("2d"),this._objects),this.viewportTransform=g,this.width=u,this.height=a,this.calcViewportBoundaries(),this.interactive=w,this.enableRetinaScaling=D,this.contextTop=T,M}}),C.util.object.extend(C.StaticCanvas.prototype,{loadFromJSON:function(y,f,_){if(y){var p="string"==typeof y?JSON.parse(y):C.util.object.clone(y),l=this,u=p.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete p.clipPath,this._enlivenObjects(p.objects,function(h){l.clear(),l._setBgOverlay(p,function(){u?l._enlivenObjects([u],function(g){l.clipPath=g[0],l.__setupCanvas.call(l,p,h,a,f)}):l.__setupCanvas.call(l,p,h,a,f)})},_),this}},__setupCanvas:function(y,f,_,p){var l=this;f.forEach(function(u,a){l.insertAt(u,a)}),this.renderOnAddRemove=_,delete y.objects,delete y.backgroundImage,delete y.overlayImage,delete y.background,delete y.overlay,this._setOptions(y),this.renderAll(),p&&p()},_setBgOverlay:function(y,f){var _={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(y.backgroundImage||y.overlayImage||y.background||y.overlay){var p=function(){_.backgroundImage&&_.overlayImage&&_.backgroundColor&&_.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",y.backgroundImage,_,p),this.__setBgOverlay("overlayImage",y.overlayImage,_,p),this.__setBgOverlay("backgroundColor",y.background,_,p),this.__setBgOverlay("overlayColor",y.overlay,_,p)}else f&&f()},__setBgOverlay:function(y,f,_,p){var l=this;if(!f)return _[y]=!0,void(p&&p());"backgroundImage"===y||"overlayImage"===y?C.util.enlivenObjects([f],function(u){l[y]=u[0],_[y]=!0,p&&p()}):this["set"+C.util.string.capitalize(y,!0)](f,function(){_[y]=!0,p&&p()})},_enlivenObjects:function(y,f,_){y&&0!==y.length?C.util.enlivenObjects(y,function(p){f&&f(p)},null,_):f&&f([])},_toDataURL:function(y,f){this.clone(function(_){f(_.toDataURL(y))})},_toDataURLWithMultiplier:function(y,f,_){this.clone(function(p){_(p.toDataURLWithMultiplier(y,f))})},clone:function(y,f){var _=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(p){p.loadFromJSON(_,function(){y&&y(p)})})},cloneWithoutData:function(y){var f=C.util.createCanvasElement();f.width=this.width,f.height=this.height;var _=new C.Canvas(f);this.backgroundImage?(_.setBackgroundImage(this.backgroundImage.src,function(){_.renderAll(),y&&y(_)}),_.backgroundImageOpacity=this.backgroundImageOpacity,_.backgroundImageStretch=this.backgroundImageStretch):y&&y(_)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.util.object.clone,l=f.util.toFixed,u=f.util.string.capitalize,a=f.util.degreesToRadians;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!f.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(d){d&&this.setOptions(d)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(d){var v=f.perfLimitSizeTotal,w=d.width,S=d.height,D=f.maxCacheSideLimit,M=f.minCacheSideLimit;if(w<=D&&S<=D&&w*S<=v)return w<M&&(d.width=M),S<M&&(d.height=M),d;var R=f.util.limitDimsByArea(w/S,v),j=f.util.capValue,q=j(M,R.x,D),ae=j(M,R.y,D);return w>q&&(d.zoomX/=w/q,d.width=q,d.capped=!0),S>ae&&(d.zoomY/=S/ae,d.height=ae,d.capped=!0),d},_getCacheCanvasDimensions:function(){var d=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),w=v.x*d.scaleX/this.scaleX,S=v.y*d.scaleY/this.scaleY;return{width:w+2,height:S+2,zoomX:d.scaleX,zoomY:d.scaleY,x:w,y:S}},_updateCacheCanvas:function(){var d=this.canvas;if(this.noScaleCache&&d&&d._currentTransform){var w=d._currentTransform.action;if(this===d._currentTransform.target&&w.slice&&"scale"===w.slice(0,5))return!1}var j,q,S=this._cacheCanvas,D=this._limitCacheSize(this._getCacheCanvasDimensions()),M=f.minCacheSideLimit,T=D.width,R=D.height,ae=D.zoomX,de=D.zoomY,_e=T!==this.cacheWidth||R!==this.cacheHeight,he=_e||this.zoomX!==ae||this.zoomY!==de,pe=0,De=0,me=!1;if(_e){var Ee=this._cacheCanvas.width,A=this._cacheCanvas.height,N=T>Ee||R>A;me=N||(T<.9*Ee||R<.9*A)&&Ee>M&&A>M,N&&!D.capped&&(T>M||R>M)&&(pe=.1*T,De=.1*R)}return this instanceof f.Text&&this.path&&(he=!0,me=!0,pe+=this.getHeightOfLine(0)*this.zoomX,De+=this.getHeightOfLine(0)*this.zoomY),!!he&&(me?(S.width=Math.ceil(T+pe),S.height=Math.ceil(R+De)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,S.width,S.height)),j=D.x/2,q=D.y/2,this.cacheTranslationX=Math.round(S.width/2-j)+j,this.cacheTranslationY=Math.round(S.height/2-q)+q,this.cacheWidth=T,this.cacheHeight=R,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ae,de),this.zoomX=ae,this.zoomY=de,!0)},setOptions:function(d){this._setOptions(d),this._initGradient(d.fill,"fill"),this._initGradient(d.stroke,"stroke"),this._initPattern(d.fill,"fill"),this._initPattern(d.stroke,"stroke")},transform:function(d){var w=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&d===this.canvas.contextTop));d.transform(w[0],w[1],w[2],w[3],w[4],w[5])},toObject:function(d){var v=f.Object.NUM_FRACTION_DIGITS,w={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(w.clipPath=this.clipPath.toObject(d),w.clipPath.inverted=this.clipPath.inverted,w.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,w,d),this.includeDefaultValues||(w=this._removeDefaultValues(w)),w},toDatalessObject:function(d){return this.toObject(d)},_removeDefaultValues:function(d){var v=f.util.getKlass(d.type).prototype;return v.stateProperties.forEach(function(S){"left"===S||"top"===S||(d[S]===v[S]&&delete d[S],Array.isArray(d[S])&&Array.isArray(v[S])&&0===d[S].length&&0===v[S].length&&delete d[S])}),d},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var d=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(d.scaleX),scaleY:Math.abs(d.scaleY)}},getTotalObjectScaling:function(){var d=this.getObjectScaling(),v=d.scaleX,w=d.scaleY;if(this.canvas){var S=this.canvas.getZoom(),D=this.canvas.getRetinaScaling();v*=S*D,w*=S*D}return{scaleX:v,scaleY:w}},getObjectOpacity:function(){var d=this.opacity;return this.group&&(d*=this.group.getObjectOpacity()),d},_set:function(d,v){var S=this[d]!==v,D=!1;return("scaleX"===d||"scaleY"===d)&&(v=this._constrainScale(v)),"scaleX"===d&&v<0?(this.flipX=!this.flipX,v*=-1):"scaleY"===d&&v<0?(this.flipY=!this.flipY,v*=-1):"shadow"!==d||!v||v instanceof f.Shadow?"dirty"===d&&this.group&&this.group.set("dirty",v):v=new f.Shadow(v),this[d]=v,S&&(D=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(d)>-1?(this.dirty=!0,D&&this.group.set("dirty",!0)):D&&this.stateProperties.indexOf(d)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(d){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(d.save(),this._setupCompositeOperation(d),this.drawSelectionBackground(d),this.transform(d),this._setOpacity(d),this._setShadow(d,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(d)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(d),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),d.restore())},renderCache:function(d){d=d||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,d.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(d,v){if(d.save(),d.globalCompositeOperation=v.inverted?"destination-out":"destination-in",v.absolutePositioned){var w=f.util.invertTransform(this.calcTransformMatrix());d.transform(w[0],w[1],w[2],w[3],w[4],w[5])}v.transform(d),d.scale(1/v.zoomX,1/v.zoomY),d.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),d.restore()},drawObject:function(d,v){var w=this.fill,S=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(d)):this._renderBackground(d),this._render(d),this._drawClipPath(d,this.clipPath),this.fill=w,this.stroke=S},_drawClipPath:function(d,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(d,v))},drawCacheOnCanvas:function(d){d.scale(1/this.zoomX,1/this.zoomY),d.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(d){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!d&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!d){var v=this.cacheWidth/this.zoomX,w=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-w/2,v,w)}return!0}return!1},_renderBackground:function(d){if(this.backgroundColor){var v=this._getNonTransformedDimensions();d.fillStyle=this.backgroundColor,d.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(d)}},_setOpacity:function(d){this.group&&!this.group._transformDone?d.globalAlpha=this.getObjectOpacity():d.globalAlpha*=this.opacity},_setStrokeStyles:function(d,v){var w=v.stroke;w&&(d.lineWidth=v.strokeWidth,d.lineCap=v.strokeLineCap,d.lineDashOffset=v.strokeDashOffset,d.lineJoin=v.strokeLineJoin,d.miterLimit=v.strokeMiterLimit,w.toLive?"percentage"===w.gradientUnits||w.gradientTransform||w.patternTransform?this._applyPatternForTransformedGradient(d,w):(d.strokeStyle=w.toLive(d,this),this._applyPatternGradientTransform(d,w)):d.strokeStyle=v.stroke)},_setFillStyles:function(d,v){var w=v.fill;w&&(w.toLive?(d.fillStyle=w.toLive(d,this),this._applyPatternGradientTransform(d,v.fill)):d.fillStyle=w)},_setClippingProperties:function(d){d.globalAlpha=1,d.strokeStyle="transparent",d.fillStyle="#000000"},_setLineDash:function(d,v){!v||0===v.length||(1&v.length&&v.push.apply(v,v),d.setLineDash(v))},_renderControls:function(d,v){var D,M,T,w=this.getViewportTransform(),S=this.calcTransformMatrix();M=typeof(v=v||{}).hasBorders<"u"?v.hasBorders:this.hasBorders,T=typeof v.hasControls<"u"?v.hasControls:this.hasControls,S=f.util.multiplyTransformMatrices(w,S),D=f.util.qrDecompose(S),d.save(),d.translate(D.translateX,D.translateY),d.lineWidth=1*this.borderScaleFactor,this.group||(d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(D.angle-=180),d.rotate(a(this.group?D.angle:this.angle)),v.forActiveSelection||this.group?M&&this.drawBordersInGroup(d,D,v):M&&this.drawBorders(d,v),T&&this.drawControls(d,v),d.restore()},_setShadow:function(d){if(this.shadow){var S,v=this.shadow,w=this.canvas,D=w&&w.viewportTransform[0]||1,M=w&&w.viewportTransform[3]||1;S=v.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),w&&w._isRetinaScaling()&&(D*=f.devicePixelRatio,M*=f.devicePixelRatio),d.shadowColor=v.color,d.shadowBlur=v.blur*f.browserShadowBlurConstant*(D+M)*(S.scaleX+S.scaleY)/4,d.shadowOffsetX=v.offsetX*D*S.scaleX,d.shadowOffsetY=v.offsetY*M*S.scaleY}},_removeShadow:function(d){this.shadow&&(d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0)},_applyPatternGradientTransform:function(d,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var w=v.gradientTransform||v.patternTransform,S=-this.width/2+v.offsetX||0,D=-this.height/2+v.offsetY||0;return"percentage"===v.gradientUnits?d.transform(this.width,0,0,this.height,S,D):d.transform(1,0,0,1,S,D),w&&d.transform(w[0],w[1],w[2],w[3],w[4],w[5]),{offsetX:S,offsetY:D}},_renderPaintInOrder:function(d){"stroke"===this.paintFirst?(this._renderStroke(d),this._renderFill(d)):(this._renderFill(d),this._renderStroke(d))},_render:function(){},_renderFill:function(d){this.fill&&(d.save(),this._setFillStyles(d,this),"evenodd"===this.fillRule?d.fill("evenodd"):d.fill(),d.restore())},_renderStroke:function(d){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();d.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&d.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(d,this.strokeDashArray),this._setStrokeStyles(d,this),d.stroke(),d.restore()}},_applyPatternForTransformedGradient:function(d,v){var D,w=this._limitCacheSize(this._getCacheCanvasDimensions()),S=f.util.createCanvasElement(),M=this.canvas.getRetinaScaling(),T=w.x/this.scaleX/M,R=w.y/this.scaleY/M;S.width=T,S.height=R,(D=S.getContext("2d")).beginPath(),D.moveTo(0,0),D.lineTo(T,0),D.lineTo(T,R),D.lineTo(0,R),D.closePath(),D.translate(T/2,R/2),D.scale(w.zoomX/this.scaleX/M,w.zoomY/this.scaleY/M),this._applyPatternGradientTransform(D,v),D.fillStyle=v.toLive(d),D.fill(),d.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),d.scale(M*this.scaleX/w.zoomX,M*this.scaleY/w.zoomY),d.strokeStyle=D.createPattern(S,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var d=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",d.scaleX),this.set("scaleY",d.scaleY),this.angle=d.angle,this.skewX=d.skewX,this.skewY=0}},_removeTransformMatrix:function(d){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=f.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,d&&(this.scaleX*=d.scaleX,this.scaleY*=d.scaleY,this.cropX=d.cropX,this.cropY=d.cropY,v.x+=d.offsetLeft,v.y+=d.offsetTop,this.width=d.width,this.height=d.height),this.setPositionByOrigin(v,"center","center")},clone:function(d,v){var w=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(w,d):f.Object._fromObject("Object",w,d)},cloneAsImage:function(d,v){var w=this.toCanvasElement(v);return d&&d(new f.Image(w)),this},toCanvasElement:function(d){d||(d={});var v=f.util,w=v.saveObjectTransform(this),S=this.group,D=this.shadow,M=Math.abs,T=(d.multiplier||1)*(d.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,d.withoutTransform&&v.resetObjectTransform(this),d.withoutShadow&&(this.shadow=null);var ae,_e,he,R=f.util.createCanvasElement(),j=this.getBoundingRect(!0,!0),q=this.shadow,de={x:0,y:0};q&&(_e=q.blur,ae=q.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),de.x=2*Math.round(M(q.offsetX)+_e)*M(ae.scaleX),de.y=2*Math.round(M(q.offsetY)+_e)*M(ae.scaleY)),he=j.height+de.y,R.width=Math.ceil(j.width+de.x),R.height=Math.ceil(he);var pe=new f.StaticCanvas(R,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===d.format&&(pe.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(pe.width/2,pe.height/2),"center","center");var De=this.canvas;pe.add(this);var me=pe.toCanvasElement(T||1,d);return this.shadow=D,this.set("canvas",De),S&&(this.group=S),this.set(w).setCoords(),pe._objects=[],pe.dispose(),pe=null,me},toDataURL:function(d){return d||(d={}),f.util.toDataURL(this.toCanvasElement(d),d.format||"png",d.quality||1)},isType:function(d){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===d},complexity:function(){return 1},toJSON:function(d){return this.toObject(d)},rotate:function(d){var v=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",d),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(d,v){v=v||this.canvas.getPointer(d);var w=new f.Point(v.x,v.y),S=this._getLeftTopCoords();return this.angle&&(w=f.util.rotatePoint(w,S,a(-this.angle))),{x:w.x-S.x,y:w.y-S.y}},_setupCompositeOperation:function(d){this.globalCompositeOperation&&(d.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),_(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(d,v,w,S){var D=f[d];v=p(v,!0),f.util.enlivenPatterns([v.fill,v.stroke],function(M){typeof M[0]<"u"&&(v.fill=M[0]),typeof M[1]<"u"&&(v.stroke=M[1]),f.util.enlivenObjectEnlivables(v,v,function(){var T=S?new D(v[S],v):new D(v);w&&w(T)})})},f.Object.__uid=0)}(Be),function(){var y=C.util.degreesToRadians,f={left:-.5,center:0,right:.5},_={top:-.5,center:0,bottom:.5};C.util.object.extend(C.Object.prototype,{translateToGivenOrigin:function(p,l,u,a,h){var v,w,S,g=p.x,d=p.y;return"string"==typeof l?l=f[l]:l-=.5,"string"==typeof a?a=f[a]:a-=.5,"string"==typeof u?u=_[u]:u-=.5,"string"==typeof h?h=_[h]:h-=.5,w=h-u,((v=a-l)||w)&&(S=this._getTransformedDimensions(),g=p.x+v*S.x,d=p.y+w*S.y),new C.Point(g,d)},translateToCenterPoint:function(p,l,u){var a=this.translateToGivenOrigin(p,l,u,"center","center");return this.angle?C.util.rotatePoint(a,p,y(this.angle)):a},translateToOriginPoint:function(p,l,u){var a=this.translateToGivenOrigin(p,"center","center",l,u);return this.angle?C.util.rotatePoint(a,p,y(this.angle)):a},getCenterPoint:function(){var p=new C.Point(this.left,this.top);return this.translateToCenterPoint(p,this.originX,this.originY)},getPointByOrigin:function(p,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,p,l)},toLocalPoint:function(p,l,u){var h,g,a=this.getCenterPoint();return h=typeof l<"u"&&typeof u<"u"?this.translateToGivenOrigin(a,"center","center",l,u):new C.Point(this.left,this.top),g=new C.Point(p.x,p.y),this.angle&&(g=C.util.rotatePoint(g,a,-y(this.angle))),g.subtractEquals(h)},setPositionByOrigin:function(p,l,u){var a=this.translateToCenterPoint(p,l,u),h=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(p){var g,d,l=y(this.angle),u=this.getScaledWidth(),a=C.util.cos(l)*u,h=C.util.sin(l)*u;this.left+=a*((d="string"==typeof p?f[p]:p-.5)-(g="string"==typeof this.originX?f[this.originX]:this.originX-.5)),this.top+=h*(d-g),this.setCoords(),this.originX=p},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var p=this.getCenterPoint();this.originX="center",this.originY="center",this.left=p.x,this.top=p.y},_resetOrigin:function(){var p=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=p.x,this.top=p.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var f=C.util,_=f.degreesToRadians,p=f.multiplyTransformMatrices,l=f.transformPoint;f.object.extend(C.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,a){return a?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,a){return function y(u){return[new C.Point(u.tl.x,u.tl.y),new C.Point(u.tr.x,u.tr.y),new C.Point(u.br.x,u.br.y),new C.Point(u.bl.x,u.bl.y)]}(this._getCoords(u,a))},intersectsWithRect:function(u,a,h,g){var d=this.getCoords(h,g);return"Intersection"===C.Intersection.intersectPolygonRectangle(d,u,a).status},intersectsWithObject:function(u,a,h){return"Intersection"===C.Intersection.intersectPolygonPolygon(this.getCoords(a,h),u.getCoords(a,h)).status||u.isContainedWithinObject(this,a,h)||this.isContainedWithinObject(u,a,h)},isContainedWithinObject:function(u,a,h){for(var g=this.getCoords(a,h),v=0,w=u._getImageLines(a?u.aCoords:u.lineCoords);v<4;v++)if(!u.containsPoint(g[v],w))return!1;return!0},isContainedWithinRect:function(u,a,h,g){var d=this.getBoundingRect(h,g);return d.left>=u.x&&d.left+d.width<=a.x&&d.top>=u.y&&d.top+d.height<=a.y},containsPoint:function(u,v,h,g){var d=this._getCoords(h,g),w=(v=v||this._getImageLines(d),this._findCrossPoints(u,v));return 0!==w&&w%2==1},isOnScreen:function(u){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;return!(!this.getCoords(!0,u).some(function(d){return d.x<=h.x&&d.x>=a.x&&d.y<=h.y&&d.y>=a.y})&&!this.intersectsWithRect(a,h,!0,u))||this._containsCenterOfCanvas(a,h,u)},_containsCenterOfCanvas:function(u,a,h){return!!this.containsPoint({x:(u.x+a.x)/2,y:(u.y+a.y)/2},null,!0,h)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;return!!this.intersectsWithRect(a,h,!0,u)||this.getCoords(!0,u).every(function(d){return(d.x>=h.x||d.x<=a.x)&&(d.y>=h.y||d.y<=a.y)})&&this._containsCenterOfCanvas(a,h,u)},_getImageLines:function(u){return{topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}}},_findCrossPoints:function(u,a){var g,d,v,w,D,S=0;for(var M in a)if(!((D=a[M]).o.y<u.y&&D.d.y<u.y||D.o.y>=u.y&&D.d.y>=u.y||(D.o.x===D.d.x&&D.o.x>=u.x?w=D.o.x:(g=(D.d.y-D.o.y)/(D.d.x-D.o.x),d=u.y-0*u.x,v=D.o.y-g*D.o.x,w=-(d-v)/(0-g)),w>=u.x&&(S+=1),2!==S)))break;return S},getBoundingRect:function(u,a){var h=this.getCoords(u,a);return f.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:0===u?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,a){var h=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(u/this.width/h)},scaleToHeight:function(u,a){var h=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(u/this.height/h)},calcLineCoords:function(){var u=this.getViewportTransform(),a=this.padding,h=_(this.angle),v=f.cos(h)*a,w=f.sin(h)*a,S=v+w,D=v-w,M=this.calcACoords(),T={tl:l(M.tl,u),tr:l(M.tr,u),bl:l(M.bl,u),br:l(M.br,u)};return a&&(T.tl.x-=D,T.tl.y-=S,T.tr.x+=S,T.tr.y-=D,T.bl.x-=S,T.bl.y+=D,T.br.x+=D,T.br.y+=S),T},calcOCoords:function(){var u=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),h=this.getViewportTransform(),g=p(h,a),d=p(g,u),v=(d=p(d,[1/h[0],0,0,1/h[3],0,0]),this._calculateCurrentDimensions()),w={};return this.forEachControl(function(S,D,M){w[D]=S.positionHandler(v,d,M)}),w},calcACoords:function(){var u=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),h=p(a,u),g=this._getTransformedDimensions(),d=g.x/2,v=g.y/2;return{tl:l({x:-d,y:-v},h),tr:l({x:d,y:-v},h),bl:l({x:-d,y:v},h),br:l({x:d,y:v},h)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var a="_",h="";return!u&&this.group&&(h=this.group.transformMatrixKey(u)+a),h+this.top+a+this.left+a+this.scaleX+a+this.scaleY+a+this.skewX+a+this.skewY+a+this.angle+a+this.originX+a+this.originY+a+this.width+a+this.height+a+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var a=this.calcOwnMatrix();if(u||!this.group)return a;var h=this.transformMatrixKey(u),g=this.matrixCache||(this.matrixCache={});return g.key===h?g.value:(this.group&&(a=p(this.group.calcTransformMatrix(!1),a)),g.key=h,g.value=a,a)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===u)return a.value;var h=this._calcTranslateMatrix(),g={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return a.key=u,a.value=f.composeMatrix(g),a.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth;return{x:this.width+u,y:this.height+u}},_getTransformedDimensions:function(u,a){typeof u>"u"&&(u=this.skewX),typeof a>"u"&&(a=this.skewY);var h,g,d,v=0===u&&0===a;if(this.strokeUniform?(g=this.width,d=this.height):(g=(h=this._getNonTransformedDimensions()).x,d=h.y),v)return this._finalizeDimensions(g*this.scaleX,d*this.scaleY);var w=f.sizeAfterTransform(g,d,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:a});return this._finalizeDimensions(w.x,w.y)},_finalizeDimensions:function(u,a){return this.strokeUniform?{x:u+this.strokeWidth,y:a+this.strokeWidth}:{x:u,y:a}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),a=this._getTransformedDimensions();return l(a,u,!0).scalarAdd(2*this.padding)}})}(),C.util.object.extend(C.Object.prototype,{sendToBack:function(){return this.group?C.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?C.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(y){return this.group?C.StaticCanvas.prototype.sendBackwards.call(this.group,this,y):this.canvas&&this.canvas.sendBackwards(this,y),this},bringForward:function(y){return this.group?C.StaticCanvas.prototype.bringForward.call(this.group,this,y):this.canvas&&this.canvas.bringForward(this,y),this},moveTo:function(y){return this.group&&"activeSelection"!==this.group.type?C.StaticCanvas.prototype.moveTo.call(this.group,this,y):this.canvas&&this.canvas.moveTo(this,y),this}}),function(){function y(_,p){if(p){if(p.toLive)return _+": url(#SVGID_"+p.id+"); ";var l=new C.Color(p),u=_+": "+l.toRgb()+"; ",a=l.getAlpha();return 1!==a&&(u+=_+"-opacity: "+a.toString()+"; "),u}return _+": none; "}var f=C.util.toFixed;C.util.object.extend(C.Object.prototype,{getSvgStyles:function(_){var p=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",w=this.visible?"":" visibility: hidden;",S=_?"":this.getSvgFilter(),D=y("fill",this.fill);return[y("stroke",this.stroke),"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",d,"; ",D,"fill-rule: ",p,"; ","opacity: ",v,";",S,w].join("")},getSvgSpanStyles:function(_,p){var l="; ",a=_.fontFamily?"font-family: "+(-1===_.fontFamily.indexOf("'")&&-1===_.fontFamily.indexOf('"')?"'"+_.fontFamily+"'":_.fontFamily)+l:"",u=_.strokeWidth?"stroke-width: "+_.strokeWidth+l:"",h=_.fontSize?"font-size: "+_.fontSize+"px"+l:"",g=_.fontStyle?"font-style: "+_.fontStyle+l:"",d=_.fontWeight?"font-weight: "+_.fontWeight+l:"",v=_.fill?y("fill",_.fill):"",w=_.stroke?y("stroke",_.stroke):"",S=this.getSvgTextDecoration(_);return S&&(S="text-decoration: "+S+l),[w,u,a,h,g,d,S,v,_.deltaY?"baseline-shift: "+-_.deltaY+"; ":"",p?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(_){return["overline","underline","line-through"].filter(function(p){return _[p.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(_,p){var l=_?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+C.util.matrixToSVG(l)+(p||"")+'" '},_setSVGBg:function(_){if(this.backgroundColor){var p=C.Object.NUM_FRACTION_DIGITS;_.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,p),'" y="',f(-this.height/2,p),'" width="',f(this.width,p),'" height="',f(this.height,p),'"></rect>\n')}},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(_),{reviver:_})},toClipPathSVG:function(_){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(_),{reviver:_})},_createBaseClipPathSVGMarkup:function(_,p){var l=(p=p||{}).reviver,a=[this.getSvgTransform(!0,p.additionalTransform||""),this.getSvgCommons()].join(""),h=_.indexOf("COMMON_PARTS");return _[h]=a,l?l(_.join("")):_.join("")},_createBaseSVGMarkup:function(_,p){var M,R,l=(p=p||{}).noStyle,u=p.reviver,a=l?"":'style="'+this.getSvgStyles()+'" ',h=p.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=g&&g.absolutePositioned,w=this.stroke,S=this.fill,D=this.shadow,T=[],j=_.indexOf("COMMON_PARTS"),q=p.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+C.Object.__uid++,R='<clipPath id="'+g.clipPathId+'" >\n'+g.toClipPathSVG(u)+"</clipPath>\n"),v&&T.push("<g ",h,this.getSvgCommons()," >\n"),T.push("<g ",this.getSvgTransform(!1),v?"":h+this.getSvgCommons()," >\n"),M=[a,d,l?"":this.addPaintOrder()," ",q?'transform="'+q+'" ':""].join(""),_[j]=M,S&&S.toLive&&T.push(S.toSVG(this)),w&&w.toLive&&T.push(w.toSVG(this)),D&&T.push(D.toSVG(this)),g&&T.push(R),T.push(_.join("")),T.push("</g>\n"),v&&T.push("</g>\n"),u?u(T.join("")):T.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var y=C.util.object.extend,f="stateProperties";function _(l,u,a){var h={};a.forEach(function(d){h[d]=l[d]}),y(l[u],h,!0)}function p(l,u,a){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var h=0,g=l.length;h<g;h++)if(!p(l[h],u[h]))return!1;return!0}if(l&&"object"==typeof l){var v,d=Object.keys(l);if(!u||"object"!=typeof u||!a&&d.length!==Object.keys(u).length)return!1;for(h=0,g=d.length;h<g;h++)if("canvas"!==(v=d[h])&&"group"!==v&&!p(l[v],u[v]))return!1;return!0}}C.util.object.extend(C.Object.prototype,{hasStateChanged:function(l){var u="_"+(l=l||f);return Object.keys(this[u]).length<this[l].length||!p(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||f,a="_"+u;return this[a]?(_(this,a,this[u]),l&&l.stateProperties&&_(this,a,l.stateProperties),this):this.setupState(l)},setupState:function(l){var u=(l=l||{}).propertySet||f;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var y=C.util.degreesToRadians;C.util.object.extend(C.Object.prototype,{_findTargetCorner:function(f,_){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u,a,d,p=f.x,l=f.y,h=Object.keys(this.oCoords),g=h.length-1;for(this.__corner=0;g>=0;g--)if(this.isControlVisible(d=h[g])&&(a=this._getImageLines(_?this.oCoords[d].touchCorner:this.oCoords[d].corner),0!==(u=this._findCrossPoints({x:p,y:l},a))&&u%2==1))return this.__corner=d,d;return!1},forEachControl:function(f){for(var _ in this.controls)f(this.controls[_],_,this)},_setCornerCoords:function(){var f=this.oCoords;for(var _ in f){var p=this.controls[_];f[_].corner=p.calcCornerCoords(this.angle,this.cornerSize,f[_].x,f[_].y,!1),f[_].touchCorner=p.calcCornerCoords(this.angle,this.touchCornerSize,f[_].x,f[_].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var _=this.getCenterPoint(),p=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return f.translate(_.x,_.y),f.scale(1/l[0],1/l[3]),f.rotate(y(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-p.x/2,-p.y/2,p.x,p.y),f.restore(),this},drawBorders:function(f,_){_=_||{};var p=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=p.x+l,a=p.y+l,h=typeof _.hasControls<"u"?_.hasControls:this.hasControls,g=!1;return f.save(),f.strokeStyle=_.borderColor||this.borderColor,this._setLineDash(f,_.borderDashArray||this.borderDashArray),f.strokeRect(-u/2,-a/2,u,a),h&&(f.beginPath(),this.forEachControl(function(d,v,w){d.withConnection&&d.getVisibility(w,v)&&(g=!0,f.moveTo(d.x*u,d.y*a),f.lineTo(d.x*u+d.offsetX,d.y*a+d.offsetY))}),g&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,_,p){p=p||{};var l=C.util.sizeAfterTransform(this.width,this.height,_),u=this.strokeWidth,a=this.strokeUniform,h=this.borderScaleFactor,g=l.x+u*(a?this.canvas.getZoom():_.scaleX)+h,d=l.y+u*(a?this.canvas.getZoom():_.scaleY)+h;return f.save(),this._setLineDash(f,p.borderDashArray||this.borderDashArray),f.strokeStyle=p.borderColor||this.borderColor,f.strokeRect(-g/2,-d/2,g,d),f.restore(),this},drawControls:function(f,_){_=_||{},f.save();var l,u,p=this.canvas.getRetinaScaling();return f.setTransform(p,0,0,p,0,0),f.strokeStyle=f.fillStyle=_.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=_.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,_.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(a,h,g){u=g.oCoords[h],a.getVisibility(g,h)&&(l&&(u=C.util.transformPoint(u,l)),a.render(f,u.x,u.y,_,g))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,_){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=_,this},setControlsVisibility:function(f){for(var _ in f||(f={}),f)this.setControlVisible(_,f[_]);return this},onDeselect:function(){},onSelect:function(){}})}(),C.util.object.extend(C.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(y,f){var _=function(){},p=(f=f||{}).onComplete||_,l=f.onChange||_,u=this;return C.util.animate({target:this,startValue:y.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(a){y.set("left",a),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),p()}})},fxCenterObjectV:function(y,f){var _=function(){},p=(f=f||{}).onComplete||_,l=f.onChange||_,u=this;return C.util.animate({target:this,startValue:y.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(a){y.set("top",a),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),p()}})},fxRemove:function(y,f){var _=function(){},p=(f=f||{}).onComplete||_,l=f.onChange||_,u=this;return C.util.animate({target:this,startValue:y.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){y.set("opacity",a),u.requestRenderAll(),l()},onComplete:function(){u.remove(y),p()}})}}),C.util.object.extend(C.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var f,y=[],p=[];for(f in arguments[0])y.push(f);for(var l=0,u=y.length;l<u;l++)p.push(this._animate(f=y[l],arguments[0][f],arguments[1],l!==u-1));return p}return this._animate.apply(this,arguments)},_animate:function(y,f,_,p){var u,l=this;f=f.toString(),_=_?C.util.object.clone(_):{},~y.indexOf(".")&&(u=y.split("."));var a=l.colorProperties.indexOf(y)>-1||u&&l.colorProperties.indexOf(u[1])>-1,h=u?this.get(u[0])[u[1]]:this.get(y);"from"in _||(_.from=h),a||(f=~f.indexOf("=")?h+parseFloat(f.replace("=","")):parseFloat(f));var g={target:this,startValue:_.from,endValue:f,byValue:_.by,easing:_.easing,duration:_.duration,abort:_.abort&&function(d,v,w){return _.abort.call(l,d,v,w)},onChange:function(d,v,w){u?l[u[0]][u[1]]=d:l.set(y,d),!p&&_.onChange&&_.onChange(d,v,w)},onComplete:function(d,v,w){p||(l.setCoords(),_.onComplete&&_.onComplete(d,v,w))}};return a?C.util.animateColor(g.startValue,g.endValue,g.duration,g):C.util.animate(g)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};function u(a,h){var g=a.origin,d=a.axis1,v=a.axis2,w=a.dimension,S=h.nearest,D=h.center,M=h.farthest;return function(){switch(this.get(g)){case S:return Math.min(this.get(d),this.get(v));case D:return Math.min(this.get(d),this.get(v))+.5*this.get(w);case M:return Math.max(this.get(d),this.get(v))}}}f.Line?f.warn("fabric.Line is already defined"):(f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(a,h){a||(a=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",a[0]),this.set("y1",a[1]),this.set("x2",a[2]),this.set("y2",a[3]),this._setWidthHeight(h)},_setWidthHeight:function(a){a||(a={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in a?a.left:this._getLeftToOriginX(),this.top="top"in a?a.top:this._getTopToOriginY()},_set:function(a,h){return this.callSuper("_set",a,h),typeof l[a]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a){a.beginPath();var h=this.calcLinePoints();a.moveTo(h.x1,h.y1),a.lineTo(h.x2,h.y2),a.lineWidth=this.strokeWidth;var g=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle,this.stroke&&this._renderStroke(a),a.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(a){return _(this.callSuper("toObject",a),this.calcLinePoints())},_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(a.y-=this.strokeWidth),0===this.height&&(a.x-=this.strokeWidth)),a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1;return{x1:a*this.width*.5,x2:a*this.width*-.5,y1:h*this.height*.5,y2:h*this.height*-.5}},_toSVG:function(){var a=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'" />\n']}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(a,h,g){g=g||{};var d=f.parseAttributes(a,f.Line.ATTRIBUTE_NAMES);h(new f.Line([d.x1||0,d.y1||0,d.x2||0,d.y2||0],_(d,g)))},f.Line.fromObject=function(a,h){var d=p(a,!0);d.points=[a.x1,a.y1,a.x2,a.y2],f.Object._fromObject("Line",d,function g(v){delete v.points,h&&h(v)},"points")})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.degreesToRadians;f.Circle?f.warn("fabric.Circle is already defined."):(f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),"radius"===l&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,h=(this.endAngle-this.startAngle)%360;if(0===h)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var g=_(this.startAngle),d=_(this.endAngle),v=this.radius;l=['<path d="M '+f.util.cos(g)*v+" "+f.util.sin(g)*v," A "+v+" "+v," 0 ",+(h>180?"1":"0")+" 1"," "+f.util.cos(d)*v+" "+f.util.sin(d)*v,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,_(this.startAngle),_(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(l,u){var a=f.parseAttributes(l,f.Circle.ATTRIBUTE_NAMES);if(!function p(l){return"radius"in l&&l.radius>=0}(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,u(new f.Circle(a))},f.Circle.fromObject=function(l,u){f.Object._fromObject("Circle",l,u)})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Triangle?f.warn("fabric.Triangle is already defined"):(f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(_){var p=this.width/2,l=this.height/2;_.beginPath(),_.moveTo(-p,l),_.lineTo(0,-l),_.lineTo(p,l),_.closePath(),this._renderPaintInOrder(_)},_toSVG:function(){var _=this.width/2,p=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-_+" "+p,"0 "+-p,_+" "+p].join(","),'" />']}}),f.Triangle.fromObject=function(_,p){return f.Object._fromObject("Triangle",_,p)})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=2*Math.PI;f.Ellipse?f.warn("fabric.Ellipse is already defined."):(f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this.set("rx",p&&p.rx||0),this.set("ry",p&&p.ry||0)},_set:function(p,l){switch(this.callSuper("_set",p,l),p){case"rx":this.rx=l,this.set("width",2*l);break;case"ry":this.ry=l,this.set("height",2*l)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(p){p.beginPath(),p.save(),p.transform(1,0,0,this.ry/this.rx,0,0),p.arc(0,0,this.rx,0,_,!1),p.restore(),this._renderPaintInOrder(p)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(p,l){var u=f.parseAttributes(p,f.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new f.Ellipse(u))},f.Ellipse.fromObject=function(p,l){f.Object._fromObject("Ellipse",p,l)})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend;f.Rect?f.warn("fabric.Rect is already defined"):(f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(p){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,h=this.height,g=-this.width/2,d=-this.height/2,v=0!==l||0!==u,w=.4477152502;p.beginPath(),p.moveTo(g+l,d),p.lineTo(g+a-l,d),v&&p.bezierCurveTo(g+a-w*l,d,g+a,d+w*u,g+a,d+u),p.lineTo(g+a,d+h-u),v&&p.bezierCurveTo(g+a,d+h-w*u,g+a-w*l,d+h,g+a-l,d+h),p.lineTo(g+l,d+h),v&&p.bezierCurveTo(g+w*l,d+h,g,d+h-w*u,g,d+h-u),p.lineTo(g,d+u),v&&p.bezierCurveTo(g,d+w*u,g+w*l,d,g+l,d),p.closePath(),this._renderPaintInOrder(p)},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(p,l,u){if(!p)return l(null);u=u||{};var a=f.parseAttributes(p,f.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var h=new f.Rect(_(u?f.util.object.clone(u):{},a));h.visible=h.visible&&h.width>0&&h.height>0,l(h)},f.Rect.fromObject=function(p,l){return f.Object._fromObject("Rect",p,l)})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.util.array.min,l=f.util.array.max,u=f.util.toFixed,a=f.util.projectStrokeOnPoints;f.Polyline?f.warn("fabric.Polyline is already defined"):(f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(h,g){g=g||{},this.points=h||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(h){var d,g=this._calcDimensions(h),v=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-v,this.height=g.height-v,h.fromSVG||(d=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+v/2,y:g.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof h.left>"u"&&(this.left=h.fromSVG?g.left:d.x),typeof h.top>"u"&&(this.top=h.fromSVG?g.top:d.y),this.pathOffset={x:g.left+this.width/2+v/2,y:g.top+this.height/2+v/2}},_calcDimensions:function(){var h=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=p(h,"x")||0,d=p(h,"y")||0;return{left:g,top:d,width:(l(h,"x")||0)-g,height:(l(h,"y")||0)-d}},toObject:function(h){return _(this.callSuper("toObject",h),{points:this.points.concat()})},_toSVG:function(){for(var h=[],g=this.pathOffset.x,d=this.pathOffset.y,v=f.Object.NUM_FRACTION_DIGITS,w=0,S=this.points.length;w<S;w++)h.push(u(this.points[w].x-g,v),",",u(this.points[w].y-d,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',h.join(""),'" />\n']},commonRender:function(h){var g,d=this.points.length,v=this.pathOffset.x,w=this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;h.beginPath(),h.moveTo(this.points[0].x-v,this.points[0].y-w);for(var S=0;S<d;S++)h.lineTo((g=this.points[S]).x-v,g.y-w);return!0},_render:function(h){this.commonRender(h)&&this._renderPaintInOrder(h)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(h){return function(g,d,v){if(!g)return d(null);v||(v={});var w=f.parsePointsAttribute(g.getAttribute("points")),S=f.parseAttributes(g,f[h].ATTRIBUTE_NAMES);S.fromSVG=!0,d(new f[h](w,_(S,v)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(h,g){return f.Object._fromObject("Polyline",h,g,"points")})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.projectStrokeOnPoints;f.Polygon?f.warn("fabric.Polygon is already defined"):(f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return _(this.points,this)},_render:function(p){this.commonRender(p)&&(p.closePath(),this._renderPaintInOrder(p))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(p,l){f.Object._fromObject("Polygon",p,l,"points")})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.array.min,p=f.util.array.max,l=f.util.object.extend,u=f.util.object.clone,a=f.util.toFixed;f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(h,g){delete(g=u(g||{})).path,this.callSuper("initialize",g),this._setPath(h||[],g)},_setPath:function(h,g){this.path=f.util.makePathSimpler(Array.isArray(h)?h:f.util.parsePath(h)),f.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(h){var g,d=0,v=0,w=0,S=0,T=-this.pathOffset.x,R=-this.pathOffset.y;h.beginPath();for(var j=0,q=this.path.length;j<q;++j)switch(g=this.path[j],g[0]){case"L":h.lineTo((w=g[1])+T,(S=g[2])+R);break;case"M":d=w=g[1],v=S=g[2],h.moveTo(w+T,S+R);break;case"C":h.bezierCurveTo(g[1]+T,g[2]+R,g[3]+T,g[4]+R,(w=g[5])+T,(S=g[6])+R);break;case"Q":h.quadraticCurveTo(g[1]+T,g[2]+R,g[3]+T,g[4]+R),w=g[3],S=g[4];break;case"z":case"Z":w=d,S=v,h.closePath()}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return l(this.callSuper("toObject",h),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(h){var g=this.toObject(["sourcePath"].concat(h));return g.sourcePath&&delete g.path,g},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',f.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var h=f.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,h)+", "+a(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var g=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},toSVG:function(h){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var d,M,h=[],g=[],v=0,w=0,S=0,D=0,T=0,R=this.path.length;T<R;++T){switch((d=this.path[T])[0]){case"L":S=d[1],D=d[2],M=[];break;case"M":v=S=d[1],w=D=d[2],M=[];break;case"C":M=f.util.getBoundsOfCurve(S,D,d[1],d[2],d[3],d[4],d[5],d[6]),S=d[5],D=d[6];break;case"Q":M=f.util.getBoundsOfCurve(S,D,d[1],d[2],d[1],d[2],d[3],d[4]),S=d[3],D=d[4];break;case"z":case"Z":S=v,D=w}M.forEach(function(he){h.push(he.x),g.push(he.y)}),h.push(S),g.push(D)}var j=_(h)||0,q=_(g)||0;return{left:j,top:q,width:(p(h)||0)-j,height:(p(g)||0)-q}}}),f.Path.fromObject=function(h,g){"string"==typeof h.sourcePath?f.loadSVGFromURL(h.sourcePath,function(v){var w=v[0];w.setOptions(h),h.clipPath?f.util.enlivenObjects([h.clipPath],function(S){w.clipPath=S[0],g&&g(w)}):g&&g(w)}):f.Object._fromObject("Path",h,g,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(h,g,d){var v=f.parseAttributes(h,f.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,g(new f.Path(v.d,l(v,d)))})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.array.min,p=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,a){u=u||{},this._objects=[],a&&this.callSuper("initialize",u),this._objects=l||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(a)this._updateObjectsACoords();else{var g=u&&u.centerPoint;void 0!==u.originX&&(this.originX=u.originX),void 0!==u.originY&&(this.originY=u.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var u=this._objects.length;u--;)this._objects[u].setCoords(!0)},_updateObjectsCoords:function(u){u=u||this.getCenterPoint();for(var a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],u)},_updateObjectCoords:function(l,u){l.set({left:l.left-u.x,top:l.top-u.y}),l.group=this,l.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),l&&(u&&f.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(l,u);if("canvas"===l)for(;a--;)this._objects[a]._set(l,u);f.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,a=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var d=g.includeDefaultValues;g.includeDefaultValues=u;var v=g.toObject(l);return g.includeDefaultValues=d,v}),h=f.Object.prototype.toObject.call(this,l);return h.objects=a,h},toDatalessObject:function(l){var u,a=this.sourcePath;if(a)u=a;else{var h=this.includeDefaultValues;u=this._objects.map(function(d){var v=d.includeDefaultValues;d.includeDefaultValues=h;var w=d.toDatalessObject(l);return d.includeDefaultValues=v,w})}var g=f.Object.prototype.toDatalessObject.call(this,l);return g.objects=u,g},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=f.Object.prototype.shouldCache.call(this);if(l)for(var u=0,a=this._objects.length;u<a;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1;return l},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,a=this._objects.length;u<a;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,a=this._objects.length;u<a;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){f.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var h=new f.ActiveSelection([]);return h.set(a),h.type="activeSelection",u.remove(this),l.forEach(function(g){g.group=h,g.dirty=!0,u.add(g)}),h.canvas=u,h._objects=l,u._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(u){u.setCoords(!0)}),this},_calcBounds:function(l){for(var h,g,d,D,u=[],a=[],v=["tr","br","bl","tl"],w=0,S=this._objects.length,M=v.length;w<S;++w){for(d=(h=this._objects[w]).calcACoords(),D=0;D<M;D++)u.push(d[g=v[D]].x),a.push(d[g].y);h.aCoords=d}this._getBounds(u,a,l)},_getBounds:function(l,u,a){var h=new f.Point(_(l),_(u)),g=new f.Point(p(l),p(u)),d=h.y||0,v=h.x||0,S=g.y-h.y||0;this.width=g.x-h.x||0,this.height=S,a||this.setPositionByOrigin({x:v,y:d},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS"," >\n"],a=0,h=this._objects.length;a<h;a++)u.push("\t\t",this._objects[a].toSVG(l));return u.push("</g>\n"),u},getSvgStyles:function(){var u=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],a=0,h=this._objects.length;a<h;a++)u.push("\t",this._objects[a].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),f.Group.fromObject=function(l,u){var a=l.objects,h=f.util.object.clone(l,!0);delete h.objects,"string"!=typeof a?f.util.enlivenObjects(a,function(g){f.util.enlivenObjectEnlivables(l,h,function(){u&&u(new f.Group(g,h,!0))})}):f.loadSVGFromURL(a,function(g){var d=f.util.groupSVGElements(g,l,a),v=h.clipPath;delete h.clipPath,d.set(h),v?f.util.enlivenObjects([v],function(w){d.clipPath=w[0],u&&u(d)}):u&&u(d)})})}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(_,p){p=p||{},this._objects=_||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;p.originX&&(this.originX=p.originX),p.originY&&(this.originY=p.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,p),this.setCoords()},toGroup:function(){var _=this._objects.concat();this._objects=[];var p=f.Object.prototype.toObject.call(this),l=new f.Group([]);if(delete p.type,l.set(p),_.forEach(function(a){a.canvas.remove(a),a.group=l}),l._objects=_,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(_,p,l){_.save(),_.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",_,p),typeof(l=l||{}).hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,a=this._objects.length;u<a;u++)this._objects[u]._renderControls(_,l);_.restore()}}),f.ActiveSelection.fromObject=function(_,p){f.util.enlivenObjects(_.objects,function(l){delete _.objects,p&&p(new f.ActiveSelection(l,_,!0))})})}(Be),function(y){"use strict";var f=C.util.object.extend;y.fabric||(y.fabric={}),y.fabric.Image?C.warn("fabric.Image is already defined."):(C.Image=C.util.createClass(C.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:C.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:C.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(_,p){p||(p={}),this.filters=[],this.cacheKey="texture"+C.Object.__uid++,this.callSuper("initialize",p),this._initElement(_,p)},getElement:function(){return this._element||{}},setElement:function(_,p){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=_,this._originalElement=_,this._initConfig(p),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(_){var p=C.filterBackend;p&&p.evictCachesForKey&&p.evictCachesForKey(_)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(_){C.util.cleanUpJsdomNode(this[_]),this[_]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var _=this.getElement();return{width:_.naturalWidth||_.width,height:_.naturalHeight||_.height}},_stroke:function(_){if(this.stroke&&0!==this.strokeWidth){var p=this.width/2,l=this.height/2;_.beginPath(),_.moveTo(-p,-l),_.lineTo(p,-l),_.lineTo(p,l),_.lineTo(-p,l),_.lineTo(-p,-l),_.closePath()}},toObject:function(_){var p=[];this.filters.forEach(function(u){u&&p.push(u.toObject())});var l=f(this.callSuper("toObject",["cropX","cropY"].concat(_)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:p});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l,_=[],p=[],u=this._element,a=-this.width/2,h=-this.height/2,g="",d="";if(!u)return[];if(this.hasCrop()){var v=C.Object.__uid++;_.push('<clipPath id="imageCrop_'+v+'">\n','\t<rect x="'+a+'" y="'+h+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),g=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(d='" image-rendering="optimizeSpeed'),p.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',h-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,d,'"',g,"></image>\n"),this.stroke||this.strokeDashArray){var w=this.fill;this.fill=null,l=["\t<rect ",'x="',a,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=w}return"fill"!==this.paintFirst?_.concat(l,p):_.concat(p,l)},getSrc:function(_){var p=_?this._element:this._originalElement;return p?p.toDataURL?p.toDataURL():this.srcFromAttribute?p.getAttribute("src"):p.src:this.src||""},setSrc:function(_,p,l){return C.util.loadImage(_,function(u,a){this.setElement(u,l),this._setWidthHeight(),p&&p(this,a)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var _=this.resizeFilter,p=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,a=l.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!_||u>p&&a>p)return this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,void(this._lastScaleY=a);C.filterBackend||(C.filterBackend=C.initFilterBackend());var g=C.util.createCanvasElement(),d=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=h.width,w=h.height;g.width=v,g.height=w,this._element=g,this._lastScaleX=_.scaleX=u,this._lastScaleY=_.scaleY=a,C.filterBackend.applyFilters([_],h,v,w,this._element,d),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(_){if(_=(_=_||this.filters||[]).filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===_.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var p=this._originalElement,l=p.naturalWidth||p.width,u=p.naturalHeight||p.height;if(this._element===this._originalElement){var a=C.util.createCanvasElement();a.width=l,a.height=u,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return C.filterBackend||(C.filterBackend=C.initFilterBackend()),C.filterBackend.applyFilters(_,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(_){C.util.setImageSmoothing(_,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(_),this._renderPaintInOrder(_)},drawCacheOnCanvas:function(_){C.util.setImageSmoothing(_,this.imageSmoothing),C.Object.prototype.drawCacheOnCanvas.call(this,_)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(_){var p=this._element;if(p){var l=this._filterScalingX,u=this._filterScalingY,a=this.width,h=this.height,g=Math.min,d=Math.max,v=d(this.cropX,0),w=d(this.cropY,0),S=p.naturalWidth||p.width,D=p.naturalHeight||p.height,M=v*l,T=w*u,R=g(a*l,S-M),j=g(h*u,D-T),q=-a/2,ae=-h/2,de=g(a,S/l-v),_e=g(h,D/u-w);p&&_.drawImage(p,M,T,R,j,q,ae,de,_e)}},_needsResize:function(){var _=this.getTotalObjectScaling();return _.scaleX!==this._lastScaleX||_.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(_,p){this.setElement(C.util.getById(_),p),C.util.addClass(this.getElement(),C.Image.CSS_CANVAS)},_initConfig:function(_){_||(_={}),this.setOptions(_),this._setWidthHeight(_)},_initFilters:function(_,p){_&&_.length?C.util.enlivenObjects(_,function(l){p&&p(l)},"fabric.Image.filters"):p&&p()},_setWidthHeight:function(_){_||(_={});var p=this.getElement();this.width=_.width||p.naturalWidth||p.width||0,this.height=_.height||p.naturalHeight||p.height||0},parsePreserveAspectRatioAttribute:function(){var w,_=C.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),p=this._element.width,l=this._element.height,u=1,a=1,h=0,g=0,d=0,v=0,S=this.width,D=this.height,M={width:S,height:D};return!_||"none"===_.alignX&&"none"===_.alignY?(u=S/p,a=D/l):("meet"===_.meetOrSlice&&(w=(S-p*(u=a=C.util.findScaleToFit(this._element,M)))/2,"Min"===_.alignX&&(h=-w),"Max"===_.alignX&&(h=w),w=(D-l*a)/2,"Min"===_.alignY&&(g=-w),"Max"===_.alignY&&(g=w)),"slice"===_.meetOrSlice&&(w=p-S/(u=a=C.util.findScaleToCover(this._element,M)),"Mid"===_.alignX&&(d=w/2),"Max"===_.alignX&&(d=w),w=l-D/a,"Mid"===_.alignY&&(v=w/2),"Max"===_.alignY&&(v=w),p=S/u,l=D/a)),{width:p,height:l,scaleX:u,scaleY:a,offsetLeft:h,offsetTop:g,cropX:d,cropY:v}}}),C.Image.CSS_CANVAS="canvas-img",C.Image.prototype.getSvgSrc=C.Image.prototype.getSrc,C.Image.fromObject=function(_,p){var l=C.util.object.clone(_);C.util.loadImage(l.src,function(u,a){a?p&&p(null,!0):C.Image.prototype._initFilters.call(l,l.filters,function(h){l.filters=h||[],C.Image.prototype._initFilters.call(l,[l.resizeFilter],function(g){l.resizeFilter=g[0],C.util.enlivenObjectEnlivables(l,l,function(){var d=new C.Image(u,l);p(d,!1)})})})},null,l.crossOrigin)},C.Image.fromURL=function(_,p,l){C.util.loadImage(_,function(u,a){p&&p(new C.Image(u,l),a)},null,l&&l.crossOrigin)},C.Image.ATTRIBUTE_NAMES=C.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),C.Image.fromElement=function(_,p,l){var u=C.parseAttributes(_,C.Image.ATTRIBUTE_NAMES);C.Image.fromURL(u["xlink:href"],p,f(l?C.util.object.clone(l):{},u))})}(Be),C.util.object.extend(C.Object.prototype,{_getAngleValueForStraighten:function(){var y=this.angle%360;return y>0?90*Math.round((y-1)/90):90*Math.round(y/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(y){var f=function(){},_=(y=y||{}).onComplete||f,p=y.onChange||f,l=this;return C.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),p()},onComplete:function(){l.setCoords(),_()}})}}),C.util.object.extend(C.StaticCanvas.prototype,{straightenObject:function(y){return y.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(y){return y.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function y(_,p){var l="precision "+p+" float;\nvoid main(){}",u=_.createShader(_.FRAGMENT_SHADER);return _.shaderSource(u,l),_.compileShader(u),!!_.getShaderParameter(u,_.COMPILE_STATUS)}function f(_){_&&_.tileSize&&(this.tileSize=_.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}C.isWebglSupported=function(_){if(C.isLikelyNode)return!1;_=_||C.WebglFilterBackend.prototype.tileSize;var p=document.createElement("canvas"),l=p.getContext("webgl")||p.getContext("experimental-webgl"),u=!1;if(l){C.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=C.maxTextureSize>=_;for(var a=["highp","mediump","lowp"],h=0;h<3;h++)if(y(l,a[h])){C.webGlPrecision=a[h];break}}return this.isSupported=u,u},C.WebglFilterBackend=f,f.prototype={tileSize:2048,resources:{},setupGLContext:function(_,p){this.dispose(),this.createWebGLCanvas(_,p),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(_,p)},chooseFastestCopyGLTo2DMethod:function(_,p){var u,l=typeof window.performance<"u";try{new ImageData(1,1),u=!0}catch{u=!1}var a=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(l&&u&&a&&h){var g=C.util.createCanvasElement(),d=new ArrayBuffer(_*p*4);if(C.forceGLPutImageData)return this.imageBuffer=d,void(this.copyGLTo2D=ps);var w,S,v={imageBuffer:d,destinationWidth:_,destinationHeight:p,targetCanvas:g};g.width=_,g.height=p,w=window.performance.now(),Dt.call(v,this.gl,v),S=window.performance.now()-w,w=window.performance.now(),ps.call(v,this.gl,v),S>window.performance.now()-w?(this.imageBuffer=d,this.copyGLTo2D=ps):this.copyGLTo2D=Dt}},createWebGLCanvas:function(_,p){var l=C.util.createCanvasElement();l.width=_,l.height=p;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=l.getContext("webgl",u);a||(a=l.getContext("experimental-webgl",u)),a&&(a.clearColor(0,0,0,0),this.canvas=l,this.gl=a)},applyFilters:function(_,p,l,u,a,h){var d,g=this.gl;h&&(d=this.getCachedTexture(h,p));var v={originalWidth:p.width||p.originalWidth,originalHeight:p.height||p.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:g,sourceTexture:this.createTexture(g,l,u,!d&&p),targetTexture:this.createTexture(g,l,u),originalTexture:d||this.createTexture(g,l,u,!d&&p),passes:_.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},w=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,w),_.forEach(function(S){S&&S.applyTo(v)}),function ms(y){var f=y.targetCanvas,l=y.destinationWidth,u=y.destinationHeight;(f.width!==l||f.height!==u)&&(f.width=l,f.height=u)}(v),this.copyGLTo2D(g,v),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(v.sourceTexture),g.deleteTexture(v.targetTexture),g.deleteFramebuffer(w),a.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(_,p,l,u,a){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a||_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,a||_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),u?_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,u):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,p,l,0,_.RGBA,_.UNSIGNED_BYTE,null),h},getCachedTexture:function(_,p){if(this.textureCache[_])return this.textureCache[_];var l=this.createTexture(this.gl,p.width,p.height,p);return this.textureCache[_]=l,l},evictCachesForKey:function(_){this.textureCache[_]&&(this.gl.deleteTexture(this.textureCache[_]),delete this.textureCache[_])},copyGLTo2D:Dt,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var _=this.gl,p={renderer:"",vendor:""};if(!_)return p;var l=_.getExtension("WEBGL_debug_renderer_info");if(l){var u=_.getParameter(l.UNMASKED_RENDERER_WEBGL),a=_.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(p.renderer=u.toLowerCase()),a&&(p.vendor=a.toLowerCase())}return this.gpuInfo=p,p}}}(),function(){"use strict";var y=function(){};function f(){}C.Canvas2dFilterBackend=f,f.prototype={evictCachesForKey:y,dispose:y,clearWebGLCaches:y,resources:{},applyFilters:function(_,p,l,u,a){var h=a.getContext("2d");h.drawImage(p,0,0,l,u);var v={sourceWidth:l,sourceHeight:u,imageData:h.getImageData(0,0,l,u),originalEl:p,originalImageData:h.getImageData(0,0,l,u),canvasEl:a,ctx:h,filterBackend:this};return _.forEach(function(w){w.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(a.width=v.imageData.width,a.height=v.imageData.height),h.putImageData(v.imageData,0,0),v}}}(),C.Image=C.Image||{},C.Image.filters=C.Image.filters||{},C.Image.filters.BaseFilter=C.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(y){y&&this.setOptions(y)},setOptions:function(y){for(var f in y)this[f]=y[f]},createProgram:function(y,f,_){f=f||this.fragmentSource,_=_||this.vertexSource,"highp"!==C.webGlPrecision&&(f=f.replace(/precision highp float/g,"precision "+C.webGlPrecision+" float"));var p=y.createShader(y.VERTEX_SHADER);if(y.shaderSource(p,_),y.compileShader(p),!y.getShaderParameter(p,y.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+y.getShaderInfoLog(p));var l=y.createShader(y.FRAGMENT_SHADER);if(y.shaderSource(l,f),y.compileShader(l),!y.getShaderParameter(l,y.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+y.getShaderInfoLog(l));var u=y.createProgram();if(y.attachShader(u,p),y.attachShader(u,l),y.linkProgram(u),!y.getProgramParameter(u,y.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+y.getProgramInfoLog(u));var a=this.getAttributeLocations(y,u),h=this.getUniformLocations(y,u)||{};return h.uStepW=y.getUniformLocation(u,"uStepW"),h.uStepH=y.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:a,uniformLocations:h}},getAttributeLocations:function(y,f){return{aPosition:y.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(y,f,_){var p=f.aPosition,l=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,l),y.enableVertexAttribArray(p),y.vertexAttribPointer(p,2,y.FLOAT,!1,0,0),y.bufferData(y.ARRAY_BUFFER,_,y.STATIC_DRAW)},_setupFrameBuffer:function(y){var _,p,f=y.context;y.passes>1?(p=y.destinationHeight,(y.sourceWidth!==(_=y.destinationWidth)||y.sourceHeight!==p)&&(f.deleteTexture(y.targetTexture),y.targetTexture=y.filterBackend.createTexture(f,_,p)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,y.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(y){y.passes--,y.pass++;var f=y.targetTexture;y.targetTexture=y.sourceTexture,y.sourceTexture=f},isNeutralState:function(){var y=this.mainParameter,f=C.Image.filters[this.type].prototype;if(y){if(Array.isArray(f[y])){for(var _=f[y].length;_--;)if(this[y][_]!==f[y][_])return!1;return!0}return f[y]===this[y]}return!1},applyTo:function(y){y.webgl?(this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y)):this.applyTo2d(y)},retrieveShader:function(y){return y.programCache.hasOwnProperty(this.type)||(y.programCache[this.type]=this.createProgram(y.context)),y.programCache[this.type]},applyToWebGL:function(y){var f=y.context,_=this.retrieveShader(y);f.bindTexture(f.TEXTURE_2D,0===y.pass&&y.originalTexture?y.originalTexture:y.sourceTexture),f.useProgram(_.program),this.sendAttributeData(f,_.attributeLocations,y.aPosition),f.uniform1f(_.uniformLocations.uStepW,1/y.sourceWidth),f.uniform1f(_.uniformLocations.uStepH,1/y.sourceHeight),this.sendUniformData(f,_.uniformLocations),f.viewport(0,0,y.destinationWidth,y.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(y,f,_){y.activeTexture(_),y.bindTexture(y.TEXTURE_2D,f),y.activeTexture(y.TEXTURE0)},unbindAdditionalTexture:function(y,f){y.activeTexture(f),y.bindTexture(y.TEXTURE_2D,null),y.activeTexture(y.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(y){this[this.mainParameter]=y},sendUniformData:function(){},createHelpLayer:function(y){if(!y.helpLayer){var f=document.createElement("canvas");f.width=y.sourceWidth,f.height=y.sourceHeight,y.helpLayer=f}},toObject:function(){var y={type:this.type},f=this.mainParameter;return f&&(y[f]=this[f]),y},toJSON:function(){return this.toObject()}}),C.Image.filters.BaseFilter.fromObject=function(y,f){var _=new C.Image.filters[y.type](y);return f&&f(_),_},function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.ColorMatrix=(0,f.util.createClass)(_.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var d,v,w,S,D,a=l.imageData.data,h=a.length,g=this.matrix,M=this.colorsOnly;for(D=0;D<h;D+=4)d=a[D],v=a[D+1],w=a[D+2],M?(a[D]=d*g[0]+v*g[1]+w*g[2]+255*g[4],a[D+1]=d*g[5]+v*g[6]+w*g[7]+255*g[9],a[D+2]=d*g[10]+v*g[11]+w*g[12]+255*g[14]):(a[D]=d*g[0]+v*g[1]+w*g[2]+(S=a[D+3])*g[3]+255*g[4],a[D+1]=d*g[5]+v*g[6]+w*g[7]+S*g[8]+255*g[9],a[D+2]=d*g[10]+v*g[11]+w*g[12]+S*g[13]+255*g[14],a[D+3]=d*g[15]+v*g[16]+w*g[17]+S*g[18]+255*g[19])},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var a=this.matrix,g=[a[4],a[9],a[14],a[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]]),l.uniform4fv(u.uConstants,g)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Brightness=(0,f.util.createClass)(_.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(0!==this.brightness){var h,a=l.imageData.data,g=a.length,d=Math.round(255*this.brightness);for(h=0;h<g;h+=4)a[h]=a[h]+d,a[h+1]=a[h+1]+d,a[h+2]=a[h+2]+d}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.Image.filters;p.Convolute=(0,f.util.createClass)(p.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(u){var a=Math.sqrt(this.matrix.length),h=this.type+"_"+a+"_"+(this.opaque?1:0),g=this.fragmentSource[h];return u.programCache.hasOwnProperty(h)||(u.programCache[h]=this.createProgram(u.context,g)),u.programCache[h]},applyTo2d:function(u){var R,j,q,ae,de,_e,be,he,pe,De,me,Ee,A,a=u.imageData,h=a.data,g=this.matrix,d=Math.round(Math.sqrt(g.length)),v=Math.floor(d/2),w=a.width,S=a.height,D=u.ctx.createImageData(w,S),M=D.data,T=this.opaque?1:0;for(me=0;me<S;me++)for(De=0;De<w;De++){for(de=4*(me*w+De),R=0,j=0,q=0,ae=0,A=0;A<d;A++)for(Ee=0;Ee<d;Ee++)_e=De+Ee-v,!((be=me+A-v)<0||be>=S||_e<0||_e>=w)&&(R+=h[he=4*(be*w+_e)]*(pe=g[A*d+Ee]),j+=h[he+1]*pe,q+=h[he+2]*pe,T||(ae+=h[he+3]*pe));M[de]=R,M[de+1]=j,M[de+2]=q,M[de+3]=T?h[de+3]:ae}u.imageData=D},getUniformLocations:function(u,a){return{uMatrix:u.getUniformLocation(a,"uMatrix"),uOpaque:u.getUniformLocation(a,"uOpaque"),uHalfSize:u.getUniformLocation(a,"uHalfSize"),uSize:u.getUniformLocation(a,"uSize")}},sendUniformData:function(u,a){u.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return _(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Grayscale=(0,f.util.createClass)(_.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(l){var h,d,a=l.imageData.data,g=a.length,v=this.mode;for(h=0;h<g;h+=4)"average"===v?d=(a[h]+a[h+1]+a[h+2])/3:"lightness"===v?d=(Math.min(a[h],a[h+1],a[h+2])+Math.max(a[h],a[h+1],a[h+2]))/2:"luminosity"===v&&(d=.21*a[h]+.72*a[h+1]+.07*a[h+2]),a[h]=d,a[h+1]=d,a[h+2]=d},retrieveShader:function(l){var u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,this.fragmentSource[this.mode])),l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){l.uniform1i(u.uMode,1)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Invert=(0,f.util.createClass)(_.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(l){var h,a=l.imageData.data,g=a.length;for(h=0;h<g;h+=4)a[h]=255-a[h],a[h+1]=255-a[h+1],a[h+2]=255-a[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.Image.filters;p.Noise=(0,f.util.createClass)(p.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(u){if(0!==this.noise){var g,d,w,h=u.imageData.data,v=this.noise;for(g=0,d=h.length;g<d;g+=4)w=(.5-Math.random())*v,h[g]+=w,h[g+1]+=w,h[g+2]+=w}},getUniformLocations:function(u,a){return{uNoise:u.getUniformLocation(a,"uNoise"),uSeed:u.getUniformLocation(a,"uSeed")}},sendUniformData:function(u,a){u.uniform1f(a.uNoise,this.noise/255),u.uniform1f(a.uSeed,Math.random())},toObject:function(){return _(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Pixelate=(0,f.util.createClass)(_.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(l){var d,v,w,S,D,M,T,R,j,q,ae,u=l.imageData,a=u.data,h=u.height,g=u.width;for(v=0;v<h;v+=this.blocksize)for(w=0;w<g;w+=this.blocksize)for(S=a[d=4*v*g+4*w],D=a[d+1],M=a[d+2],T=a[d+3],q=Math.min(v+this.blocksize,h),ae=Math.min(w+this.blocksize,g),R=v;R<q;R++)for(j=w;j<ae;j++)a[d=4*R*g+4*j]=S,a[d+1]=D,a[d+2]=M,a[d+3]=T},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.extend,p=f.Image.filters;p.RemoveColor=(0,f.util.createClass)(p.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(u){var g,v,w,S,h=u.imageData.data,d=255*this.distance,D=new f.Color(this.color).getSource(),M=[D[0]-d,D[1]-d,D[2]-d],T=[D[0]+d,D[1]+d,D[2]+d];for(g=0;g<h.length;g+=4)w=h[g+1],S=h[g+2],(v=h[g])>M[0]&&w>M[1]&&S>M[2]&&v<T[0]&&w<T[1]&&S<T[2]&&(h[g+3]=0)},getUniformLocations:function(u,a){return{uLow:u.getUniformLocation(a,"uLow"),uHigh:u.getUniformLocation(a,"uHigh")}},sendUniformData:function(u,a){var h=new f.Color(this.color).getSource(),g=parseFloat(this.distance),v=[h[0]/255+g,h[1]/255+g,h[2]/255+g,1];u.uniform4fv(a.uLow,[0+h[0]/255-g,0+h[1]/255-g,0+h[2]/255-g,1]),u.uniform4fv(a.uHigh,v)},toObject:function(){return _(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters,p=f.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)_[u]=p(_.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),f.Image.filters[u].fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric,_=f.Image.filters;_.BlendColor=(0,f.util.createClass)(_.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(l){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[l]+"}\n}"},retrieveShader:function(l){var a,u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(a=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,a)),l.programCache[u]},applyTo2d:function(l){var g,d,v,w,S,D,M,a=l.imageData.data,h=a.length,T=1-this.alpha;g=(M=new f.Color(this.color).getSource())[0]*this.alpha,d=M[1]*this.alpha,v=M[2]*this.alpha;for(var R=0;R<h;R+=4)switch(w=a[R],S=a[R+1],D=a[R+2],this.mode){case"multiply":a[R]=w*g/255,a[R+1]=S*d/255,a[R+2]=D*v/255;break;case"screen":a[R]=255-(255-w)*(255-g)/255,a[R+1]=255-(255-S)*(255-d)/255,a[R+2]=255-(255-D)*(255-v)/255;break;case"add":a[R]=w+g,a[R+1]=S+d,a[R+2]=D+v;break;case"diff":case"difference":a[R]=Math.abs(w-g),a[R+1]=Math.abs(S-d),a[R+2]=Math.abs(D-v);break;case"subtract":a[R]=w-g,a[R+1]=S-d,a[R+2]=D-v;break;case"darken":a[R]=Math.min(w,g),a[R+1]=Math.min(S,d),a[R+2]=Math.min(D,v);break;case"lighten":a[R]=Math.max(w,g),a[R+1]=Math.max(S,d),a[R+2]=Math.max(D,v);break;case"overlay":a[R]=g<128?2*w*g/255:255-2*(255-w)*(255-g)/255,a[R+1]=d<128?2*S*d/255:255-2*(255-S)*(255-d)/255,a[R+2]=v<128?2*D*v/255:255-2*(255-D)*(255-v)/255;break;case"exclusion":a[R]=g+w-2*g*w/255,a[R+1]=d+S-2*d*S/255,a[R+2]=v+D-2*v*D/255;break;case"tint":a[R]=g+w*T,a[R+1]=d+S*T,a[R+2]=v+D*T}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var a=new f.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,l.uniform4fv(u.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric,_=f.Image.filters;_.BlendImage=(0,f.util.createClass)(_.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(l){var u=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,a)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,a=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,a,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/l._element.width,-l.top/l._element.height,1]},applyTo2d:function(l){var w,S,D,M,T,R,j,q,ae,de,be,u=l.imageData,a=l.filterBackend.resources,h=u.data,g=h.length,d=u.width,v=u.height,_e=this.image;a.blendImage||(a.blendImage=f.util.createCanvasElement()),de=(ae=a.blendImage).getContext("2d"),ae.width!==d||ae.height!==v?(ae.width=d,ae.height=v):de.clearRect(0,0,d,v),de.setTransform(_e.scaleX,0,0,_e.scaleY,_e.left,_e.top),de.drawImage(_e._element,0,0,d,v),be=de.getImageData(0,0,d,v).data;for(var he=0;he<g;he+=4)switch(T=h[he],R=h[he+1],j=h[he+2],q=h[he+3],w=be[he],S=be[he+1],D=be[he+2],M=be[he+3],this.mode){case"multiply":h[he]=T*w/255,h[he+1]=R*S/255,h[he+2]=j*D/255,h[he+3]=q*M/255;break;case"mask":h[he+3]=M}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var a=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(l,u){f.Image.fromObject(l.image,function(a){var h=f.util.object.clone(l);h.image=a,u(new f.Image.filters.BlendImage(h))})}}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=Math.pow,p=Math.floor,l=Math.sqrt,u=Math.abs,a=Math.round,h=Math.sin,g=Math.ceil,d=f.Image.filters;d.Resize=(0,f.util.createClass)(d.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(w,S){return{uDelta:w.getUniformLocation(S,"uDelta"),uTaps:w.getUniformLocation(S,"uTaps")}},sendUniformData:function(w,S){w.uniform2fv(S.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),w.uniform1fv(S.uTaps,this.taps)},retrieveShader:function(w){var S=this.getFilterWindow(),D=this.type+"_"+S;if(!w.programCache.hasOwnProperty(D)){var M=this.generateShader(S);w.programCache[D]=this.createProgram(w.context,M)}return w.programCache[D]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var w=this.lanczosCreate(this.lanczosLobes),S=this.tempScale,D=this.getFilterWindow(),M=new Array(D),T=1;T<=D;T++)M[T-1]=w(T*S);return M},generateShader:function(M){for(var S=new Array(M),D=this.fragmentSourceTOP,T=1;T<=M;T++)S[T-1]=T+".0 * uDelta";return D+="uniform float uTaps["+M+"];\n",D+="void main() {\n",D+="  vec4 color = texture2D(uTexture, vTexCoord);\n",D+="  float sum = 1.0;\n",S.forEach(function(R,j){D+="  color += texture2D(uTexture, vTexCoord + "+R+") * uTaps["+j+"];\n",D+="  color += texture2D(uTexture, vTexCoord - "+R+") * uTaps["+j+"];\n",D+="  sum += 2.0 * uTaps["+j+"];\n"}),D+="  gl_FragColor = color / sum;\n",D+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(w){w.webgl?(w.passes++,this.width=w.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=w.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),w.destinationWidth=this.dW,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceWidth=w.destinationWidth,this.height=w.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),w.destinationHeight=this.dH,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceHeight=w.destinationHeight):this.applyTo2d(w)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(w){return function(S){if(S>=w||S<=-w)return 0;if(S<1.1920929e-7&&S>-1.1920929e-7)return 1;var D=(S*=Math.PI)/w;return h(S)/S*h(D)/D}},applyTo2d:function(w){var S=w.imageData,D=this.scaleX,M=this.scaleY;this.rcpScaleX=1/D,this.rcpScaleY=1/M;var ae,T=S.width,R=S.height,j=a(T*D),q=a(R*M);"sliceHack"===this.resizeType?ae=this.sliceByTwo(w,T,R,j,q):"hermite"===this.resizeType?ae=this.hermiteFastResize(w,T,R,j,q):"bilinear"===this.resizeType?ae=this.bilinearFiltering(w,T,R,j,q):"lanczos"===this.resizeType&&(ae=this.lanczosResize(w,T,R,j,q)),w.imageData=ae},sliceByTwo:function(w,S,D,M,T){var he,pe,R=w.imageData,j=.5,q=!1,ae=!1,de=S*j,_e=D*j,be=f.filterBackend.resources,De=0,me=0,Ee=S,A=0;for(be.sliceByTwo||(be.sliceByTwo=document.createElement("canvas")),((he=be.sliceByTwo).width<1.5*S||he.height<D)&&(he.width=1.5*S,he.height=D),(pe=he.getContext("2d")).clearRect(0,0,1.5*S,D),pe.putImageData(R,0,0),M=p(M),T=p(T);!q||!ae;)S=de,D=_e,M<p(de*j)?de=p(de*j):(de=M,q=!0),T<p(_e*j)?_e=p(_e*j):(_e=T,ae=!0),pe.drawImage(he,De,me,S,D,Ee,A,de,_e),De=Ee,me=A,A+=_e;return pe.getImageData(De,me,M,T)},lanczosResize:function(w,S,D,M,T){var j=w.imageData.data,q=w.ctx.createImageData(M,T),ae=q.data,de=this.lanczosCreate(this.lanczosLobes),_e=this.rcpScaleX,be=this.rcpScaleY,he=2/this.rcpScaleX,pe=2/this.rcpScaleY,De=g(_e*this.lanczosLobes/2),me=g(be*this.lanczosLobes/2),Ee={},A={},N={};return function R(B){var P,X,F,I,V,$,H,Y,oe,ce,ge;for(A.x=(B+.5)*_e,N.x=p(A.x),P=0;P<T;P++){for(A.y=(P+.5)*be,N.y=p(A.y),V=0,$=0,H=0,Y=0,oe=0,X=N.x-De;X<=N.x+De;X++)if(!(X<0||X>=S)){ce=p(1e3*u(X-A.x)),Ee[ce]||(Ee[ce]={});for(var K=N.y-me;K<=N.y+me;K++)K<0||K>=D||(ge=p(1e3*u(K-A.y)),Ee[ce][ge]||(Ee[ce][ge]=de(l(_(ce*he,2)+_(ge*pe,2))/1e3)),(F=Ee[ce][ge])>0&&(V+=F,$+=F*j[I=4*(K*S+X)],H+=F*j[I+1],Y+=F*j[I+2],oe+=F*j[I+3]))}ae[I=4*(P*M+B)]=$/V,ae[I+1]=H/V,ae[I+2]=Y/V,ae[I+3]=oe/V}return++B<M?R(B):q}(0)},bilinearFiltering:function(w,S,D,M,T){var de,_e,be,he,pe,De,me,N,A=0,B=this.rcpScaleX,P=this.rcpScaleY,X=4*(S-1),I=w.imageData.data,V=w.ctx.createImageData(M,T),$=V.data;for(be=0;be<T;be++)for(he=0;he<M;he++)for(pe=B*he-(de=p(B*he)),De=P*be-(_e=p(P*be)),N=4*(_e*S+de),me=0;me<4;me++)$[A++]=I[N+me]*(1-pe)*(1-De)+I[N+4+me]*pe*(1-De)+I[N+X+me]*De*(1-pe)+I[N+X+4+me]*pe*De;return V},hermiteFastResize:function(w,S,D,M,T){for(var R=this.rcpScaleX,j=this.rcpScaleY,q=g(R/2),ae=g(j/2),_e=w.imageData.data,be=w.ctx.createImageData(M,T),he=be.data,pe=0;pe<T;pe++)for(var De=0;De<M;De++){for(var me=4*(De+pe*M),Ee=0,A=0,N=0,B=0,P=0,X=0,F=0,I=(pe+.5)*j,V=p(pe*j);V<(pe+1)*j;V++)for(var $=u(I-(V+.5))/ae,H=(De+.5)*R,Y=$*$,oe=p(De*R);oe<(De+1)*R;oe++){var ce=u(H-(oe+.5))/q,ge=l(Y+ce*ce);ge>1&&ge<-1||(Ee=2*ge*ge*ge-3*ge*ge+1)>0&&(F+=Ee*_e[3+(ce=4*(oe+V*S))],N+=Ee,_e[ce+3]<255&&(Ee=Ee*_e[ce+3]/250),B+=Ee*_e[ce],P+=Ee*_e[ce+1],X+=Ee*_e[ce+2],A+=Ee)}he[me]=B/A,he[me+1]=P/A,he[me+2]=X/A,he[me+3]=F/N}return be},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Contrast=(0,f.util.createClass)(_.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(0!==this.contrast){var a,h=l.imageData.data,g=h.length,d=Math.floor(255*this.contrast),v=259*(d+255)/(255*(259-d));for(a=0;a<g;a+=4)h[a]=v*(h[a]-128)+128,h[a+1]=v*(h[a+1]-128)+128,h[a+2]=v*(h[a+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Saturation=(0,f.util.createClass)(_.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(0!==this.saturation){var d,v,a=l.imageData.data,h=a.length,g=-this.saturation;for(d=0;d<h;d+=4)v=Math.max(a[d],a[d+1],a[d+2]),a[d]+=v!==a[d]?(v-a[d])*g:0,a[d+1]+=v!==a[d+1]?(v-a[d+1])*g:0,a[d+2]+=v!==a[d+2]?(v-a[d+2])*g:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Vibrance=(0,f.util.createClass)(_.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(0!==this.vibrance){var d,v,S,a=l.imageData.data,h=a.length,g=-this.vibrance;for(d=0;d<h;d+=4)v=Math.max(a[d],a[d+1],a[d+2]),S=2*Math.abs(v-(a[d]+a[d+1]+a[d+2])/3)/255*g,a[d]+=v!==a[d]?(v-a[d])*S:0,a[d+1]+=v!==a[d+1]?(v-a[d+1])*S:0,a[d+2]+=v!==a[d+2]?(v-a[d+2])*S:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Blur=(0,f.util.createClass)(_.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var a,h,u=l.filterBackend.resources,g=l.imageData.width,d=l.imageData.height;u.blurLayer1||(u.blurLayer1=f.util.createCanvasElement(),u.blurLayer2=f.util.createCanvasElement()),h=u.blurLayer2,((a=u.blurLayer1).width!==g||a.height!==d)&&(h.width=a.width=g,h.height=a.height=d);var D,M,T,R,v=a.getContext("2d"),w=h.getContext("2d"),S=15,j=.06*this.blur*.5;for(v.putImageData(l.imageData,0,0),w.clearRect(0,0,g,d),R=-S;R<=S;R++)T=j*(M=R/S)*g+(D=(Math.random()-.5)/4),w.globalAlpha=1-Math.abs(M),w.drawImage(a,T,D),v.drawImage(h,0,0),w.globalAlpha=1,w.clearRect(0,0,h.width,h.height);for(R=-S;R<=S;R++)T=j*(M=R/S)*d+(D=(Math.random()-.5)/4),w.globalAlpha=1-Math.abs(M),w.drawImage(a,D,T),v.drawImage(h,0,0),w.globalAlpha=1,w.clearRect(0,0,h.width,h.height);l.ctx.drawImage(a,0,0);var q=l.ctx.getImageData(0,0,a.width,a.height);return v.globalAlpha=1,v.clearRect(0,0,a.width,a.height),q},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var a=this.chooseRightDelta();l.uniform2fv(u.delta,a)},chooseRightDelta:function(){var a,l=1,u=[0,0];return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),a=l*this.blur*.12,this.horizontal?u[0]=a:u[1]=a,u}}),_.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Gamma=(0,f.util.createClass)(_.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],_.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var S,a=l.imageData.data,h=this.gamma,g=a.length,d=1/h[0],v=1/h[1],w=1/h[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),S=0,g=256;S<g;S++)this.rVals[S]=255*Math.pow(S/255,d),this.gVals[S]=255*Math.pow(S/255,v),this.bVals[S]=255*Math.pow(S/255,w);for(S=0,g=a.length;S<g;S+=4)a[S]=this.rVals[a[S]],a[S+1]=this.gVals[a[S+1]],a[S+2]=this.bVals[a[S+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.Composed=(0,f.util.createClass)(_.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(l,u){var h=(l.subFilters||[]).map(function(d){return new f.Image.filters[d.type](d)}),g=new f.Image.filters.Composed({subFilters:h});return u&&u(g),g}}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.Image.filters;_.HueRotation=(0,f.util.createClass)(_.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=f.util.cos(l),a=f.util.sin(l),h=1/3,g=Math.sqrt(h)*a,d=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+d/3,this.matrix[1]=h*d-g,this.matrix[2]=h*d+g,this.matrix[5]=h*d+g,this.matrix[6]=u+h*d,this.matrix[7]=h*d-g,this.matrix[10]=h*d-g,this.matrix[11]=h*d+g,this.matrix[12]=u+h*d},isNeutralState:function(l){return this.calculateMatrix(),_.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),_.BaseFilter.prototype.applyTo.call(this,l)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(Be),function(y){"use strict";var f=y.fabric||(y.fabric={}),_=f.util.object.clone;if(f.Text)f.warn("fabric.Text is already defined");else{var p="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(p),cacheProperties:f.Object.prototype.cacheProperties.concat(p),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u&&u.styles||{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=f.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,h,g,d,v,w=0,S=this._textLines.length;w<S;w++)if(("justify"===this.textAlign||w!==S-1&&!this.isEndOfWrapping(w))&&(h=0,g=this._textLines[w],(u=this.getLineWidth(w))<this.width&&(v=this.textLines[w].match(this._reSpacesAndTabs)))){l=(this.width-u)/v.length;for(var D=0,M=g.length;D<=M;D++)d=this.__charBounds[w][D],this._reSpaceAndTab.test(g[D])?(d.width+=l,d.kernedWidth+=l,d.left+=h,h+=l):d.left+=h}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){"stroke"===this.paintFirst?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,a){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom"}l.font=this._getFontDeclaration(u,a)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,a=this._textLines.length;u<a;u++){var h=this.getLineWidth(u);h>l&&(l=h)}return l},_renderTextLine:function(l,u,a,h,g,d){this._renderChars(l,u,a,h,g,d)},_renderTextLinesBackground:function(l){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var u,a,g,d,M,T,j,h=l.fillStyle,v=this._getLeftOffset(),w=this._getTopOffset(),S=0,D=0,R=this.path,q=0,ae=this._textLines.length;q<ae;q++)if(u=this.getHeightOfLine(q),this.textBackgroundColor||this.styleHas("textBackgroundColor",q)){g=this._textLines[q],a=this._getLineLeftOffset(q),D=0,S=0,d=this.getValueOfPropertyAt(q,0,"textBackgroundColor");for(var de=0,_e=g.length;de<_e;de++)M=this.__charBounds[q][de],T=this.getValueOfPropertyAt(q,de,"textBackgroundColor"),R?(l.save(),l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),l.fillStyle=T,T&&l.fillRect(-M.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),M.width,u/this.lineHeight),l.restore()):T!==d?(j=v+a+S,"rtl"===this.direction&&(j=this.width-j-D),l.fillStyle=d,d&&l.fillRect(j,w,D,u/this.lineHeight),S=M.left,D=M.width,d=T):D+=M.kernedWidth;T&&!R&&(j=v+a+S,"rtl"===this.direction&&(j=this.width-j-D),l.fillStyle=T,l.fillRect(j,w,D,u/this.lineHeight)),w+=u}else w+=u;l.fillStyle=h,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();f.charWidthsCache[u]||(f.charWidthsCache[u]={});var a=f.charWidthsCache[u],h=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return a[h]||(a[h]={}),a[h]},_measureChar:function(l,u,a,h){var D,M,T,j,g=this.getFontCache(u),w=a+l,S=this._getFontDeclaration(u)===this._getFontDeclaration(h),R=u.fontSize/this.CACHE_FONT_SIZE;if(a&&void 0!==g[a]&&(T=g[a]),void 0!==g[l]&&(j=D=g[l]),S&&void 0!==g[w]&&(j=(M=g[w])-T),void 0===D||void 0===T||void 0===M){var q=this.getMeasuringContext();this._setTextStyles(q,u,!0)}return void 0===D&&(j=D=q.measureText(l).width,g[l]=D),void 0===T&&S&&a&&(T=q.measureText(a).width,g[a]=T),S&&void 0===M&&(M=q.measureText(w).width,g[w]=M,j=M-T),{width:D*R,kernedWidth:j*R}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return 0!==this.charSpacing&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var a,h,d,v,M,T,u=0,g=this._textLines[l],S=new Array(g.length),D=0,R=this.path,j="right"===this.pathSide;for(this.__charBounds[l]=S,a=0;a<g.length;a++)v=this._getGraphemeBox(h=g[a],l,a,d),S[a]=v,u+=v.kernedWidth,d=h;if(S[a]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},R){switch(T=R.segmentsInfo[R.segmentsInfo.length-1].length,(M=f.util.getPointOnPath(R.path,0,R.segmentsInfo)).x+=R.pathOffset.x,M.y+=R.pathOffset.y,this.textAlign){case"left":D=j?T-u:0;break;case"center":D=(T-u)/2;break;case"right":D=j?0:T-u}for(D+=this.pathStartOffset*(j?-1:1),a=j?g.length-1:0;j?a>=0:a<g.length;j?a--:a++)D>T?D%=T:D<0&&(D+=T),this._setGraphemeOnPath(D,v=S[a],M),D+=v.kernedWidth}return{width:u,numOfSpaces:0}},_setGraphemeOnPath:function(l,u,a){var g=this.path,d=f.util.getPointOnPath(g.path,l+u.kernedWidth/2,g.segmentsInfo);u.renderLeft=d.x-a.x,u.renderTop=d.y-a.y,u.angle=d.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(l,u,a,h,g){var M,d=this.getCompleteStyleDeclaration(u,a),v=h?this.getCompleteStyleDeclaration(u,a-1):{},w=this._measureChar(l,d,h,v),S=w.kernedWidth,D=w.width;0!==this.charSpacing&&(D+=M=this._getWidthOfCharSpacing(),S+=M);var T={width:D,left:0,height:d.fontSize,kernedWidth:S,deltaY:d.deltaY};if(a>0&&!g){var R=this.__charBounds[u][a-1];T.left=R.left+R.width+w.kernedWidth-w.width}return T},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],a=this.getHeightOfChar(l,0),h=1,g=u.length;h<g;h++)a=Math.max(this.getHeightOfChar(l,h),a);return this.__lineHeights[l]=a*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,a=0,h=this._textLines.length;a<h;a++)l=this.getHeightOfLine(a),u+=a===h-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var a=0,h=this._getLeftOffset(),g=this._getTopOffset(),d=0,v=this._textLines.length;d<v;d++){var w=this.getHeightOfLine(d),S=w/this.lineHeight,D=this._getLineLeftOffset(d);this._renderTextLine(u,l,this._textLines[d],h+D,g+a+S,d),a+=w}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,a,h,g,d){var S,D,T,j,v=this.getHeightOfLine(d),w=-1!==this.textAlign.indexOf("justify"),M="",R=0,q=this.path,ae=!w&&0===this.charSpacing&&this.isEmptyStyles(d)&&!q,de="ltr"===this.direction,_e="ltr"===this.direction?1:-1,he=u.canvas.getAttribute("dir");if(u.save(),he!==this.direction&&(u.canvas.setAttribute("dir",de?"ltr":"rtl"),u.direction=de?"ltr":"rtl",u.textAlign=de?"left":"right"),g-=v*this._fontSizeFraction/this.lineHeight,ae)return this._renderChar(l,u,d,0,a.join(""),h,g,v),void u.restore();for(var pe=0,De=a.length-1;pe<=De;pe++)j=pe===De||this.charSpacing||q,M+=a[pe],T=this.__charBounds[d][pe],0===R?(h+=_e*(T.kernedWidth-T.width),R+=T.width):R+=T.kernedWidth,w&&!j&&this._reSpaceAndTab.test(a[pe])&&(j=!0),j||(S=S||this.getCompleteStyleDeclaration(d,pe),D=this.getCompleteStyleDeclaration(d,pe+1),j=f.util.hasStyleChanged(S,D,!1)),j&&(q?(u.save(),u.translate(T.renderLeft,T.renderTop),u.rotate(T.angle),this._renderChar(l,u,d,pe,M,-R/2,0,v),u.restore()):this._renderChar(l,u,d,pe,M,h,g,v),M="",S=D,h+=_e*R,R=0);u.restore()},_applyPatternGradientTransformText:function(l){var a,u=f.util.createCanvasElement(),h=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return u.width=h,u.height=g,(a=u.getContext("2d")).beginPath(),a.moveTo(0,0),a.lineTo(h,0),a.lineTo(h,g),a.lineTo(0,g),a.closePath(),a.translate(h/2,g/2),a.fillStyle=l.toLive(a),this._applyPatternGradientTransform(a,l),a.fill(),a.createPattern(u,"no-repeat")},handleFiller:function(l,u,a){var h,g;return a.toLive?"percentage"===a.gradientUnits||a.gradientTransform||a.patternTransform?(l.translate(h=-this.width/2,g=-this.height/2),l[u]=this._applyPatternGradientTransformText(a),{offsetX:h,offsetY:g}):(l[u]=a.toLive(l,this),this._applyPatternGradientTransform(l,a)):(l[u]=a,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,a,h,g,d,v){var T,R,w=this._getStyleDeclaration(a,h),S=this.getCompleteStyleDeclaration(a,h),D="fillText"===l&&S.fill,M="strokeText"===l&&S.stroke&&S.strokeWidth;!M&&!D||(u.save(),D&&(T=this._setFillStyles(u,S)),M&&(R=this._setStrokeStyles(u,S)),u.font=this._getFontDeclaration(S),w&&w.textBackgroundColor&&this._removeShadow(u),w&&w.deltaY&&(v+=w.deltaY),D&&u.fillText(g,d-T.offsetX,v-T.offsetY),M&&u.strokeText(g,d-R.offsetX,v-R.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,a){var h=this.get2DCursorLocation(l,!0),g=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),d=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY");return this.setSelectionStyles({fontSize:g*a.size,deltaY:d+g*a.baseline},l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),a=this.width-u,h=this.textAlign,g=this.direction,d=0,v=this.isEndOfWrapping(l);return"justify"===h||"justify-center"===h&&!v||"justify-right"===h&&!v||"justify-left"===h&&!v?0:("center"===h&&(d=a/2),"right"===h&&(d=a),"justify-center"===h&&(d=a/2),"justify-right"===h&&(d=a),"rtl"===g&&(d-=a),d)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(void 0!==this.__lineWidths[l])return this.__lineWidths[l];var a=this.measureLine(l).width;return this.__lineWidths[l]=a,a},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,a){var h=this._getStyleDeclaration(l,u);return h&&typeof h[a]<"u"?h[a]:this[a]},_renderTextDecoration:function(l,u){if(this[u]||this.styleHas(u)){for(var a,h,g,d,v,w,S,D,R,j,q,ae,de,_e,be,he,M=this._getLeftOffset(),T=this._getTopOffset(),pe=this.path,De=this._getWidthOfCharSpacing(),me=this.offsets[u],Ee=0,A=this._textLines.length;Ee<A;Ee++)if(a=this.getHeightOfLine(Ee),this[u]||this.styleHas(u,Ee)){S=this._textLines[Ee],_e=a/this.lineHeight,d=this._getLineLeftOffset(Ee),j=0,q=0,D=this.getValueOfPropertyAt(Ee,0,u),he=this.getValueOfPropertyAt(Ee,0,"fill"),R=T+_e*(1-this._fontSizeFraction),h=this.getHeightOfChar(Ee,0),v=this.getValueOfPropertyAt(Ee,0,"deltaY");for(var N=0,B=S.length;N<B;N++)if(ae=this.__charBounds[Ee][N],de=this.getValueOfPropertyAt(Ee,N,u),be=this.getValueOfPropertyAt(Ee,N,"fill"),g=this.getHeightOfChar(Ee,N),w=this.getValueOfPropertyAt(Ee,N,"deltaY"),pe&&de&&be)l.save(),l.fillStyle=he,l.translate(ae.renderLeft,ae.renderTop),l.rotate(ae.angle),l.fillRect(-ae.kernedWidth/2,me*g+w,ae.kernedWidth,this.fontSize/15),l.restore();else if((de!==D||be!==he||g!==h||w!==v)&&q>0){var P=M+d+j;"rtl"===this.direction&&(P=this.width-P-q),D&&he&&(l.fillStyle=he,l.fillRect(P,R+me*h+v,q,this.fontSize/15)),j=ae.left,q=ae.width,D=de,he=be,h=g,v=w}else q+=ae.kernedWidth;P=M+d+j,"rtl"===this.direction&&(P=this.width-P-q),l.fillStyle=be,de&&be&&l.fillRect(P,R+me*h+v,q-De,this.fontSize/15),T+=a}else T+=a;this._removeShadow(l)}},_getFontDeclaration:function(l,u){var a=l||this,h=this.fontFamily,g=f.Text.genericFonts.indexOf(h.toLowerCase())>-1,d=void 0===h||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||g?a.fontFamily:'"'+a.fontFamily+'"';return[f.isLikelyNode?a.fontWeight:a.fontStyle,f.isLikelyNode?a.fontStyle:a.fontWeight,u?this.CACHE_FONT_SIZE+"px":a.fontSize+"px",d].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),a=new Array(u.length),h=["\n"],g=[],d=0;d<u.length;d++)a[d]=f.util.string.graphemeSplit(u[d]),g=g.concat(a[d],h);return g.pop(),{_unwrappedLines:a,lines:u,graphemeText:g,graphemeLines:a}},toObject:function(l){var u=p.concat(l),a=this.callSuper("toObject",u);return a.styles=f.util.stylesToArray(this.styles,this.text),a.path&&(a.path=this.path.toObject()),a},set:function(l,u){this.callSuper("set",l,u);var a=!1,h=!1;if("object"==typeof l)for(var g in l)"path"===g&&this.setPathInfo(),a=a||-1!==this._dimensionAffectingProps.indexOf(g),h=h||"path"===g;else a=-1!==this._dimensionAffectingProps.indexOf(l),h="path"===l;return h&&this.setPathInfo(),a&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(l,u,a){if(!l)return u(null);var h=f.parseAttributes(l,f.Text.ATTRIBUTE_NAMES),g=h.textAnchor||"left";if((a=f.util.object.extend(a?_(a):{},h)).top=a.top||0,a.left=a.left||0,h.textDecoration){var d=h.textDecoration;-1!==d.indexOf("underline")&&(a.underline=!0),-1!==d.indexOf("overline")&&(a.overline=!0),-1!==d.indexOf("line-through")&&(a.linethrough=!0),delete a.textDecoration}"dx"in h&&(a.left+=h.dx),"dy"in h&&(a.top+=h.dy),"fontSize"in a||(a.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&null!==l.firstChild&&"data"in l.firstChild&&null!==l.firstChild.data&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var w=a.strokeWidth;a.strokeWidth=0;var S=new f.Text(v,a),D=S.getScaledHeight()/S.height,T=((S.height+S.strokeWidth)*S.lineHeight-S.height)*D,R=S.getScaledHeight()+T,j=0;"center"===g&&(j=S.getScaledWidth()/2),"right"===g&&(j=S.getScaledWidth()),S.set({left:S.left-j,top:S.top-(R-S.fontSize*(.07+S._fontSizeFraction))/S.lineHeight,strokeWidth:typeof w<"u"?w:1}),u(S)},f.Text.fromObject=function(l,u){var a=_(l),h=l.path;return delete a.path,f.Object._fromObject("Text",a,function(g){g.styles=f.util.stylesFromArray(l.styles,l.text),h?f.Object._fromObject("Path",h,function(d){g.set("path",d),u(g)},"path"):u(g)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}}(Be),C.util.object.extend(C.Text.prototype,{isEmptyStyles:function(y){if(!this.styles||typeof y<"u"&&!this.styles[y])return!0;var f=typeof y>"u"?this.styles:{line:this.styles[y]};for(var _ in f)for(var p in f[_])for(var l in f[_][p])return!1;return!0},styleHas:function(y,f){if(!this.styles||!y||""===y||typeof f<"u"&&!this.styles[f])return!1;var _=typeof f>"u"?this.styles:{0:this.styles[f]};for(var p in _)for(var l in _[p])if(typeof _[p][l][y]<"u")return!0;return!1},cleanStyle:function(y){if(!this.styles||!y||""===y)return!1;var p,l,f=this.styles,_=0,u=!0,a=0;for(var g in f){for(var d in p=0,f[g]){var h;_++,(h=f[g][d]).hasOwnProperty(y)?(l?h[y]!==l&&(u=!1):l=h[y],h[y]===this[y]&&delete h[y]):u=!1,0!==Object.keys(h).length?p++:delete f[g][d]}0===p&&delete f[g]}for(var w=0;w<this._textLines.length;w++)a+=this._textLines[w].length;u&&_===a&&(this[y]=l,this.removeStyle(y))},removeStyle:function(y){if(this.styles&&y&&""!==y){var _,p,l,f=this.styles;for(p in f){for(l in _=f[p])delete _[l][y],0===Object.keys(_[l]).length&&delete _[l];0===Object.keys(_).length&&delete f[p]}}},_extendStyles:function(y,f){var _=this.get2DCursorLocation(y);this._getLineStyle(_.lineIndex)||this._setLineStyle(_.lineIndex),this._getStyleDeclaration(_.lineIndex,_.charIndex)||this._setStyleDeclaration(_.lineIndex,_.charIndex,{}),C.util.object.extend(this._getStyleDeclaration(_.lineIndex,_.charIndex),f)},get2DCursorLocation:function(y,f){typeof y>"u"&&(y=this.selectionStart);for(var _=f?this._unwrappedTextLines:this._textLines,p=_.length,l=0;l<p;l++){if(y<=_[l].length)return{lineIndex:l,charIndex:y};y-=_[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:_[l-1].length<y?_[l-1].length:y}},getSelectionStyles:function(y,f,_){typeof y>"u"&&(y=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||y);for(var p=[],l=y;l<f;l++)p.push(this.getStyleAtPosition(l,_));return p},getStyleAtPosition:function(y,f){var _=this.get2DCursorLocation(y);return(f?this.getCompleteStyleDeclaration(_.lineIndex,_.charIndex):this._getStyleDeclaration(_.lineIndex,_.charIndex))||{}},setSelectionStyles:function(y,f,_){typeof f>"u"&&(f=this.selectionStart||0),typeof _>"u"&&(_=this.selectionEnd||f);for(var p=f;p<_;p++)this._extendStyles(p,y);return this._forceClearCache=!0,this},_getStyleDeclaration:function(y,f){var _=this.styles&&this.styles[y];return _?_[f]:null},getCompleteStyleDeclaration:function(y,f){for(var l,_=this._getStyleDeclaration(y,f)||{},p={},u=0;u<this._styleProperties.length;u++)p[l=this._styleProperties[u]]=typeof _[l]>"u"?this[l]:_[l];return p},_setStyleDeclaration:function(y,f,_){this.styles[y][f]=_},_deleteStyleDeclaration:function(y,f){delete this.styles[y][f]},_getLineStyle:function(y){return!!this.styles[y]},_setLineStyle:function(y){this.styles[y]={}},_deleteLineStyle:function(y){delete this.styles[y]}}),function(){function y(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}C.IText=C.util.createClass(C.Text,C.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,_){this.callSuper("initialize",f,_),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,_){this[f]!==_&&(this._fireSelectionChanged(),this[f]=_),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var _=this.canvas.contextTop,p=this.canvas.viewportTransform;_.save(),_.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this.transform(_),this._clearTextArea(_),f||_.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var f=this._getCursorBoundaries(),_=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,_):this.renderSelection(f,_),_.restore()}},_clearTextArea:function(f){var _=this.width+4,p=this.height+4;f.clearRect(-_/2,-p/2,_,p)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var _=this._getLeftOffset(),p=this._getTopOffset(),l=this._getCursorBoundariesOffsets(f);return{left:_,top:p,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var _,p,l,h,u=0,a=0,g=this.get2DCursorLocation(f);l=g.charIndex,p=g.lineIndex;for(var d=0;d<p;d++)u+=this.getHeightOfLine(d);_=this._getLineLeftOffset(p);var v=this.__charBounds[p][l];return v&&(a=v.left),0!==this.charSpacing&&l===this._textLines[p].length&&(a-=this._getWidthOfCharSpacing()),h={top:u,left:_+(a>0?a:0)},"rtl"===this.direction&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(f,_){var p=this.get2DCursorLocation(),l=p.lineIndex,u=p.charIndex>0?p.charIndex-1:0,a=this.getValueOfPropertyAt(l,u,"fontSize"),h=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/h,d=f.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");d+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,_),_.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),_.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,_.fillRect(f.left+f.leftOffset-g/2,d+f.top+v,g,a)},renderSelection:function(f,_){for(var p=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(p),h=this.get2DCursorLocation(l),g=a.lineIndex,d=h.lineIndex,v=a.charIndex<0?0:a.charIndex,w=h.charIndex<0?0:h.charIndex,S=g;S<=d;S++){var T,D=this._getLineLeftOffset(S)||0,M=this.getHeightOfLine(S),R=0,j=0;if(S===g&&(R=this.__charBounds[g][v].left),S>=g&&S<d)j=u&&!this.isEndOfWrapping(S)?this.width:this.getLineWidth(S)||5;else if(S===d)if(0===w)j=this.__charBounds[d][w].left;else{var q=this._getWidthOfCharSpacing();j=this.__charBounds[d][w-1].left+this.__charBounds[d][w-1].width-q}T=M,(this.lineHeight<1||S===d&&this.lineHeight>1)&&(M/=this.lineHeight);var ae=f.left+D+R,de=j-R,_e=M,be=0;this.inCompositionMode?(_.fillStyle=this.compositionColor||"black",_e=1,be=M):_.fillStyle=this.selectionColor,"rtl"===this.direction&&(ae=this.width-ae-de),_.fillRect(ae,f.top+f.topOffset+be,de,_e),f.topOffset+=T}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0);return{l:f.lineIndex,c:f.charIndex>0?f.charIndex-1:0}}}),C.IText.fromObject=function(f,_){var p=C.util.stylesFromArray(f.styles,f.text),l=Object.assign({},f,{styles:p});if(y(l),l.styles)for(var u in l.styles)for(var a in l.styles[u])y(l.styles[u][a]);C.Object._fromObject("IText",l,_,"text")}}(),function(){var y=C.util.object.clone;C.util.object.extend(C.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var _=f.canvas;_&&(_._hasITextHandlers||(_._hasITextHandlers=!0,f._initCanvasHandlers(_)),_._iTextInstances=_._iTextInstances||[],_._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var _=f.canvas;_&&(_._iTextInstances=_._iTextInstances||[],C.util.removeFromArray(_._iTextInstances,f),0===_._iTextInstances.length&&(_._hasITextHandlers=!1,f._removeCanvasHandlers(_)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,_,p,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",_,{duration:p,onComplete:function(){u.isAborted||f[l]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var _=this,p=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){_._tick()},p)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,_=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&_&&_.clearContext(_.contextTop||_.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var _=0,p=f-1;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)_++,p--;for(;/\S/.test(this._text[p])&&p>-1;)_++,p--;return f-_},findWordBoundaryRight:function(f){var _=0,p=f;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)_++,p++;for(;/\S/.test(this._text[p])&&p<this._text.length;)_++,p++;return f+_},findLineBoundaryLeft:function(f){for(var _=0,p=f-1;!/\n/.test(this._text[p])&&p>-1;)_++,p--;return f-_},findLineBoundaryRight:function(f){for(var _=0,p=f;!/\n/.test(this._text[p])&&p<this._text.length;)_++,p++;return f+_},searchWordBoundary:function(f,_){for(var p=this._text,l=this._reSpace.test(p[f])?f-1:f,u=p[l],a=C.reNonWord;!a.test(u)&&l>0&&l<p.length;)u=p[l+=_];return a.test(u)&&(l+=1===_?0:1),l},selectWord:function(f){var _=this.searchWordBoundary(f=f||this.selectionStart,-1),p=this.searchWordBoundary(f,1);this.selectionStart=_,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){var _=this.findLineBoundaryLeft(f=f||this.selectionStart),p=this.findLineBoundaryRight(f);return this.selectionStart=_,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.selected=!1,_.isEditing&&_.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var _=this.getSelectionStartFromPointer(f.e),p=this.selectionStart,l=this.selectionEnd;(_!==this.__selectionStartOnMouseDown||p===l)&&(p===_||l===_)||(_>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=_):(this.selectionStart=_,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==p||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,_,p){var l=p.slice(0,f),u=C.util.string.graphemeSplit(l).length;if(f===_)return{selectionStart:u,selectionEnd:u};var a=p.slice(f,_);return{selectionStart:u,selectionEnd:u+C.util.string.graphemeSplit(a).length}},fromGraphemeToStringSelection:function(f,_,p){var u=p.slice(0,f).join("").length;return f===_?{selectionStart:u,selectionEnd:u}:{selectionStart:u,selectionEnd:u+p.slice(f,_).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,_=this._getCursorBoundaries(f),p=this.get2DCursorLocation(f),a=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize")*this.lineHeight,h=_.leftOffset,g=this.calcTransformMatrix(),d={x:_.left+h,y:_.top+_.topOffset+a},v=this.canvas.getRetinaScaling(),w=this.canvas.upperCanvasEl,S=w.width/v,D=w.height/v,M=S-a,T=D-a,R=w.clientWidth/S,j=w.clientHeight/D;return d=C.util.transformPoint(d,g),(d=C.util.transformPoint(d,this.canvas.viewportTransform)).x*=R,d.y*=j,d.x<0&&(d.x=0),d.x>M&&(d.x=M),d.y<0&&(d.y=0),d.y>T&&(d.y=T),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:d.x+"px",top:d.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,_=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,_&&(_.blur&&_.blur(),_.parentNode&&_.parentNode.removeChild(_)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,_){var d,v,p=this.get2DCursorLocation(f,!0),l=this.get2DCursorLocation(_,!0),u=p.lineIndex,a=p.charIndex,h=l.lineIndex,g=l.charIndex;if(u!==h){if(this.styles[u])for(d=a;d<this._unwrappedTextLines[u].length;d++)delete this.styles[u][d];if(this.styles[h])for(d=g;d<this._unwrappedTextLines[h].length;d++)(v=this.styles[h][d])&&(this.styles[u]||(this.styles[u]={}),this.styles[u][a+d-g]=v);for(d=u+1;d<=h;d++)delete this.styles[d];this.shiftLineStyles(h,u-h)}else if(this.styles[u]){v=this.styles[u];var S,D,w=g-a;for(d=a;d<g;d++)delete v[d];for(D in this.styles[u])(S=parseInt(D,10))>=g&&(v[S-w]=v[D],delete v[D])}},shiftLineStyles:function(f,_){var p=y(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>f&&(this.styles[u+_]=p[u],p[u-_]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,_,p,l){var u,a={},h=!1,g=this._unwrappedTextLines[f].length===_;for(var d in p||(p=1),this.shiftLineStyles(f,p),this.styles[f]&&(u=this.styles[f][0===_?_:_-1]),this.styles[f]){var v=parseInt(d,10);v>=_&&(h=!0,a[v-_]=this.styles[f][d],g&&0===_||delete this.styles[f][d])}var w=!1;for(h&&!g&&(this.styles[f+p]=a,w=!0),w&&p--;p>0;)l&&l[p-1]?this.styles[f+p]={0:y(l[p-1])}:u?this.styles[f+p]={0:y(u)}:delete this.styles[f+p],p--;this._forceClearCache=!0},insertCharStyleObject:function(f,_,p,l){this.styles||(this.styles={});var u=this.styles[f],a=u?y(u):{};for(var h in p||(p=1),a){var g=parseInt(h,10);g>=_&&(u[g+p]=a[g],a[g-p]||delete u[g])}if(this._forceClearCache=!0,l)for(;p--;)Object.keys(l[p]).length&&(this.styles[f]||(this.styles[f]={}),this.styles[f][_+p]=y(l[p]));else if(u)for(var d=u[_?_-1:1];d&&p--;)this.styles[f][_+p]=y(d)},insertNewStyleBlock:function(f,_,p){for(var l=this.get2DCursorLocation(_,!0),u=[0],a=0,h=0;h<f.length;h++)"\n"===f[h]?u[++a]=0:u[a]++;for(u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],p),p=p&&p.slice(u[0]+1)),a&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],a),h=1;h<a;h++)u[h]>0?this.insertCharStyleObject(l.lineIndex+h,0,u[h],p):p&&this.styles[l.lineIndex+h]&&p[0]&&(this.styles[l.lineIndex+h][0]=p[0]),p=p&&p.slice(u[h]+1);u[h]>0&&this.insertCharStyleObject(l.lineIndex+h,0,u[h],p)},setSelectionStartEndWithShift:function(f,_,p){p<=f?(_===f?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=p):p>f&&p<_?"right"===this._selectionDirection?this.selectionEnd=p:this.selectionStart=p:(_===f?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=_),this.selectionEnd=p)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),C.util.object.extend(C.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(y){if(this.canvas){this.__newClickTime=+new Date;var f=y.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",y),this._stopEvent(y.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(y){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===y.x&&this.__lastPointer.y===y.y},_stopEvent:function(y){y.preventDefault&&y.preventDefault(),y.stopPropagation&&y.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(y){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(y.e))},tripleClickHandler:function(y){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(y.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(y.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(y){if(this.__isMousedown=!1,!(!this.editable||this.group||y.transform&&y.transform.actionPerformed||y.e.button&&1!==y.e.button)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(y.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(y){var f=this.getSelectionStartFromPointer(y);y.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(y){for(var g,f=this.getLocalPointer(y),_=0,p=0,l=0,u=0,a=0,d=0,v=this._textLines.length;d<v&&l<=f.y;d++)l+=this.getHeightOfLine(d)*this.scaleY,a=d,d>0&&(u+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));p=this._getLineLeftOffset(a)*this.scaleX,g=this._textLines[a],"rtl"===this.direction&&(f.x=this.width*this.scaleX-f.x+p);for(var w=0,S=g.length;w<S&&(_=p,(p+=this.__charBounds[a][w].kernedWidth*this.scaleX)<=f.x);w++)u++;return this._getNewSelectionStartFromOffset(f,_,p,u,S)},_getNewSelectionStartFromOffset:function(y,f,_,p,l){var a=_-y.x,g=p+(a>y.x-f||a<0?0:1);return this.flipX&&(g=l-g),g>this._text.length&&(g=this._text.length),g}}),C.util.object.extend(C.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=C.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var y=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+y.top+"; left: "+y.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+y.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):C.document.body.appendChild(this.hiddenTextarea),C.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),C.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),C.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),C.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(C.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(y){if(this.isEditing){var f="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(y.keyCode in f)this[f[y.keyCode]](y);else{if(!(y.keyCode in this.ctrlKeysMapDown)||!y.ctrlKey&&!y.metaKey)return;this[this.ctrlKeysMapDown[y.keyCode]](y)}y.stopImmediatePropagation(),y.preventDefault(),y.keyCode>=33&&y.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(y){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:y.keyCode in this.ctrlKeysMapUp&&(y.ctrlKey||y.metaKey)&&(this[this.ctrlKeysMapUp[y.keyCode]](y),y.stopImmediatePropagation(),y.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(y){var f=this.fromPaste;if(this.fromPaste=!1,y&&y.stopPropagation(),this.isEditing){var u,a,w,S,D,_=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,p=this._text.length,l=_.length,h=l-p,g=this.selectionStart,d=this.selectionEnd,v=g!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var M=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),T=g>M.selectionStart;v?(u=this._text.slice(g,d),h+=d-g):l<p&&(u=T?this._text.slice(d+h,d):this._text.slice(g,g-h)),a=_.slice(M.selectionEnd-h,M.selectionEnd),u&&u.length&&(a.length&&(w=this.getSelectionStyles(g,g+1,!1),w=a.map(function(){return w[0]})),v?(S=g,D=d):T?(S=d-u.length,D=d):(S=d,D=d+u.length),this.removeStyleFromTo(S,D)),a.length&&(f&&a.join("")===C.copiedText&&!C.disableStyleCopyPaste&&(w=C.copiedTextStyle),this.insertNewStyleBlock(a,g,w)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(y){this.compositionStart=y.target.selectionStart,this.compositionEnd=y.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(C.copiedText=this.getSelectedText(),C.copiedTextStyle=C.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(y){return y&&y.clipboardData||C.window.clipboardData},_getWidthBeforeCursor:function(y,f){var p,_=this._getLineLeftOffset(y);return f>0&&(_+=(p=this.__charBounds[y][f-1]).left+p.width),_},getDownCursorOffset:function(y,f){var _=this._getSelectionForOffset(y,f),p=this.get2DCursorLocation(_),l=p.lineIndex;if(l===this._textLines.length-1||y.metaKey||34===y.keyCode)return this._text.length-_;var u=p.charIndex,a=this._getWidthBeforeCursor(l,u),h=this._getIndexOnLine(l+1,a);return this._textLines[l].slice(u).length+h+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(y,f){return y.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(y,f){var _=this._getSelectionForOffset(y,f),p=this.get2DCursorLocation(_),l=p.lineIndex;if(0===l||y.metaKey||33===y.keyCode)return-_;var u=p.charIndex,a=this._getWidthBeforeCursor(l,u),h=this._getIndexOnLine(l-1,a),g=this._textLines[l].slice(0,u),d=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+h-g.length+(1-d)},_getIndexOnLine:function(y,f){for(var a,h,_=this._textLines[y],l=this._getLineLeftOffset(y),u=0,g=0,d=_.length;g<d;g++)if((l+=a=this.__charBounds[y][g].width)>f){h=!0;var w=l,S=Math.abs(l-a-f);u=Math.abs(w-f)<S?g:g-1;break}return h||(u=_.length-1),u},moveCursorDown:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",y)},moveCursorUp:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",y)},_moveCursorUpOrDown:function(y,f){var p=this["get"+y+"CursorOffset"](f,"right"===this._selectionDirection);f.shiftKey?this.moveCursorWithShift(p):this.moveCursorWithoutShift(p),0!==p&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(y){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+y:this.selectionEnd+y),0!==y},moveCursorWithoutShift:function(y){return y<0?(this.selectionStart+=y,this.selectionEnd=this.selectionStart):(this.selectionEnd+=y,this.selectionStart=this.selectionEnd),0!==y},moveCursorLeft:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",y)},_move:function(y,f,_){var p;if(y.altKey)p=this["findWordBoundary"+_](this[f]);else{if(!y.metaKey&&35!==y.keyCode&&36!==y.keyCode)return this[f]+="Left"===_?-1:1,!0;p=this["findLineBoundary"+_](this[f])}if(typeof p<"u"&&this[f]!==p)return this[f]=p,!0},_moveLeft:function(y,f){return this._move(y,f,"Left")},_moveRight:function(y,f){return this._move(y,f,"Right")},moveCursorLeftWithoutShift:function(y){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(f=this._moveLeft(y,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(y){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(y,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(y,"selectionStart")):void 0},moveCursorRight:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",y)},_moveCursorLeftOrRight:function(y,f){var _="moveCursor"+y+"With";this._currentCursorOpacity=1,this[_+=f.shiftKey?"Shift":"outShift"](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(y){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(y,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(y,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(y){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(y,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(y,f){typeof f>"u"&&(f=y+1),this.removeStyleFromTo(y,f),this._text.splice(y,f-y),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(y,f,_,p){typeof p>"u"&&(p=_),p>_&&this.removeStyleFromTo(_,p);var l=C.util.string.graphemeSplit(y);this.insertNewStyleBlock(l,_,f),this._text=[].concat(this._text.slice(0,_),l,this._text.slice(p)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var y=C.util.toFixed,f=/  +/g;C.util.object.extend(C.Text.prototype,{_toSVG:function(){var _=this._getSVGLeftTopOffsets(),p=this._getSVGTextAndBg(_.textTop,_.textLeft);return this._wrapSVGTextAndBg(p)},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(),{reviver:_,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(_){var l=this.getSvgTextDecoration(this);return[_.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",_.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(_,p){var h,l=[],u=[],a=_;this._setSVGBg(u);for(var g=0,d=this._textLines.length;g<d;g++)h=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(u,g,p+h,a),this._setSVGTextLineText(l,g,p+h,a),a+=this.getHeightOfLine(g);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(_,p,l,u){var a=_!==_.trim()||_.match(f),h=this.getSvgSpanStyles(p,a),g=h?'style="'+h+'"':"",d=p.deltaY,v="",w=C.Object.NUM_FRACTION_DIGITS;return d&&(v=' dy="'+y(d,w)+'" '),['<tspan x="',y(l,w),'" y="',y(u,w),'" ',v,g,">",C.util.string.escapeXml(_),"</tspan>"].join("")},_setSVGTextLineText:function(_,p,l,u){var g,d,w,S,T,a=this.getHeightOfLine(p),h=-1!==this.textAlign.indexOf("justify"),v="",D=0,M=this._textLines[p];u+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var R=0,j=M.length-1;R<=j;R++)T=R===j||this.charSpacing,v+=M[R],w=this.__charBounds[p][R],0===D?(l+=w.kernedWidth-w.width,D+=w.width):D+=w.kernedWidth,h&&!T&&this._reSpaceAndTab.test(M[R])&&(T=!0),T||(g=g||this.getCompleteStyleDeclaration(p,R),d=this.getCompleteStyleDeclaration(p,R+1),T=C.util.hasStyleChanged(g,d,!0)),T&&(S=this._getStyleDeclaration(p,R)||{},_.push(this._createTextCharSpan(v,S,l,u)),v="",g=d,l+=D,D=0)},_pushTextBgRect:function(_,p,l,u,a,h){var g=C.Object.NUM_FRACTION_DIGITS;_.push("\t\t<rect ",this._getFillAttributes(p),' x="',y(l,g),'" y="',y(u,g),'" width="',y(a,g),'" height="',y(h,g),'"></rect>\n')},_setSVGTextLineBg:function(_,p,l,u){for(var v,w,a=this._textLines[p],h=this.getHeightOfLine(p)/this.lineHeight,g=0,d=0,S=this.getValueOfPropertyAt(p,0,"textBackgroundColor"),D=0,M=a.length;D<M;D++)v=this.__charBounds[p][D],(w=this.getValueOfPropertyAt(p,D,"textBackgroundColor"))!==S?(S&&this._pushTextBgRect(_,S,l+d,u,g,h),d=v.left,g=v.width,S=w):g+=v.kernedWidth;w&&this._pushTextBgRect(_,w,l+d,u,g,h)},_getFillAttributes:function(_){var p=_&&"string"==typeof _?new C.Color(_):"";return p&&p.getSource()&&1!==p.getAlpha()?'opacity="'+p.getAlpha()+'" fill="'+p.setAlpha(1).toRgb()+'"':'fill="'+_+'"'},_getSVGLineTopOffset:function(_){for(var l,p=0,u=0;u<_;u++)p+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:p,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(_){return C.Object.prototype.getSvgStyles.call(this,_)+" white-space: pre;"}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(_){for(var p=0,l=0,u=0,a={},h=0;h<_.graphemeLines.length;h++)"\n"===_.graphemeText[u]&&h>0?(l=0,u++,p++):!this.splitByGrapheme&&this._reSpaceAndTab.test(_.graphemeText[u])&&h>0&&(l++,u++),a[h]={line:p,offset:l},u+=_.graphemeLines[h].length,l+=_.graphemeLines[h].length;return a},styleHas:function(_,p){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[p];l&&(p=l.line)}return f.Text.prototype.styleHas.call(this,_,p)},isEmptyStyles:function(_){if(!this.styles)return!0;var u,a,p=0,h=!1,g=this._styleMap[_],d=this._styleMap[_+1];for(var v in g&&(_=g.line,p=g.offset),d&&(h=d.line===_,u=d.offset),a=typeof _>"u"?this.styles:{line:this.styles[_]})for(var w in a[v])if(w>=p&&(!h||w<u))for(var S in a[v][w])return!1;return!0},_getStyleDeclaration:function(_,p){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[_];if(!l)return null;_=l.line,p=l.offset+p}return this.callSuper("_getStyleDeclaration",_,p)},_setStyleDeclaration:function(_,p,l){var u=this._styleMap[_];this.styles[_=u.line][p=u.offset+p]=l},_deleteStyleDeclaration:function(_,p){var l=this._styleMap[_];delete this.styles[_=l.line][p=l.offset+p]},_getLineStyle:function(_){return!!this.styles[this._styleMap[_].line]},_setLineStyle:function(_){this.styles[this._styleMap[_].line]={}},_wrapText:function(_,p){var u,l=[];for(this.isWrapping=!0,u=0;u<_.length;u++)l=l.concat(this._wrapLine(_[u],u,p));return this.isWrapping=!1,l},_measureWord:function(_,p,l){var a,u=0;l=l||0;for(var g=0,d=_.length;g<d;g++)u+=this._getGraphemeBox(_[g],p,g+l,a,!0).kernedWidth,a=_[g];return u},_wrapLine:function(_,p,l,ae){var a=0,h=this.splitByGrapheme,g=[],d=[],v=h?f.util.string.graphemeSplit(_):_.split(this._wordJoiners),w="",S=0,D=h?"":" ",M=0,T=0,R=0,j=!0,q=this._getWidthOfCharSpacing();ae=ae||0,0===v.length&&v.push([]),l-=ae;for(var de=0;de<v.length;de++)w=h?v[de]:f.util.string.graphemeSplit(v[de]),M=this._measureWord(w,p,S),S+=w.length,(a+=T+M-q)>l&&!j?(g.push(d),d=[],a=M,j=!0):a+=q,!j&&!h&&d.push(D),d=d.concat(w),T=h?0:this._measureWord([D],p,S),S++,j=!1,M>R&&(R=M);return de&&g.push(d),R+ae>this.dynamicMinWidth&&(this.dynamicMinWidth=R-q+ae),g},isEndOfWrapping:function(_){return!this._styleMap[_+1]||this._styleMap[_+1].line!==this._styleMap[_].line},missingNewlineOffset:function(_){return this.splitByGrapheme?this.isEndOfWrapping(_)?1:0:1},_splitTextIntoLines:function(_){for(var p=f.Text.prototype._splitTextIntoLines.call(this,_),l=this._wrapText(p.lines,this.width),u=new Array(l.length),a=0;a<l.length;a++)u[a]=l[a].join("");return p.lines=u,p.graphemeLines=l,p},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var _={};for(var p in this._styleMap)this._textLines[p]&&(_[this._styleMap[p].line]=1);for(var p in this.styles)_[p]||delete this.styles[p]},toObject:function(_){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(_))}}),f.Textbox.fromObject=function(_,p){var l=f.util.stylesFromArray(_.styles,_.text),u=Object.assign({},_,{styles:l});return f.Object._fromObject("Textbox",u,p,"text")}}(Be),function(){var y=C.controlsUtils,f=y.scaleSkewCursorStyleHandler,_=y.scaleCursorStyleHandler,p=y.scalingEqually,l=y.scalingYOrSkewingX,u=y.scalingXOrSkewingY,a=y.scaleOrSkewActionName,h=C.Object.prototype.controls;if(h.ml=new C.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:a}),h.mr=new C.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:a}),h.mb=new C.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:l,getActionName:a}),h.mt=new C.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:l,getActionName:a}),h.tl=new C.Control({x:-.5,y:-.5,cursorStyleHandler:_,actionHandler:p}),h.tr=new C.Control({x:.5,y:-.5,cursorStyleHandler:_,actionHandler:p}),h.bl=new C.Control({x:-.5,y:.5,cursorStyleHandler:_,actionHandler:p}),h.br=new C.Control({x:.5,y:.5,cursorStyleHandler:_,actionHandler:p}),h.mtr=new C.Control({x:0,y:-.5,actionHandler:y.rotationWithSnapping,cursorStyleHandler:y.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),C.Textbox){var g=C.Textbox.prototype.controls={};g.mtr=h.mtr,g.tr=h.tr,g.br=h.br,g.tl=h.tl,g.bl=h.bl,g.mt=h.mt,g.mb=h.mb,g.mr=new C.Control({x:.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),g.ml=new C.Control({x:-.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()},960:()=>{},759:()=>{},272:()=>{}},el=>{el(el.s=493)}]);